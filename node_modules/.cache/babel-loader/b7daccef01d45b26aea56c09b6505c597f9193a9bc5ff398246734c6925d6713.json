{"ast":null,"code":"// Mock Question Service per Test QCER\n// Questo simula il database e l'AI Service\n\nconst mockQuestionBank = {\n  demographic: [{\n    id: 'years_italy',\n    type: 'multiple_choice',\n    question: 'Da quanti anni sei in Italia?',\n    options: [{\n      value: 'less1',\n      text: 'Meno di 1 anno'\n    }, {\n      value: '1to2',\n      text: '1-2 anni'\n    }, {\n      value: 'more2',\n      text: 'Pi√π di 2 anni'\n    }, {\n      value: 'born',\n      text: 'Sono nato/a in Italia'\n    }]\n  }],\n  reading: [\n  // Livello A1-A2\n  {\n    id: 'reading_1',\n    type: 'reading_comprehension',\n    level: 'A1',\n    text: `Maria √® una studentessa italiana. Ha 20 anni e studia medicina all'universit√† di Roma. \n             Ogni mattina si alza alle 7:00 e fa colazione con caff√® e cornetti. \n             Poi va all'universit√† in autobus. Le piacciono molto gli studi e vuole diventare medico.`,\n    subQuestions: [{\n      id: 'reading_1_q1',\n      question: 'Che cosa studia Maria?',\n      options: [{\n        value: 'correct',\n        text: 'Medicina',\n        isCorrect: true\n      }, {\n        value: 'wrong1',\n        text: 'Letteratura',\n        isCorrect: false\n      }, {\n        value: 'wrong2',\n        text: 'Storia',\n        isCorrect: false\n      }, {\n        value: 'wrong3',\n        text: 'Matematica',\n        isCorrect: false\n      }]\n    }, {\n      id: 'reading_1_q2',\n      question: 'A che ora si alza Maria?',\n      options: [{\n        value: 'correct',\n        text: 'Alle 7:00',\n        isCorrect: true\n      }, {\n        value: 'wrong1',\n        text: 'Alle 8:00',\n        isCorrect: false\n      }, {\n        value: 'wrong2',\n        text: 'Alle 6:00',\n        isCorrect: false\n      }, {\n        value: 'wrong3',\n        text: 'Alle 9:00',\n        isCorrect: false\n      }]\n    }]\n  },\n  // Livello B1-B2\n  {\n    id: 'reading_2',\n    type: 'reading_comprehension',\n    level: 'B1',\n    text: `L'immigrazione in Italia ha trasformato significativamente il panorama sociale del paese \n             negli ultimi decenni. Molte persone provenienti da diverse parti del mondo hanno scelto \n             l'Italia come nuova casa, portando con s√© tradizioni culturali, linguistiche e culinarie \n             che hanno arricchito la societ√† italiana. Tuttavia, questo processo non √® stato privo di \n             sfide: l'integrazione richiede tempo, comprensione reciproca e politiche adeguate che \n             favoriscano l'inclusione sociale ed economica.`,\n    subQuestions: [{\n      id: 'reading_2_q1',\n      question: 'Secondo il testo, l\\'immigrazione in Italia ha:',\n      options: [{\n        value: 'correct',\n        text: 'Trasformato il panorama sociale',\n        isCorrect: true\n      }, {\n        value: 'wrong1',\n        text: 'Causato solo problemi',\n        isCorrect: false\n      }, {\n        value: 'wrong2',\n        text: 'Ridotto la diversit√† culturale',\n        isCorrect: false\n      }, {\n        value: 'wrong3',\n        text: 'Interessato solo le grandi citt√†',\n        isCorrect: false\n      }]\n    }, {\n      id: 'reading_2_q2',\n      question: 'L\\'integrazione richiede:',\n      options: [{\n        value: 'correct',\n        text: 'Tempo e comprensione reciproca',\n        isCorrect: true\n      }, {\n        value: 'wrong1',\n        text: 'Solo politiche governative',\n        isCorrect: false\n      }, {\n        value: 'wrong2',\n        text: 'L\\'abbandono delle tradizioni d\\'origine',\n        isCorrect: false\n      }, {\n        value: 'wrong3',\n        text: 'Cambiamenti solo da parte degli immigrati',\n        isCorrect: false\n      }]\n    }]\n  },\n  // Livello C1-C2\n  {\n    id: 'reading_3',\n    type: 'reading_comprehension',\n    level: 'C1',\n    text: `La questione del multilinguismo nelle societ√† contemporanee solleva interrogativi complessi \n             che vanno ben oltre la mera pratica comunicativa. Nel contesto globalizzato odierno, \n             la capacit√† di padroneggiare pi√π lingue non rappresenta soltanto un vantaggio competitivo \n             nel mercato del lavoro, ma costituisce un elemento fondamentale per la costruzione \n             dell'identit√† individuale e collettiva. La ricerca neurolinguistica ha dimostrato che \n             il cervello multilingue sviluppa capacit√† cognitive superiori, inclusa una maggiore \n             flessibilit√† mentale e una migliore capacit√† di problem-solving. Tuttavia, permane \n             il dibattito sui potenziali rischi di erosione delle lingue minoritarie in favore \n             di quelle dominanti a livello internazionale.`,\n    subQuestions: [{\n      id: 'reading_3_q1',\n      question: 'Secondo il testo, il multilinguismo:',\n      options: [{\n        value: 'correct',\n        text: 'Contribuisce alla costruzione dell\\'identit√†',\n        isCorrect: true\n      }, {\n        value: 'wrong1',\n        text: '√à utile solo per il lavoro',\n        isCorrect: false\n      }, {\n        value: 'wrong2',\n        text: 'Causa confusione cognitiva',\n        isCorrect: false\n      }, {\n        value: 'wrong3',\n        text: 'Non ha effetti sul cervello',\n        isCorrect: false\n      }]\n    }, {\n      id: 'reading_3_q2',\n      question: 'Il dibattito sulle lingue minoritarie riguarda:',\n      options: [{\n        value: 'correct',\n        text: 'Il rischio di erosione a favore di lingue dominanti',\n        isCorrect: true\n      }, {\n        value: 'wrong1',\n        text: 'La loro maggiore difficolt√† di apprendimento',\n        isCorrect: false\n      }, {\n        value: 'wrong2',\n        text: 'L\\'impossibilit√† di insegnarle',\n        isCorrect: false\n      }, {\n        value: 'wrong3',\n        text: 'La loro inutilit√† nel mondo moderno',\n        isCorrect: false\n      }]\n    }]\n  }],\n  grammar: [\n  // Livello A1\n  {\n    id: 'grammar_1',\n    type: 'grammar',\n    level: 'A1',\n    question: 'Completa la frase: \"Io _____ italiano.\"',\n    options: [{\n      value: 'correct',\n      text: 'sono',\n      isCorrect: true\n    }, {\n      value: 'wrong1',\n      text: 'sei',\n      isCorrect: false\n    }, {\n      value: 'wrong2',\n      text: '√®',\n      isCorrect: false\n    }, {\n      value: 'wrong3',\n      text: 'siamo',\n      isCorrect: false\n    }]\n  }, {\n    id: 'grammar_2',\n    type: 'grammar',\n    level: 'A1',\n    question: 'Scegli l\\'articolo corretto: \"_____ casa √® bella.\"',\n    options: [{\n      value: 'correct',\n      text: 'La',\n      isCorrect: true\n    }, {\n      value: 'wrong1',\n      text: 'Il',\n      isCorrect: false\n    }, {\n      value: 'wrong2',\n      text: 'Lo',\n      isCorrect: false\n    }, {\n      value: 'wrong3',\n      text: 'Le',\n      isCorrect: false\n    }]\n  },\n  // Livello A2\n  {\n    id: 'grammar_3',\n    type: 'grammar',\n    level: 'A2',\n    question: 'Ieri io _____ al cinema.',\n    options: [{\n      value: 'correct',\n      text: 'sono andato/a',\n      isCorrect: true\n    }, {\n      value: 'wrong1',\n      text: 'vado',\n      isCorrect: false\n    }, {\n      value: 'wrong2',\n      text: 'andr√≤',\n      isCorrect: false\n    }, {\n      value: 'wrong3',\n      text: 'andare',\n      isCorrect: false\n    }]\n  }, {\n    id: 'grammar_4',\n    type: 'grammar',\n    level: 'A2',\n    question: 'Se _____ bel tempo, andiamo al mare.',\n    options: [{\n      value: 'correct',\n      text: 'fa',\n      isCorrect: true\n    }, {\n      value: 'wrong1',\n      text: 'far√†',\n      isCorrect: false\n    }, {\n      value: 'wrong2',\n      text: 'faceva',\n      isCorrect: false\n    }, {\n      value: 'wrong3',\n      text: 'fare',\n      isCorrect: false\n    }]\n  },\n  // Livello B1\n  {\n    id: 'grammar_5',\n    type: 'grammar',\n    level: 'B1',\n    question: 'Bench√© _____ stanco, continuer√≤ a lavorare.',\n    options: [{\n      value: 'correct',\n      text: 'sia',\n      isCorrect: true\n    }, {\n      value: 'wrong1',\n      text: 'sono',\n      isCorrect: false\n    }, {\n      value: 'wrong2',\n      text: 'ero',\n      isCorrect: false\n    }, {\n      value: 'wrong3',\n      text: 'sar√≤',\n      isCorrect: false\n    }]\n  }, {\n    id: 'grammar_6',\n    type: 'grammar',\n    level: 'B1',\n    question: 'Il libro _____ ho letto √® molto interessante.',\n    options: [{\n      value: 'correct',\n      text: 'che',\n      isCorrect: true\n    }, {\n      value: 'wrong1',\n      text: 'cui',\n      isCorrect: false\n    }, {\n      value: 'wrong2',\n      text: 'quale',\n      isCorrect: false\n    }, {\n      value: 'wrong3',\n      text: 'dove',\n      isCorrect: false\n    }]\n  },\n  // Livello B2\n  {\n    id: 'grammar_7',\n    type: 'grammar',\n    level: 'B2',\n    question: 'Non appena _____ a casa, ti telefoner√≤.',\n    options: [{\n      value: 'correct',\n      text: 'sar√≤ arrivato',\n      isCorrect: true\n    }, {\n      value: 'wrong1',\n      text: 'arrivo',\n      isCorrect: false\n    }, {\n      value: 'wrong2',\n      text: 'arrivavo',\n      isCorrect: false\n    }, {\n      value: 'wrong3',\n      text: 'sono arrivato',\n      isCorrect: false\n    }]\n  },\n  // Livello C1\n  {\n    id: 'grammar_8',\n    type: 'grammar',\n    level: 'C1',\n    question: 'Qualora _____ problemi, non esitate a contattarmi.',\n    options: [{\n      value: 'correct',\n      text: 'doveste avere',\n      isCorrect: true\n    }, {\n      value: 'wrong1',\n      text: 'avete',\n      isCorrect: false\n    }, {\n      value: 'wrong2',\n      text: 'avrete',\n      isCorrect: false\n    }, {\n      value: 'wrong3',\n      text: 'avreste',\n      isCorrect: false\n    }]\n  }],\n  writing: [{\n    id: 'writing_1',\n    type: 'writing',\n    level: 'A1',\n    prompt: 'Presentati brevemente: scrivi il tuo nome, et√†, da dove vieni e cosa ti piace fare.',\n    placeholder: 'Ciao, io sono...',\n    minWords: 30,\n    minRows: 3\n  }, {\n    id: 'writing_2',\n    type: 'writing',\n    level: 'B1',\n    prompt: 'Descrivi una giornata tipica nella tua vita, dalle 7:00 del mattino alle 22:00 di sera.',\n    placeholder: 'La mia giornata inizia quando...',\n    minWords: 80,\n    minRows: 5\n  }, {\n    id: 'writing_3',\n    type: 'writing',\n    level: 'C1',\n    prompt: 'Esprimi la tua opinione sull\\'importanza dell\\'apprendimento delle lingue straniere nella societ√† moderna, presentando argomenti a favore e possibili obiezioni.',\n    placeholder: 'L\\'apprendimento delle lingue straniere...',\n    minWords: 150,\n    minRows: 8\n  }],\n  speaking: [{\n    id: 'speaking_1',\n    type: 'speaking',\n    level: 'A1',\n    prompt: 'Presentati: di\\' il tuo nome, la tua et√† e di dove sei.',\n    maxDuration: 30\n  }, {\n    id: 'speaking_2',\n    type: 'speaking',\n    level: 'B1',\n    prompt: 'Descrivi la tua citt√† natale: com\\'√®, che cosa ti piace di pi√π e cosa vorresti cambiare.',\n    maxDuration: 60\n  }, {\n    id: 'speaking_3',\n    type: 'speaking',\n    level: 'C1',\n    prompt: 'Spiega quale pensi sia il ruolo delle nuove tecnologie nell\\'educazione e come potrebbero cambiare l\\'apprendimento in futuro.',\n    maxDuration: 90\n  }]\n};\n\n// Sistema Avanzato di Valutazione Scrittura SUPER POTENZIATO\nconst AdvancedWritingEvaluator = {\n  // Valutazione completa del testo\n  evaluateWriting: async (text, targetLevel = 'B1') => {\n    console.log('üîç === ANALISI AVANZATA SCRITTURA SUPER POTENZIATA ===');\n    console.log('üìù Testo:', text.substring(0, 100) + '...');\n    const scores = {\n      orthography: AdvancedWritingEvaluator.analyzeOrthography(text),\n      morphology: AdvancedWritingEvaluator.analyzeMorphologyEnhanced(text),\n      syntax: AdvancedWritingEvaluator.analyzeSyntaxEnhanced(text),\n      lexicon: AdvancedWritingEvaluator.analyzeLexicon(text),\n      coherence: AdvancedWritingEvaluator.analyzeCoherence(text)\n    };\n\n    // Pesi per livello QCER\n    const weights = AdvancedWritingEvaluator.getWeightsByLevel(targetLevel);\n\n    // Calcolo score finale\n    const finalScore = Object.keys(scores).reduce((total, aspect) => {\n      return total + scores[aspect] * weights[aspect];\n    }, 0);\n    console.log('üìä Breakdown valutazione scrittura SUPER POTENZIATA:');\n    Object.keys(scores).forEach(aspect => {\n      console.log(`  ${aspect}: ${(scores[aspect] * 100).toFixed(1)}%`);\n    });\n    console.log(`üéØ Score finale: ${(finalScore * 100).toFixed(1)}%`);\n    console.log('================================================');\n    return {\n      score: Math.min(Math.max(finalScore, 0), 1),\n      breakdown: scores,\n      feedback: AdvancedWritingEvaluator.generateFeedback(scores, targetLevel),\n      suggestedLevel: AdvancedWritingEvaluator.suggestLevel(finalScore)\n    };\n  },\n  // 1. ANALISI ORTOGRAFICA (potenziata)\n  analyzeOrthography: text => {\n    const words = text.trim().split(/\\s+/);\n    let errors = 0;\n\n    // Pattern ortografici comuni\n    const orthographicErrors = [/\\bperche\\b/gi, /\\bpuo\\b/gi, /\\bcioe\\b/gi, /\\bpiu\\b/gi, /\\bgia\\b/gi, /\\bper√∂\\b/gi, /\\w*[kxwyjq]\\w*/gi, /\\bxke\\b/gi, /\\bnn\\b/gi, /\\bperk√®\\b/gi, /\\bperke\\b/gi, /\\bx\\b/gi];\n    words.forEach(word => {\n      orthographicErrors.forEach(errorPattern => {\n        if (errorPattern.test(word)) {\n          errors++;\n          console.log(`üî¥ Errore ortografico: \"${word}\"`);\n        }\n      });\n    });\n    const errorRate = errors / Math.max(words.length, 1);\n    const score = Math.max(0, 1 - errorRate * 3);\n    console.log(`üìù Ortografia: ${errors} errori su ${words.length} parole = ${(score * 100).toFixed(1)}%`);\n    return score;\n  },\n  // 2. ANALISI MORFOLOGICA SUPER POTENZIATA\n  analyzeMorphologyEnhanced: text => {\n    let score = 1.0;\n    let errors = 0;\n    console.log('üîç === ANALISI MORFOLOGICA SUPER POTENZIATA ===');\n\n    // DATABASE PATTERN GRAMMATICALI COMPLETO (78 REGOLE)\n    const morphologicalPatterns = [\n    // === CATEGORIA 1: ARTICOLI DETERMINATIVI ===\n    {\n      pattern: /\\bil\\s+(?:casa|scuola|famiglia|vita|universit√†|amica|idea|auto|aula|ora|et√†|isola|azienda)/gi,\n      error: \"articolo_maschile_nome_femminile\",\n      weight: 0.8,\n      level: \"A1\"\n    }, {\n      pattern: /\\bla\\s+(?:uomo|bambino|lavoro|computer|telefono|quaderno|libro|cane|gatto|albero|sole|mare)/gi,\n      error: \"articolo_femminile_nome_maschile\",\n      weight: 0.8,\n      level: \"A1\"\n    }, {\n      pattern: /\\blo\\s+(?:casa|scuola|famiglia|penna|pizza|strada|montagna)/gi,\n      error: \"articolo_lo_nome_femminile\",\n      weight: 0.8,\n      level: \"A1\"\n    }, {\n      pattern: /\\ble\\s+(?:uomo|uomini|bambino|bambini|libro|libri)/gi,\n      error: \"articolo_le_nome_maschile\",\n      weight: 0.8,\n      level: \"A1\"\n    }, {\n      pattern: /\\bgli\\s+(?:casa|scuola|famiglia|donna|donne|ragazze)/gi,\n      error: \"articolo_gli_nome_femminile\",\n      weight: 0.8,\n      level: \"A1\"\n    },\n    // === CATEGORIA 2: ARTICOLI INDETERMINATIVI ===\n    {\n      pattern: /\\bun\\s+(?:amica|universit√†|idea|auto|aula|ora|et√†|isola|azienda|azione)/gi,\n      error: \"articolo_indeterminativo_femminile\",\n      weight: 0.8,\n      level: \"A1\"\n    }, {\n      pattern: /\\buna\\s+(?:uomo|bambino|lavoro|computer|telefono|quaderno|libro|cane|gatto)/gi,\n      error: \"articolo_indeterminativo_maschile\",\n      weight: 0.8,\n      level: \"A1\"\n    }, {\n      pattern: /\\buno\\s+(?:casa|scuola|famiglia|penna|pizza|strada|donna|ragazza)/gi,\n      error: \"articolo_indeterminativo_uno_femminile\",\n      weight: 0.8,\n      level: \"A1\"\n    }, {\n      pattern: /\\bun'\\s+(?:uomo|bambino|amico|studente|italiano|inglese)/gi,\n      error: \"apostrofo_indeterminativo_maschile\",\n      weight: 0.8,\n      level: \"A1\"\n    },\n    // === CATEGORIA 3: POSSESSIVI - CONCORDANZA GENERE ===\n    {\n      pattern: /\\bmio\\s+(?:sorella|famiglia|amica|scuola|casa|vita|universit√†|madre|nonna|zia|cugina)/gi,\n      error: \"possessivo_maschile_nome_femminile\",\n      weight: 0.9,\n      level: \"A1\"\n    }, {\n      pattern: /\\bmia\\s+(?:fratello|amico|lavoro|libro|quaderno|computer|padre|nonno|zio|cugino)/gi,\n      error: \"possessivo_femminile_nome_maschile\",\n      weight: 0.9,\n      level: \"A1\"\n    }, {\n      pattern: /\\btuo\\s+(?:sorella|famiglia|amica|scuola|casa|madre|fidanzata|moglie)/gi,\n      error: \"possessivo_maschile_nome_femminile\",\n      weight: 0.9,\n      level: \"A1\"\n    }, {\n      pattern: /\\btua\\s+(?:fratello|amico|lavoro|libro|padre|fidanzato|marito)/gi,\n      error: \"possessivo_femminile_nome_maschile\",\n      weight: 0.9,\n      level: \"A1\"\n    }, {\n      pattern: /\\bsuo\\s+(?:sorella|famiglia|amica|madre|moglie|figlia|nipote)/gi,\n      error: \"possessivo_maschile_nome_femminile\",\n      weight: 0.9,\n      level: \"A1\"\n    }, {\n      pattern: /\\bsua\\s+(?:fratello|padre|marito|figlio|nipote)/gi,\n      error: \"possessivo_femminile_nome_maschile\",\n      weight: 0.9,\n      level: \"A1\"\n    },\n    // === CATEGORIA 4: POSSESSIVI - CONCORDANZA NUMERO ===\n    {\n      pattern: /\\bmiei\\s+(?:sorella|famiglia|amica|madre)/gi,\n      error: \"possessivo_plurale_nome_singolare\",\n      weight: 0.8,\n      level: \"A2\"\n    }, {\n      pattern: /\\bmie\\s+(?:fratello|amico|padre)/gi,\n      error: \"possessivo_plurale_nome_singolare\",\n      weight: 0.8,\n      level: \"A2\"\n    }, {\n      pattern: /\\bmio\\s+(?:amici|fratelli|libri|quaderni)/gi,\n      error: \"possessivo_singolare_nome_plurale\",\n      weight: 0.8,\n      level: \"A2\"\n    }, {\n      pattern: /\\bmia\\s+(?:amiche|sorelle|case|scuole)/gi,\n      error: \"possessivo_singolare_nome_plurale\",\n      weight: 0.8,\n      level: \"A2\"\n    },\n    // === CATEGORIA 5: VERBI - CONIUGAZIONE ESSERE ===\n    {\n      pattern: /\\bio\\s+(?:sei|√®|siamo|siete)\\b/gi,\n      error: \"coniugazione_essere_io\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\btu\\s+(?:sono|√®|siamo|siete)\\b/gi,\n      error: \"coniugazione_essere_tu\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\blui\\s+(?:sono|sei|siamo|siete)\\b/gi,\n      error: \"coniugazione_essere_lui\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\blei\\s+(?:sono|sei|siamo|siete)\\b/gi,\n      error: \"coniugazione_essere_lei\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\bnoi\\s+(?:sono|sei|√®|siete)\\b/gi,\n      error: \"coniugazione_essere_noi\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\bvoi\\s+(?:sono|sei|√®|siamo)\\b/gi,\n      error: \"coniugazione_essere_voi\",\n      weight: 0.7,\n      level: \"A1\"\n    },\n    // === CATEGORIA 6: VERBI - CONIUGAZIONE AVERE ===\n    {\n      pattern: /\\bio\\s+(?:hai|ha|abbiamo|avete|hanno)\\b/gi,\n      error: \"coniugazione_avere_io\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\btu\\s+(?:ho|ha|abbiamo|avete|hanno)\\b/gi,\n      error: \"coniugazione_avere_tu\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\blui\\s+(?:ho|hai|abbiamo|avete|hanno)\\b/gi,\n      error: \"coniugazione_avere_lui\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\bnoi\\s+(?:ho|hai|ha|avete|hanno)\\b/gi,\n      error: \"coniugazione_avere_noi\",\n      weight: 0.7,\n      level: \"A1\"\n    },\n    // === CATEGORIA 7: AUSILIARI PARTICIPIO PASSATO ===\n    {\n      pattern: /\\bho\\s+(?:andato|venuto|partito|arrivato|uscito|entrato|tornato|salito|sceso)/gi,\n      error: \"ausiliare_movimento_sbagliato\",\n      weight: 0.8,\n      level: \"A1\"\n    }, {\n      pattern: /\\bho\\s+(?:andata|venuta|partita|arrivata|uscita|entrata|tornata|salita|scesa)/gi,\n      error: \"ausiliare_movimento_sbagliato\",\n      weight: 0.8,\n      level: \"A1\"\n    }, {\n      pattern: /\\bsono\\s+(?:mangiato|bevuto|studiato|lavorato|dormito|comprato|venduto|pagato)/gi,\n      error: \"ausiliare_attivit√†_sbagliato\",\n      weight: 0.8,\n      level: \"A1\"\n    }, {\n      pattern: /\\bhai\\s+(?:andato|venuto|partito|arrivato|nato|morto)/gi,\n      error: \"ausiliare_movimento_sbagliato\",\n      weight: 0.8,\n      level: \"A1\"\n    }, {\n      pattern: /\\bha\\s+(?:andato|venuto|partito|arrivato|nato|morto)/gi,\n      error: \"ausiliare_movimento_sbagliato\",\n      weight: 0.8,\n      level: \"A1\"\n    },\n    // === CATEGORIA 8: PARTICIPIO PASSATO - CONCORDANZA ===\n    {\n      pattern: /\\bsono\\s+andato\\s+(?:a\\s+)?casa/gi,\n      error: \"participio_concordanza_femminile\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\b√®\\s+andata\\s+al\\s+lavoro/gi,\n      error: \"participio_concordanza_maschile\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\bho\\s+visto\\s+(?:Maria|Lucia|Anna)/gi,\n      error: \"participio_concordanza_oggetto\",\n      weight: 0.5,\n      level: \"B1\"\n    },\n    // === CATEGORIA 9: PREPOSIZIONI + INFINITO ===\n    {\n      pattern: /\\bper\\s+(?:studia|lavora|mangia|dormi|gioca|cammina|corri|nuota)/gi,\n      error: \"preposizione_infinito_scorretto\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\bdi\\s+(?:studia|lavora|mangia|dormi|gioca|cammina|corri|nuota)/gi,\n      error: \"preposizione_infinito_scorretto\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\ba\\s+(?:studia|lavora|mangia|dormi|gioca|cammina|corri|nuota)/gi,\n      error: \"preposizione_infinito_scorretto\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\bda\\s+(?:studia|lavora|mangia|dormi|gioca|cammina|corri|nuota)/gi,\n      error: \"preposizione_infinito_scorretto\",\n      weight: 0.7,\n      level: \"A1\"\n    },\n    // === CATEGORIA 10: PREPOSIZIONI ARTICOLATE ===\n    {\n      pattern: /\\bdi\\s+il\\b/gi,\n      error: \"preposizione_articolata_del\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\bdi\\s+la\\b/gi,\n      error: \"preposizione_articolata_della\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\ba\\s+il\\b/gi,\n      error: \"preposizione_articolata_al\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\ba\\s+la\\b/gi,\n      error: \"preposizione_articolata_alla\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\bin\\s+il\\b/gi,\n      error: \"preposizione_articolata_nel\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\bin\\s+la\\b/gi,\n      error: \"preposizione_articolata_nella\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\bda\\s+il\\b/gi,\n      error: \"preposizione_articolata_dal\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\bda\\s+la\\b/gi,\n      error: \"preposizione_articolata_dalla\",\n      weight: 0.6,\n      level: \"A2\"\n    },\n    // === CATEGORIA 11: ACCORDI AGGETTIVI - GENERE ===\n    {\n      pattern: /\\b(?:il|un)\\s+\\w*o\\s+(?:bella|piccola|grande|buona|italiana|americana|francese)/gi,\n      error: \"accordo_aggettivo_genere\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\b(?:la|una)\\s+\\w*a\\s+(?:bello|piccolo|grande|buono|italiano|americano|francese)/gi,\n      error: \"accordo_aggettivo_genere\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\buomo\\s+(?:bella|piccola|italiana)/gi,\n      error: \"accordo_aggettivo_genere\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\bdonna\\s+(?:bello|piccolo|italiano)/gi,\n      error: \"accordo_aggettivo_genere\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\bambino\\s+(?:bella|piccola|italiana)/gi,\n      error: \"accordo_aggettivo_genere\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\bbambina\\s+(?:bello|piccolo|italiano)/gi,\n      error: \"accordo_aggettivo_genere\",\n      weight: 0.7,\n      level: \"A1\"\n    },\n    // === CATEGORIA 12: ACCORDI AGGETTIVI - NUMERO ===\n    {\n      pattern: /\\buomo\\s+(?:belli|piccoli|italiani)/gi,\n      error: \"accordo_aggettivo_numero\",\n      weight: 0.7,\n      level: \"A2\"\n    }, {\n      pattern: /\\buomini\\s+(?:bello|piccolo|italiano)/gi,\n      error: \"accordo_aggettivo_numero\",\n      weight: 0.7,\n      level: \"A2\"\n    }, {\n      pattern: /\\bdonna\\s+(?:belle|piccole|italiane)/gi,\n      error: \"accordo_aggettivo_numero\",\n      weight: 0.7,\n      level: \"A2\"\n    }, {\n      pattern: /\\bdonne\\s+(?:bella|piccola|italiana)/gi,\n      error: \"accordo_aggettivo_numero\",\n      weight: 0.7,\n      level: \"A2\"\n    },\n    // === CATEGORIA 13: PRONOMI DIMOSTRATIVI ===\n    {\n      pattern: /\\bquesto\\s+(?:\\w*a)\\b/gi,\n      error: \"dimostrativo_genere_scorretto\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\bquesta\\s+(?:\\w*o)\\b/gi,\n      error: \"dimostrativo_genere_scorretto\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\bquelli\\s+(?:\\w*a)\\b/gi,\n      error: \"dimostrativo_genere_scorretto\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\bquelle\\s+(?:\\w*o)\\b/gi,\n      error: \"dimostrativo_genere_scorretto\",\n      weight: 0.6,\n      level: \"A2\"\n    },\n    // === CATEGORIA 14: PERSONA VERBALE ===\n    {\n      pattern: /\\bcapisce\\s+poco/gi,\n      error: \"persona_verbale_sbagliata\",\n      weight: 0.6,\n      level: \"A1\"\n    }, {\n      pattern: /\\bparla\\s+poco/gi,\n      error: \"persona_verbale_sbagliata\",\n      weight: 0.6,\n      level: \"A1\"\n    }, {\n      pattern: /\\bstudio\\s+molto/gi,\n      error: \"persona_verbale_corretta\",\n      weight: -0.1,\n      level: \"A1\"\n    }, {\n      pattern: /\\blavoro\\s+molto/gi,\n      error: \"persona_verbale_corretta\",\n      weight: -0.1,\n      level: \"A1\"\n    },\n    // === CATEGORIA 15: TEMPI VERBALI - PRESENTE ===\n    {\n      pattern: /\\bio\\s+(?:mangi|lavori|studi|dormi|parti)/gi,\n      error: \"presente_persona_sbagliata\",\n      weight: 0.6,\n      level: \"A1\"\n    }, {\n      pattern: /\\btu\\s+(?:mangio|lavoro|studio|dormo|parto)/gi,\n      error: \"presente_persona_sbagliata\",\n      weight: 0.6,\n      level: \"A1\"\n    }, {\n      pattern: /\\blui\\s+(?:mangi|lavori|studi|dormi|parti)/gi,\n      error: \"presente_persona_sbagliata\",\n      weight: 0.6,\n      level: \"A1\"\n    },\n    // === CATEGORIA 16: FUTURO SEMPLICE ===\n    {\n      pattern: /\\biofar√≤/gi,\n      error: \"futuro_forma_scorretta\",\n      weight: 0.5,\n      level: \"A2\"\n    }, {\n      pattern: /\\btufarai/gi,\n      error: \"futuro_forma_scorretta\",\n      weight: 0.5,\n      level: \"A2\"\n    }, {\n      pattern: /\\bio\\s+farai/gi,\n      error: \"futuro_persona_sbagliata\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\btu\\s+far√≤/gi,\n      error: \"futuro_persona_sbagliata\",\n      weight: 0.6,\n      level: \"A2\"\n    },\n    // === CATEGORIA 17: CONGIUNTIVO (B1+) ===\n    {\n      pattern: /\\bse\\s+(?:sono|sei|√®|siamo|siete)\\b/gi,\n      error: \"congiuntivo_mancante\",\n      weight: 0.4,\n      level: \"B1\"\n    }, {\n      pattern: /\\bpenso\\s+che\\s+(?:sono|sei|√®|siamo|siete)\\b/gi,\n      error: \"congiuntivo_dopo_che\",\n      weight: 0.5,\n      level: \"B1\"\n    }, {\n      pattern: /\\bspero\\s+che\\s+(?:vado|vai|va|andiamo|andate|vanno)\\b/gi,\n      error: \"congiuntivo_dopo_che\",\n      weight: 0.5,\n      level: \"B1\"\n    },\n    // === CATEGORIA 18: CONCORDANZA SOGGETTO-VERBO ===\n    {\n      pattern: /\\bgli\\s+studenti\\s+(?:studia|lavora|va)/gi,\n      error: \"concordanza_soggetto_plurale\",\n      weight: 0.7,\n      level: \"A2\"\n    }, {\n      pattern: /\\ble\\s+ragazze\\s+(?:studia|lavora|va)/gi,\n      error: \"concordanza_soggetto_plurale\",\n      weight: 0.7,\n      level: \"A2\"\n    }, {\n      pattern: /\\blo\\s+studente\\s+(?:studiano|lavorano|vanno)/gi,\n      error: \"concordanza_soggetto_singolare\",\n      weight: 0.7,\n      level: \"A2\"\n    },\n    // === CATEGORIA 19: FORME DI CORTESIA ===\n    {\n      pattern: /\\blei\\s+(?:sei|hai)/gi,\n      error: \"forma_cortesia_sbagliata\",\n      weight: 0.4,\n      level: \"A2\"\n    }, {\n      pattern: /\\btu\\s+√®\\b/gi,\n      error: \"forma_cortesia_confusa\",\n      weight: 0.5,\n      level: \"A2\"\n    }];\n\n    // Scansiona tutti i pattern con logging dettagliato\n    morphologicalPatterns.forEach((rule, index) => {\n      const matches = text.match(rule.pattern);\n      if (matches) {\n        matches.forEach(match => {\n          errors++;\n          console.log(`üî¥ [${index + 1}/78] Errore ${rule.level} [${rule.error}]: \"${match}\" (peso: ${rule.weight})`);\n\n          // Penalit√† proporzionale al peso e livello\n          let penalty = rule.weight * 0.15;\n          if (rule.level === \"A1\") penalty *= 1.2; // Errori A1 pi√π gravi\n          if (rule.level === \"B1\") penalty *= 0.8; // Errori B1 meno gravi\n\n          score -= penalty;\n        });\n      }\n    });\n    const words = text.trim().split(/\\s+/).length;\n    const finalScore = Math.max(score, 0);\n    console.log(`üìù MORFOLOGIA SUPER POTENZIATA (78 patterns):`);\n    console.log(`   ‚îú‚îÄ‚îÄ ${errors} errori su ${words} parole`);\n    console.log(`   ‚îú‚îÄ‚îÄ Score grezzo: ${score.toFixed(3)}`);\n    console.log(`   ‚îî‚îÄ‚îÄ Score finale: ${(finalScore * 100).toFixed(1)}%`);\n    return finalScore;\n  },\n  // 3. ANALISI SINTATTICA SUPER POTENZIATA\n  analyzeSyntaxEnhanced: text => {\n    let score = 1.0;\n    let issues = 0;\n    console.log('üîó === ANALISI SINTATTICA SUPER POTENZIATA ===');\n\n    // PATTERN SINTATTICI AVANZATI (30 REGOLE)\n    const syntaxPatterns = [\n    // === NEGAZIONE SCORRETTA ===\n    {\n      pattern: /\\bio\\s+no\\s+(?:parlare|sapere|capire|mangiare|dormire|studiare|lavorare)\\b/gi,\n      error: \"negazione_infinito_scorretto\",\n      weight: 0.8,\n      level: \"A1\"\n    }, {\n      pattern: /\\bno\\s+ho\\b/gi,\n      error: \"negazione_ausiliare_scorretto\",\n      weight: 0.8,\n      level: \"A1\"\n    }, {\n      pattern: /\\bno\\s+sono\\b/gi,\n      error: \"negazione_essere_scorretto\",\n      weight: 0.8,\n      level: \"A1\"\n    }, {\n      pattern: /\\bno\\s+va\\b/gi,\n      error: \"negazione_verbo_scorretto\",\n      weight: 0.8,\n      level: \"A1\"\n    }, {\n      pattern: /\\bno\\s+pu√≤\\b/gi,\n      error: \"negazione_modale_scorretto\",\n      weight: 0.8,\n      level: \"A1\"\n    },\n    // === ORDINE DELLE PAROLE ===\n    {\n      pattern: /\\bvenuto\\s+io\\b/gi,\n      error: \"ordine_parole_soggetto_participio\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\bitaliano\\s+io\\b/gi,\n      error: \"ordine_parole_predicato_soggetto\",\n      weight: 0.7,\n      level: \"A1\"\n    }, {\n      pattern: /\\bmolto\\s+bello\\s+√®/gi,\n      error: \"ordine_parole_aggettivo_verbo\",\n      weight: 0.7,\n      level: \"A2\"\n    }, {\n      pattern: /\\bgi√†\\s+ho\\s+mangiato/gi,\n      error: \"ordine_avverbio_ausiliare\",\n      weight: 0.5,\n      level: \"A2\"\n    },\n    // === STRUTTURE INCOMPLETE ===\n    {\n      pattern: /\\b(?:per|di|da|con|in)\\s*$/gi,\n      error: \"preposizione_senza_complemento\",\n      weight: 0.6,\n      level: \"A1\"\n    }, {\n      pattern: /\\bche\\s*$/gi,\n      error: \"congiunzione_senza_proposizione\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\bperch√©\\s*$/gi,\n      error: \"congiunzione_causale_incompleta\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\bquando\\s*$/gi,\n      error: \"congiunzione_temporale_incompleta\",\n      weight: 0.5,\n      level: \"A2\"\n    },\n    // === CONNETTIVI SCORRETTI ===\n    {\n      pattern: /\\be\\s+poi\\s+e\\b/gi,\n      error: \"ripetizione_connettivi\",\n      weight: 0.4,\n      level: \"A2\"\n    }, {\n      pattern: /\\bma\\s+per√≤\\b/gi,\n      error: \"doppia_avversativa\",\n      weight: 0.5,\n      level: \"A2\"\n    }, {\n      pattern: /\\bperch√©\\s+e\\b/gi,\n      error: \"connettivi_ridondanti\",\n      weight: 0.4,\n      level: \"A2\"\n    }, {\n      pattern: /\\bquindi\\s+allora\\b/gi,\n      error: \"connettivi_consecutivi_doppi\",\n      weight: 0.4,\n      level: \"B1\"\n    },\n    // === USO PRONOMI ===\n    {\n      pattern: /\\bmi\\s+piace\\s+loro/gi,\n      error: \"pronome_indiretto_scorretto\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\bli\\s+ho\\s+detto\\s+a\\s+lei/gi,\n      error: \"ridondanza_pronome_prep\",\n      weight: 0.4,\n      level: \"B1\"\n    }, {\n      pattern: /\\blo\\s+ho\\s+visto\\s+(?:Maria|Lucia|Anna)/gi,\n      error: \"pronome_oggetto_femminile\",\n      weight: 0.6,\n      level: \"A2\"\n    }, {\n      pattern: /\\bla\\s+ho\\s+visto\\s+(?:Marco|Luca|Paolo)/gi,\n      error: \"pronome_oggetto_maschile\",\n      weight: 0.6,\n      level: \"A2\"\n    },\n    // === COSTRUZIONI VERBALI ===\n    {\n      pattern: /\\bsto\\s+(?:andato|venuto|partito)/gi,\n      error: \"gerundio_participio_confuso\",\n      weight: 0.7,\n      level: \"A2\"\n    }, {\n      pattern: /\\bstavo\\s+(?:andato|venuto|partito)/gi,\n      error: \"imperfetto_progressivo_scorretto\",\n      weight: 0.6,\n      level: \"B1\"\n    }, {\n      pattern: /\\bho\\s+stando/gi,\n      error: \"gerundio_composto_scorretto\",\n      weight: 0.7,\n      level: \"B1\"\n    },\n    // === INTERROGATIVE ===\n    {\n      pattern: /\\bche\\s+cosa\\s+√®\\s+(?:Marco|Luca|Paolo)/gi,\n      error: \"interrogativa_persona_cosa\",\n      weight: 0.6,\n      level: \"A1\"\n    }, {\n      pattern: /\\bchi\\s+√®\\s+(?:questo|questa)\\s+cosa/gi,\n      error: \"interrogativa_cosa_chi\",\n      weight: 0.6,\n      level: \"A1\"\n    },\n    // === PERIODO IPOTETICO (B1+) ===\n    {\n      pattern: /\\bse\\s+(?:sar√≤|sarai|sar√†)/gi,\n      error: \"periodo_ipotetico_futuro\",\n      weight: 0.4,\n      level: \"B1\"\n    }, {\n      pattern: /\\bse\\s+ho\\s+tempo\\s+(?:andr√≤|farei)/gi,\n      error: \"periodo_ipotetico_misto\",\n      weight: 0.5,\n      level: \"B1\"\n    },\n    // === SUBORDINATE ===\n    {\n      pattern: /\\bpenso\\s+di\\s+che/gi,\n      error: \"subordinata_doppia_congiunzione\",\n      weight: 0.6,\n      level: \"B1\"\n    }, {\n      pattern: /\\bspero\\s+di\\s+che/gi,\n      error: \"subordinata_doppia_congiunzione\",\n      weight: 0.6,\n      level: \"B1\"\n    },\n    // === CONCORDANZA TEMPI ===\n    {\n      pattern: /\\bieri\\s+(?:vado|va|andiamo)/gi,\n      error: \"concordanza_temporale_passato\",\n      weight: 0.7,\n      level: \"A2\"\n    }, {\n      pattern: /\\bdomani\\s+(?:sono\\s+andato|ho\\s+mangiato)/gi,\n      error: \"concordanza_temporale_futuro\",\n      weight: 0.7,\n      level: \"A2\"\n    }];\n\n    // Scansiona pattern sintattici\n    syntaxPatterns.forEach((rule, index) => {\n      const matches = text.match(rule.pattern);\n      if (matches) {\n        matches.forEach(match => {\n          issues++;\n          console.log(`üî¥ [${index + 1}/30] Problema ${rule.level} [${rule.error}]: \"${match}\" (peso: ${rule.weight})`);\n\n          // Penalit√† proporzionale\n          let penalty = rule.weight * 0.12;\n          if (rule.level === \"A1\") penalty *= 1.2;\n          if (rule.level === \"B1\") penalty *= 0.8;\n          score -= penalty;\n        });\n      }\n    });\n    const words = text.trim().split(/\\s+/).length;\n    const finalScore = Math.max(score, 0);\n    console.log(`üîó SINTASSI SUPER POTENZIATA (30 patterns):`);\n    console.log(`   ‚îú‚îÄ‚îÄ ${issues} problemi su ${words} parole`);\n    console.log(`   ‚îú‚îÄ‚îÄ Score grezzo: ${score.toFixed(3)}`);\n    console.log(`   ‚îî‚îÄ‚îÄ Score finale: ${(finalScore * 100).toFixed(1)}%`);\n    return finalScore;\n  },\n  // 4. ANALISI LESSICALE (mantenuta)\n  analyzeLexicon: text => {\n    const words = text.toLowerCase().trim().split(/\\s+/).filter(w => w.length > 2);\n    const uniqueWords = new Set(words);\n    const lexicalRichness = uniqueWords.size / Math.max(words.length, 1);\n    const score = Math.max(0, lexicalRichness);\n    console.log(`üìö Lessico: ricchezza ${(lexicalRichness * 100).toFixed(1)}% = ${(score * 100).toFixed(1)}%`);\n    return score;\n  },\n  // 5. ANALISI COERENZA (mantenuta)\n  analyzeCoherence: text => {\n    let score = 0.8;\n    console.log(`üéØ Coerenza: ${(score * 100).toFixed(1)}%`);\n    return score;\n  },\n  // Pesi per livello QCER (aggiustati per maggiore severit√† A1)\n  getWeightsByLevel: level => {\n    const weights = {\n      'A1': {\n        orthography: 0.20,\n        morphology: 0.45,\n        syntax: 0.25,\n        lexicon: 0.08,\n        coherence: 0.02\n      },\n      'A2': {\n        orthography: 0.15,\n        morphology: 0.35,\n        syntax: 0.30,\n        lexicon: 0.15,\n        coherence: 0.05\n      },\n      'B1': {\n        orthography: 0.10,\n        morphology: 0.25,\n        syntax: 0.30,\n        lexicon: 0.25,\n        coherence: 0.10\n      },\n      'B2': {\n        orthography: 0.05,\n        morphology: 0.20,\n        syntax: 0.30,\n        lexicon: 0.30,\n        coherence: 0.15\n      },\n      'C1': {\n        orthography: 0.05,\n        morphology: 0.15,\n        syntax: 0.25,\n        lexicon: 0.30,\n        coherence: 0.25\n      },\n      'C2': {\n        orthography: 0.05,\n        morphology: 0.10,\n        syntax: 0.20,\n        lexicon: 0.30,\n        coherence: 0.35\n      }\n    };\n    return weights[level] || weights['B1'];\n  },\n  // Suggerisce livello (soglie aggiustate)\n  suggestLevel: score => {\n    if (score >= 0.92) return 'C2';\n    if (score >= 0.82) return 'C1';\n    if (score >= 0.68) return 'B2';\n    if (score >= 0.52) return 'B1';\n    if (score >= 0.35) return 'A2'; // Soglia A2 pi√π alta\n    return 'A1';\n  },\n  // Genera feedback personalizzato (potenziato)\n  generateFeedback: (scores, targetLevel) => {\n    const feedback = [];\n    if (scores.orthography < 0.7) {\n      feedback.push(\"‚ö†Ô∏è Concentrati sull'ortografia italiana\");\n    }\n    if (scores.morphology < 0.6) {\n      feedback.push(\"üìù Lavora su concordanze e coniugazioni\");\n    }\n    if (scores.syntax < 0.6) {\n      feedback.push(\"üîó Migliora l'ordine delle parole e le negazioni\");\n    }\n    if (scores.lexicon < 0.5) {\n      feedback.push(\"üìö Arricchisci il vocabolario\");\n    }\n    if (feedback.length === 0) {\n      feedback.push(\"üéâ Ottimo lavoro! Continua cos√¨!\");\n    }\n    return feedback;\n  }\n};\n\n// Simulazione AI Service (mantenuta dal tuo file)\nexport const MockQuestionService = {\n  // Genera banco domande iniziale\n  generateTestBank: async () => {\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    return mockQuestionBank;\n  },\n  // Genera domande per sezione specifica\n  generateSectionQuestions: async (sectionId, userProfile) => {\n    await new Promise(resolve => setTimeout(resolve, 800));\n    const {\n      isNAI,\n      motherLanguage,\n      previousAnswers\n    } = userProfile;\n    switch (sectionId) {\n      case 'reading':\n        return MockQuestionService.selectAdaptiveQuestions(mockQuestionBank.reading, previousAnswers, 3);\n      case 'grammar':\n        return MockQuestionService.selectAdaptiveQuestions(mockQuestionBank.grammar, previousAnswers, 4);\n      case 'writing':\n        return MockQuestionService.selectAdaptiveQuestions(mockQuestionBank.writing, previousAnswers, 2);\n      case 'speaking':\n        return MockQuestionService.selectAdaptiveQuestions(mockQuestionBank.speaking, previousAnswers, 2);\n      default:\n        return [];\n    }\n  },\n  // Selezione adattiva domande\n  selectAdaptiveQuestions: (questionPool, previousAnswers, count) => {\n    const performanceScore = MockQuestionService.calculatePerformance(previousAnswers);\n    let targetLevel;\n    if (performanceScore > 0.8) targetLevel = ['B2', 'C1', 'C2'];else if (performanceScore > 0.6) targetLevel = ['B1', 'B2'];else if (performanceScore > 0.4) targetLevel = ['A2', 'B1'];else targetLevel = ['A1', 'A2'];\n    const filteredQuestions = questionPool.filter(q => !q.level || targetLevel.includes(q.level));\n    const shuffled = filteredQuestions.sort(() => 0.5 - Math.random());\n    return shuffled.slice(0, count);\n  },\n  // Calcola performance dalle risposte precedenti\n  calculatePerformance: answers => {\n    const answerKeys = Object.keys(answers);\n    if (answerKeys.length === 0) return 0.5;\n    let correctCount = 0;\n    let totalCount = 0;\n    answerKeys.forEach(key => {\n      const answer = answers[key];\n      if (typeof answer === 'object' && answer.isCorrect !== undefined) {\n        totalCount++;\n        if (answer.isCorrect) correctCount++;\n      } else if (answer === 'correct') {\n        totalCount++;\n        correctCount++;\n      } else if (['wrong1', 'wrong2', 'wrong3'].includes(answer)) {\n        totalCount++;\n      }\n    });\n    return totalCount > 0 ? correctCount / totalCount : 0.5;\n  },\n  // Valuta risposta scritta con sistema SUPER POTENZIATO\n  evaluateWriting: async (text, level) => {\n    console.log('üîç === ANALISI AVANZATA SCRITTURA SUPER POTENZIATA ===');\n    const result = await AdvancedWritingEvaluator.evaluateWriting(text, level);\n    console.log('üìä Risultato finale scrittura SUPER POTENZIATA:');\n    console.log('  Score:', (result.score * 100).toFixed(1) + '%');\n    console.log('  Livello suggerito:', result.suggestedLevel);\n    console.log('  Feedback:', result.feedback.join(' | '));\n    console.log('===================================================');\n    return {\n      score: result.score,\n      feedback: result.feedback.join(' | '),\n      suggestedLevel: result.suggestedLevel,\n      breakdown: result.breakdown\n    };\n  },\n  // Valuta registrazione audio (mantenuta)\n  evaluateSpeaking: async (audioData, level) => {\n    await new Promise(resolve => setTimeout(resolve, 2000));\n    const duration = audioData.duration || 5000;\n    const hasGoodDuration = duration > 10000 && duration < 120000;\n    let score = 0.6;\n    if (hasGoodDuration) score += 0.3;\n    return {\n      score: Math.min(score, 1.0),\n      feedback: score > 0.8 ? 'Eccellente pronuncia e fluidit√†!' : score > 0.6 ? 'Buona pronuncia, continua cos√¨!' : 'Continua a praticare la pronuncia.'\n    };\n  }\n};\n\n// Algoritmo di scoring QCER migliorato con debug dettagliato\nexport const QCERScoring = {\n  calculateLevel: allAnswers => {\n    console.log('üéØ === CALCOLO LIVELLO QCER DETTAGLIATO ===');\n    const sectionScores = {\n      reading: QCERScoring.evaluateSection(allAnswers, 'reading'),\n      grammar: QCERScoring.evaluateSection(allAnswers, 'grammar'),\n      writing: QCERScoring.evaluateSection(allAnswers, 'writing'),\n      speaking: QCERScoring.evaluateSection(allAnswers, 'speaking')\n    };\n    console.log('üìñ Lettura/Comprensione:', (sectionScores.reading * 100).toFixed(1) + '%');\n    console.log('üìù Grammatica:', (sectionScores.grammar * 100).toFixed(1) + '%');\n    console.log('‚úçÔ∏è Scrittura:', (sectionScores.writing * 100).toFixed(1) + '%');\n    console.log('üó£Ô∏è Parlato:', (sectionScores.speaking * 100).toFixed(1) + '%');\n\n    // Pesi aggiornati\n    const totalScore = sectionScores.reading * 0.20 + sectionScores.grammar * 0.30 + sectionScores.writing * 0.35 + sectionScores.speaking * 0.15;\n    console.log('üéØ Punteggio Totale:', (totalScore * 100).toFixed(1) + '%');\n\n    // Determina livello\n    let assignedLevel = 'A1';\n    if (totalScore >= 0.92) assignedLevel = 'C2';else if (totalScore >= 0.82) assignedLevel = 'C1';else if (totalScore >= 0.68) assignedLevel = 'B2';else if (totalScore >= 0.52) assignedLevel = 'B1';else if (totalScore >= 0.38) assignedLevel = 'A2';else assignedLevel = 'A1';\n\n    // MAPPA LIVELLI A CINTURE (FIX PRINCIPALE)\n    const levelToBelt = {\n      'A1': 'yellow',\n      'A2': 'orange',\n      'B1': 'green',\n      'B2': 'blue',\n      'C1': 'brown',\n      'C2': 'black'\n    };\n    console.log('ü•ã Livello Assegnato:', assignedLevel);\n    console.log('üèÖ Cintura:', levelToBelt[assignedLevel]);\n    console.log('===========================================');\n\n    // RETURN CON TUTTE LE PROPRIET√Ä NECESSARIE\n    return {\n      level: assignedLevel,\n      score: totalScore,\n      belt: levelToBelt[assignedLevel],\n      // ‚Üê FIX: Assicura che belt sia sempre presente\n      breakdown: sectionScores,\n      percentage: Math.round(totalScore * 100)\n    };\n  },\n  evaluateSection: (answers, sectionPrefix) => {\n    const sectionAnswers = Object.keys(answers).filter(key => key.includes(sectionPrefix)).map(key => answers[key]);\n    if (sectionAnswers.length === 0) return 0.5;\n    let totalScore = 0;\n    let count = 0;\n    sectionAnswers.forEach(answer => {\n      count++;\n      if (typeof answer === 'object' && answer.score !== undefined) {\n        totalScore += answer.score;\n      } else if (answer === 'correct') {\n        totalScore += 1.0;\n      } else if (['wrong1', 'wrong2', 'wrong3'].includes(answer)) {\n        totalScore += 0.0;\n      } else {\n        totalScore += 0.5;\n      }\n    });\n    return count > 0 ? totalScore / count : 0.5;\n  }\n};","map":{"version":3,"names":["mockQuestionBank","demographic","id","type","question","options","value","text","reading","level","subQuestions","isCorrect","grammar","writing","prompt","placeholder","minWords","minRows","speaking","maxDuration","AdvancedWritingEvaluator","evaluateWriting","targetLevel","console","log","substring","scores","orthography","analyzeOrthography","morphology","analyzeMorphologyEnhanced","syntax","analyzeSyntaxEnhanced","lexicon","analyzeLexicon","coherence","analyzeCoherence","weights","getWeightsByLevel","finalScore","Object","keys","reduce","total","aspect","forEach","toFixed","score","Math","min","max","breakdown","feedback","generateFeedback","suggestedLevel","suggestLevel","words","trim","split","errors","orthographicErrors","word","errorPattern","test","errorRate","length","morphologicalPatterns","pattern","error","weight","rule","index","matches","match","penalty","issues","syntaxPatterns","toLowerCase","filter","w","uniqueWords","Set","lexicalRichness","size","push","MockQuestionService","generateTestBank","Promise","resolve","setTimeout","generateSectionQuestions","sectionId","userProfile","isNAI","motherLanguage","previousAnswers","selectAdaptiveQuestions","questionPool","count","performanceScore","calculatePerformance","filteredQuestions","q","includes","shuffled","sort","random","slice","answers","answerKeys","correctCount","totalCount","key","answer","undefined","result","join","evaluateSpeaking","audioData","duration","hasGoodDuration","QCERScoring","calculateLevel","allAnswers","sectionScores","evaluateSection","totalScore","assignedLevel","levelToBelt","belt","percentage","round","sectionPrefix","sectionAnswers","map"],"sources":["C:/Users/Utente/lingua-kai-platform - restructured/src/components/components/TestIngresso/MockQuestionService.js"],"sourcesContent":["// Mock Question Service per Test QCER\r\n// Questo simula il database e l'AI Service\r\n\r\nconst mockQuestionBank = {\r\n  demographic: [\r\n    {\r\n      id: 'years_italy',\r\n      type: 'multiple_choice',\r\n      question: 'Da quanti anni sei in Italia?',\r\n      options: [\r\n        { value: 'less1', text: 'Meno di 1 anno' },\r\n        { value: '1to2', text: '1-2 anni' },\r\n        { value: 'more2', text: 'Pi√π di 2 anni' },\r\n        { value: 'born', text: 'Sono nato/a in Italia' }\r\n      ]\r\n    }\r\n  ],\r\n\r\n  reading: [\r\n    // Livello A1-A2\r\n    {\r\n      id: 'reading_1',\r\n      type: 'reading_comprehension',\r\n      level: 'A1',\r\n      text: `Maria √® una studentessa italiana. Ha 20 anni e studia medicina all'universit√† di Roma. \r\n             Ogni mattina si alza alle 7:00 e fa colazione con caff√® e cornetti. \r\n             Poi va all'universit√† in autobus. Le piacciono molto gli studi e vuole diventare medico.`,\r\n      subQuestions: [\r\n        {\r\n          id: 'reading_1_q1',\r\n          question: 'Che cosa studia Maria?',\r\n          options: [\r\n            { value: 'correct', text: 'Medicina', isCorrect: true },\r\n            { value: 'wrong1', text: 'Letteratura', isCorrect: false },\r\n            { value: 'wrong2', text: 'Storia', isCorrect: false },\r\n            { value: 'wrong3', text: 'Matematica', isCorrect: false }\r\n          ]\r\n        },\r\n        {\r\n          id: 'reading_1_q2',\r\n          question: 'A che ora si alza Maria?',\r\n          options: [\r\n            { value: 'correct', text: 'Alle 7:00', isCorrect: true },\r\n            { value: 'wrong1', text: 'Alle 8:00', isCorrect: false },\r\n            { value: 'wrong2', text: 'Alle 6:00', isCorrect: false },\r\n            { value: 'wrong3', text: 'Alle 9:00', isCorrect: false }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n\r\n    // Livello B1-B2\r\n    {\r\n      id: 'reading_2',\r\n      type: 'reading_comprehension',\r\n      level: 'B1',\r\n      text: `L'immigrazione in Italia ha trasformato significativamente il panorama sociale del paese \r\n             negli ultimi decenni. Molte persone provenienti da diverse parti del mondo hanno scelto \r\n             l'Italia come nuova casa, portando con s√© tradizioni culturali, linguistiche e culinarie \r\n             che hanno arricchito la societ√† italiana. Tuttavia, questo processo non √® stato privo di \r\n             sfide: l'integrazione richiede tempo, comprensione reciproca e politiche adeguate che \r\n             favoriscano l'inclusione sociale ed economica.`,\r\n      subQuestions: [\r\n        {\r\n          id: 'reading_2_q1',\r\n          question: 'Secondo il testo, l\\'immigrazione in Italia ha:',\r\n          options: [\r\n            { value: 'correct', text: 'Trasformato il panorama sociale', isCorrect: true },\r\n            { value: 'wrong1', text: 'Causato solo problemi', isCorrect: false },\r\n            { value: 'wrong2', text: 'Ridotto la diversit√† culturale', isCorrect: false },\r\n            { value: 'wrong3', text: 'Interessato solo le grandi citt√†', isCorrect: false }\r\n          ]\r\n        },\r\n        {\r\n          id: 'reading_2_q2',\r\n          question: 'L\\'integrazione richiede:',\r\n          options: [\r\n            { value: 'correct', text: 'Tempo e comprensione reciproca', isCorrect: true },\r\n            { value: 'wrong1', text: 'Solo politiche governative', isCorrect: false },\r\n            { value: 'wrong2', text: 'L\\'abbandono delle tradizioni d\\'origine', isCorrect: false },\r\n            { value: 'wrong3', text: 'Cambiamenti solo da parte degli immigrati', isCorrect: false }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n\r\n    // Livello C1-C2\r\n    {\r\n      id: 'reading_3',\r\n      type: 'reading_comprehension',\r\n      level: 'C1',\r\n      text: `La questione del multilinguismo nelle societ√† contemporanee solleva interrogativi complessi \r\n             che vanno ben oltre la mera pratica comunicativa. Nel contesto globalizzato odierno, \r\n             la capacit√† di padroneggiare pi√π lingue non rappresenta soltanto un vantaggio competitivo \r\n             nel mercato del lavoro, ma costituisce un elemento fondamentale per la costruzione \r\n             dell'identit√† individuale e collettiva. La ricerca neurolinguistica ha dimostrato che \r\n             il cervello multilingue sviluppa capacit√† cognitive superiori, inclusa una maggiore \r\n             flessibilit√† mentale e una migliore capacit√† di problem-solving. Tuttavia, permane \r\n             il dibattito sui potenziali rischi di erosione delle lingue minoritarie in favore \r\n             di quelle dominanti a livello internazionale.`,\r\n      subQuestions: [\r\n        {\r\n          id: 'reading_3_q1',\r\n          question: 'Secondo il testo, il multilinguismo:',\r\n          options: [\r\n            { value: 'correct', text: 'Contribuisce alla costruzione dell\\'identit√†', isCorrect: true },\r\n            { value: 'wrong1', text: '√à utile solo per il lavoro', isCorrect: false },\r\n            { value: 'wrong2', text: 'Causa confusione cognitiva', isCorrect: false },\r\n            { value: 'wrong3', text: 'Non ha effetti sul cervello', isCorrect: false }\r\n          ]\r\n        },\r\n        {\r\n          id: 'reading_3_q2',\r\n          question: 'Il dibattito sulle lingue minoritarie riguarda:',\r\n          options: [\r\n            { value: 'correct', text: 'Il rischio di erosione a favore di lingue dominanti', isCorrect: true },\r\n            { value: 'wrong1', text: 'La loro maggiore difficolt√† di apprendimento', isCorrect: false },\r\n            { value: 'wrong2', text: 'L\\'impossibilit√† di insegnarle', isCorrect: false },\r\n            { value: 'wrong3', text: 'La loro inutilit√† nel mondo moderno', isCorrect: false }\r\n          ]\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n\r\n  grammar: [\r\n    // Livello A1\r\n    {\r\n      id: 'grammar_1',\r\n      type: 'grammar',\r\n      level: 'A1',\r\n      question: 'Completa la frase: \"Io _____ italiano.\"',\r\n      options: [\r\n        { value: 'correct', text: 'sono', isCorrect: true },\r\n        { value: 'wrong1', text: 'sei', isCorrect: false },\r\n        { value: 'wrong2', text: '√®', isCorrect: false },\r\n        { value: 'wrong3', text: 'siamo', isCorrect: false }\r\n      ]\r\n    },\r\n    {\r\n      id: 'grammar_2',\r\n      type: 'grammar',\r\n      level: 'A1',\r\n      question: 'Scegli l\\'articolo corretto: \"_____ casa √® bella.\"',\r\n      options: [\r\n        { value: 'correct', text: 'La', isCorrect: true },\r\n        { value: 'wrong1', text: 'Il', isCorrect: false },\r\n        { value: 'wrong2', text: 'Lo', isCorrect: false },\r\n        { value: 'wrong3', text: 'Le', isCorrect: false }\r\n      ]\r\n    },\r\n\r\n    // Livello A2\r\n    {\r\n      id: 'grammar_3',\r\n      type: 'grammar',\r\n      level: 'A2',\r\n      question: 'Ieri io _____ al cinema.',\r\n      options: [\r\n        { value: 'correct', text: 'sono andato/a', isCorrect: true },\r\n        { value: 'wrong1', text: 'vado', isCorrect: false },\r\n        { value: 'wrong2', text: 'andr√≤', isCorrect: false },\r\n        { value: 'wrong3', text: 'andare', isCorrect: false }\r\n      ]\r\n    },\r\n    {\r\n      id: 'grammar_4',\r\n      type: 'grammar',\r\n      level: 'A2',\r\n      question: 'Se _____ bel tempo, andiamo al mare.',\r\n      options: [\r\n        { value: 'correct', text: 'fa', isCorrect: true },\r\n        { value: 'wrong1', text: 'far√†', isCorrect: false },\r\n        { value: 'wrong2', text: 'faceva', isCorrect: false },\r\n        { value: 'wrong3', text: 'fare', isCorrect: false }\r\n      ]\r\n    },\r\n\r\n    // Livello B1\r\n    {\r\n      id: 'grammar_5',\r\n      type: 'grammar',\r\n      level: 'B1',\r\n      question: 'Bench√© _____ stanco, continuer√≤ a lavorare.',\r\n      options: [\r\n        { value: 'correct', text: 'sia', isCorrect: true },\r\n        { value: 'wrong1', text: 'sono', isCorrect: false },\r\n        { value: 'wrong2', text: 'ero', isCorrect: false },\r\n        { value: 'wrong3', text: 'sar√≤', isCorrect: false }\r\n      ]\r\n    },\r\n    {\r\n      id: 'grammar_6',\r\n      type: 'grammar',\r\n      level: 'B1',\r\n      question: 'Il libro _____ ho letto √® molto interessante.',\r\n      options: [\r\n        { value: 'correct', text: 'che', isCorrect: true },\r\n        { value: 'wrong1', text: 'cui', isCorrect: false },\r\n        { value: 'wrong2', text: 'quale', isCorrect: false },\r\n        { value: 'wrong3', text: 'dove', isCorrect: false }\r\n      ]\r\n    },\r\n\r\n    // Livello B2\r\n    {\r\n      id: 'grammar_7',\r\n      type: 'grammar',\r\n      level: 'B2',\r\n      question: 'Non appena _____ a casa, ti telefoner√≤.',\r\n      options: [\r\n        { value: 'correct', text: 'sar√≤ arrivato', isCorrect: true },\r\n        { value: 'wrong1', text: 'arrivo', isCorrect: false },\r\n        { value: 'wrong2', text: 'arrivavo', isCorrect: false },\r\n        { value: 'wrong3', text: 'sono arrivato', isCorrect: false }\r\n      ]\r\n    },\r\n\r\n    // Livello C1\r\n    {\r\n      id: 'grammar_8',\r\n      type: 'grammar',\r\n      level: 'C1',\r\n      question: 'Qualora _____ problemi, non esitate a contattarmi.',\r\n      options: [\r\n        { value: 'correct', text: 'doveste avere', isCorrect: true },\r\n        { value: 'wrong1', text: 'avete', isCorrect: false },\r\n        { value: 'wrong2', text: 'avrete', isCorrect: false },\r\n        { value: 'wrong3', text: 'avreste', isCorrect: false }\r\n      ]\r\n    }\r\n  ],\r\n\r\n  writing: [\r\n    {\r\n      id: 'writing_1',\r\n      type: 'writing',\r\n      level: 'A1',\r\n      prompt: 'Presentati brevemente: scrivi il tuo nome, et√†, da dove vieni e cosa ti piace fare.',\r\n      placeholder: 'Ciao, io sono...',\r\n      minWords: 30,\r\n      minRows: 3\r\n    },\r\n    {\r\n      id: 'writing_2',\r\n      type: 'writing',\r\n      level: 'B1',\r\n      prompt: 'Descrivi una giornata tipica nella tua vita, dalle 7:00 del mattino alle 22:00 di sera.',\r\n      placeholder: 'La mia giornata inizia quando...',\r\n      minWords: 80,\r\n      minRows: 5\r\n    },\r\n    {\r\n      id: 'writing_3',\r\n      type: 'writing',\r\n      level: 'C1',\r\n      prompt: 'Esprimi la tua opinione sull\\'importanza dell\\'apprendimento delle lingue straniere nella societ√† moderna, presentando argomenti a favore e possibili obiezioni.',\r\n      placeholder: 'L\\'apprendimento delle lingue straniere...',\r\n      minWords: 150,\r\n      minRows: 8\r\n    }\r\n  ],\r\n\r\n  speaking: [\r\n    {\r\n      id: 'speaking_1',\r\n      type: 'speaking',\r\n      level: 'A1',\r\n      prompt: 'Presentati: di\\' il tuo nome, la tua et√† e di dove sei.',\r\n      maxDuration: 30\r\n    },\r\n    {\r\n      id: 'speaking_2',\r\n      type: 'speaking',\r\n      level: 'B1',\r\n      prompt: 'Descrivi la tua citt√† natale: com\\'√®, che cosa ti piace di pi√π e cosa vorresti cambiare.',\r\n      maxDuration: 60\r\n    },\r\n    {\r\n      id: 'speaking_3',\r\n      type: 'speaking',\r\n      level: 'C1',\r\n      prompt: 'Spiega quale pensi sia il ruolo delle nuove tecnologie nell\\'educazione e come potrebbero cambiare l\\'apprendimento in futuro.',\r\n      maxDuration: 90\r\n    }\r\n  ]\r\n};\r\n\r\n// Sistema Avanzato di Valutazione Scrittura SUPER POTENZIATO\r\nconst AdvancedWritingEvaluator = {\r\n  \r\n  // Valutazione completa del testo\r\n  evaluateWriting: async (text, targetLevel = 'B1') => {\r\n    console.log('üîç === ANALISI AVANZATA SCRITTURA SUPER POTENZIATA ===');\r\n    console.log('üìù Testo:', text.substring(0, 100) + '...');\r\n    \r\n    const scores = {\r\n      orthography: AdvancedWritingEvaluator.analyzeOrthography(text),\r\n      morphology: AdvancedWritingEvaluator.analyzeMorphologyEnhanced(text),\r\n      syntax: AdvancedWritingEvaluator.analyzeSyntaxEnhanced(text),\r\n      lexicon: AdvancedWritingEvaluator.analyzeLexicon(text),\r\n      coherence: AdvancedWritingEvaluator.analyzeCoherence(text)\r\n    };\r\n\r\n    // Pesi per livello QCER\r\n    const weights = AdvancedWritingEvaluator.getWeightsByLevel(targetLevel);\r\n    \r\n    // Calcolo score finale\r\n    const finalScore = Object.keys(scores).reduce((total, aspect) => {\r\n      return total + (scores[aspect] * weights[aspect]);\r\n    }, 0);\r\n\r\n    console.log('üìä Breakdown valutazione scrittura SUPER POTENZIATA:');\r\n    Object.keys(scores).forEach(aspect => {\r\n      console.log(`  ${aspect}: ${(scores[aspect] * 100).toFixed(1)}%`);\r\n    });\r\n    console.log(`üéØ Score finale: ${(finalScore * 100).toFixed(1)}%`);\r\n    console.log('================================================');\r\n\r\n    return {\r\n      score: Math.min(Math.max(finalScore, 0), 1),\r\n      breakdown: scores,\r\n      feedback: AdvancedWritingEvaluator.generateFeedback(scores, targetLevel),\r\n      suggestedLevel: AdvancedWritingEvaluator.suggestLevel(finalScore)\r\n    };\r\n  },\r\n\r\n  // 1. ANALISI ORTOGRAFICA (potenziata)\r\n  analyzeOrthography: (text) => {\r\n    const words = text.trim().split(/\\s+/);\r\n    let errors = 0;\r\n\r\n    // Pattern ortografici comuni\r\n    const orthographicErrors = [\r\n      /\\bperche\\b/gi, /\\bpuo\\b/gi, /\\bcioe\\b/gi, /\\bpiu\\b/gi, /\\bgia\\b/gi, \r\n      /\\bper√∂\\b/gi, /\\w*[kxwyjq]\\w*/gi, /\\bxke\\b/gi, /\\bnn\\b/gi,\r\n      /\\bperk√®\\b/gi, /\\bperke\\b/gi, /\\bx\\b/gi\r\n    ];\r\n\r\n    words.forEach(word => {\r\n      orthographicErrors.forEach(errorPattern => {\r\n        if (errorPattern.test(word)) {\r\n          errors++;\r\n          console.log(`üî¥ Errore ortografico: \"${word}\"`);\r\n        }\r\n      });\r\n    });\r\n\r\n    const errorRate = errors / Math.max(words.length, 1);\r\n    const score = Math.max(0, 1 - (errorRate * 3));\r\n    console.log(`üìù Ortografia: ${errors} errori su ${words.length} parole = ${(score * 100).toFixed(1)}%`);\r\n    \r\n    return score;\r\n  },\r\n\r\n  // 2. ANALISI MORFOLOGICA SUPER POTENZIATA\r\n  analyzeMorphologyEnhanced: (text) => {\r\n    let score = 1.0;\r\n    let errors = 0;\r\n\r\n    console.log('üîç === ANALISI MORFOLOGICA SUPER POTENZIATA ===');\r\n\r\n    // DATABASE PATTERN GRAMMATICALI COMPLETO (78 REGOLE)\r\n    const morphologicalPatterns = [\r\n      \r\n      // === CATEGORIA 1: ARTICOLI DETERMINATIVI ===\r\n      { pattern: /\\bil\\s+(?:casa|scuola|famiglia|vita|universit√†|amica|idea|auto|aula|ora|et√†|isola|azienda)/gi, error: \"articolo_maschile_nome_femminile\", weight: 0.8, level: \"A1\" },\r\n      { pattern: /\\bla\\s+(?:uomo|bambino|lavoro|computer|telefono|quaderno|libro|cane|gatto|albero|sole|mare)/gi, error: \"articolo_femminile_nome_maschile\", weight: 0.8, level: \"A1\" },\r\n      { pattern: /\\blo\\s+(?:casa|scuola|famiglia|penna|pizza|strada|montagna)/gi, error: \"articolo_lo_nome_femminile\", weight: 0.8, level: \"A1\" },\r\n      { pattern: /\\ble\\s+(?:uomo|uomini|bambino|bambini|libro|libri)/gi, error: \"articolo_le_nome_maschile\", weight: 0.8, level: \"A1\" },\r\n      { pattern: /\\bgli\\s+(?:casa|scuola|famiglia|donna|donne|ragazze)/gi, error: \"articolo_gli_nome_femminile\", weight: 0.8, level: \"A1\" },\r\n\r\n      // === CATEGORIA 2: ARTICOLI INDETERMINATIVI ===\r\n      { pattern: /\\bun\\s+(?:amica|universit√†|idea|auto|aula|ora|et√†|isola|azienda|azione)/gi, error: \"articolo_indeterminativo_femminile\", weight: 0.8, level: \"A1\" },\r\n      { pattern: /\\buna\\s+(?:uomo|bambino|lavoro|computer|telefono|quaderno|libro|cane|gatto)/gi, error: \"articolo_indeterminativo_maschile\", weight: 0.8, level: \"A1\" },\r\n      { pattern: /\\buno\\s+(?:casa|scuola|famiglia|penna|pizza|strada|donna|ragazza)/gi, error: \"articolo_indeterminativo_uno_femminile\", weight: 0.8, level: \"A1\" },\r\n      { pattern: /\\bun'\\s+(?:uomo|bambino|amico|studente|italiano|inglese)/gi, error: \"apostrofo_indeterminativo_maschile\", weight: 0.8, level: \"A1\" },\r\n\r\n      // === CATEGORIA 3: POSSESSIVI - CONCORDANZA GENERE ===\r\n      { pattern: /\\bmio\\s+(?:sorella|famiglia|amica|scuola|casa|vita|universit√†|madre|nonna|zia|cugina)/gi, error: \"possessivo_maschile_nome_femminile\", weight: 0.9, level: \"A1\" },\r\n      { pattern: /\\bmia\\s+(?:fratello|amico|lavoro|libro|quaderno|computer|padre|nonno|zio|cugino)/gi, error: \"possessivo_femminile_nome_maschile\", weight: 0.9, level: \"A1\" },\r\n      { pattern: /\\btuo\\s+(?:sorella|famiglia|amica|scuola|casa|madre|fidanzata|moglie)/gi, error: \"possessivo_maschile_nome_femminile\", weight: 0.9, level: \"A1\" },\r\n      { pattern: /\\btua\\s+(?:fratello|amico|lavoro|libro|padre|fidanzato|marito)/gi, error: \"possessivo_femminile_nome_maschile\", weight: 0.9, level: \"A1\" },\r\n      { pattern: /\\bsuo\\s+(?:sorella|famiglia|amica|madre|moglie|figlia|nipote)/gi, error: \"possessivo_maschile_nome_femminile\", weight: 0.9, level: \"A1\" },\r\n      { pattern: /\\bsua\\s+(?:fratello|padre|marito|figlio|nipote)/gi, error: \"possessivo_femminile_nome_maschile\", weight: 0.9, level: \"A1\" },\r\n\r\n      // === CATEGORIA 4: POSSESSIVI - CONCORDANZA NUMERO ===\r\n      { pattern: /\\bmiei\\s+(?:sorella|famiglia|amica|madre)/gi, error: \"possessivo_plurale_nome_singolare\", weight: 0.8, level: \"A2\" },\r\n      { pattern: /\\bmie\\s+(?:fratello|amico|padre)/gi, error: \"possessivo_plurale_nome_singolare\", weight: 0.8, level: \"A2\" },\r\n      { pattern: /\\bmio\\s+(?:amici|fratelli|libri|quaderni)/gi, error: \"possessivo_singolare_nome_plurale\", weight: 0.8, level: \"A2\" },\r\n      { pattern: /\\bmia\\s+(?:amiche|sorelle|case|scuole)/gi, error: \"possessivo_singolare_nome_plurale\", weight: 0.8, level: \"A2\" },\r\n\r\n      // === CATEGORIA 5: VERBI - CONIUGAZIONE ESSERE ===\r\n      { pattern: /\\bio\\s+(?:sei|√®|siamo|siete)\\b/gi, error: \"coniugazione_essere_io\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\btu\\s+(?:sono|√®|siamo|siete)\\b/gi, error: \"coniugazione_essere_tu\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\blui\\s+(?:sono|sei|siamo|siete)\\b/gi, error: \"coniugazione_essere_lui\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\blei\\s+(?:sono|sei|siamo|siete)\\b/gi, error: \"coniugazione_essere_lei\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\bnoi\\s+(?:sono|sei|√®|siete)\\b/gi, error: \"coniugazione_essere_noi\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\bvoi\\s+(?:sono|sei|√®|siamo)\\b/gi, error: \"coniugazione_essere_voi\", weight: 0.7, level: \"A1\" },\r\n\r\n      // === CATEGORIA 6: VERBI - CONIUGAZIONE AVERE ===\r\n      { pattern: /\\bio\\s+(?:hai|ha|abbiamo|avete|hanno)\\b/gi, error: \"coniugazione_avere_io\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\btu\\s+(?:ho|ha|abbiamo|avete|hanno)\\b/gi, error: \"coniugazione_avere_tu\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\blui\\s+(?:ho|hai|abbiamo|avete|hanno)\\b/gi, error: \"coniugazione_avere_lui\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\bnoi\\s+(?:ho|hai|ha|avete|hanno)\\b/gi, error: \"coniugazione_avere_noi\", weight: 0.7, level: \"A1\" },\r\n\r\n      // === CATEGORIA 7: AUSILIARI PARTICIPIO PASSATO ===\r\n      { pattern: /\\bho\\s+(?:andato|venuto|partito|arrivato|uscito|entrato|tornato|salito|sceso)/gi, error: \"ausiliare_movimento_sbagliato\", weight: 0.8, level: \"A1\" },\r\n      { pattern: /\\bho\\s+(?:andata|venuta|partita|arrivata|uscita|entrata|tornata|salita|scesa)/gi, error: \"ausiliare_movimento_sbagliato\", weight: 0.8, level: \"A1\" },\r\n      { pattern: /\\bsono\\s+(?:mangiato|bevuto|studiato|lavorato|dormito|comprato|venduto|pagato)/gi, error: \"ausiliare_attivit√†_sbagliato\", weight: 0.8, level: \"A1\" },\r\n      { pattern: /\\bhai\\s+(?:andato|venuto|partito|arrivato|nato|morto)/gi, error: \"ausiliare_movimento_sbagliato\", weight: 0.8, level: \"A1\" },\r\n      { pattern: /\\bha\\s+(?:andato|venuto|partito|arrivato|nato|morto)/gi, error: \"ausiliare_movimento_sbagliato\", weight: 0.8, level: \"A1\" },\r\n\r\n      // === CATEGORIA 8: PARTICIPIO PASSATO - CONCORDANZA ===\r\n      { pattern: /\\bsono\\s+andato\\s+(?:a\\s+)?casa/gi, error: \"participio_concordanza_femminile\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\b√®\\s+andata\\s+al\\s+lavoro/gi, error: \"participio_concordanza_maschile\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\bho\\s+visto\\s+(?:Maria|Lucia|Anna)/gi, error: \"participio_concordanza_oggetto\", weight: 0.5, level: \"B1\" },\r\n\r\n      // === CATEGORIA 9: PREPOSIZIONI + INFINITO ===\r\n      { pattern: /\\bper\\s+(?:studia|lavora|mangia|dormi|gioca|cammina|corri|nuota)/gi, error: \"preposizione_infinito_scorretto\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\bdi\\s+(?:studia|lavora|mangia|dormi|gioca|cammina|corri|nuota)/gi, error: \"preposizione_infinito_scorretto\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\ba\\s+(?:studia|lavora|mangia|dormi|gioca|cammina|corri|nuota)/gi, error: \"preposizione_infinito_scorretto\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\bda\\s+(?:studia|lavora|mangia|dormi|gioca|cammina|corri|nuota)/gi, error: \"preposizione_infinito_scorretto\", weight: 0.7, level: \"A1\" },\r\n\r\n      // === CATEGORIA 10: PREPOSIZIONI ARTICOLATE ===\r\n      { pattern: /\\bdi\\s+il\\b/gi, error: \"preposizione_articolata_del\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\bdi\\s+la\\b/gi, error: \"preposizione_articolata_della\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\ba\\s+il\\b/gi, error: \"preposizione_articolata_al\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\ba\\s+la\\b/gi, error: \"preposizione_articolata_alla\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\bin\\s+il\\b/gi, error: \"preposizione_articolata_nel\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\bin\\s+la\\b/gi, error: \"preposizione_articolata_nella\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\bda\\s+il\\b/gi, error: \"preposizione_articolata_dal\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\bda\\s+la\\b/gi, error: \"preposizione_articolata_dalla\", weight: 0.6, level: \"A2\" },\r\n\r\n      // === CATEGORIA 11: ACCORDI AGGETTIVI - GENERE ===\r\n      { pattern: /\\b(?:il|un)\\s+\\w*o\\s+(?:bella|piccola|grande|buona|italiana|americana|francese)/gi, error: \"accordo_aggettivo_genere\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\b(?:la|una)\\s+\\w*a\\s+(?:bello|piccolo|grande|buono|italiano|americano|francese)/gi, error: \"accordo_aggettivo_genere\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\buomo\\s+(?:bella|piccola|italiana)/gi, error: \"accordo_aggettivo_genere\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\bdonna\\s+(?:bello|piccolo|italiano)/gi, error: \"accordo_aggettivo_genere\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\bambino\\s+(?:bella|piccola|italiana)/gi, error: \"accordo_aggettivo_genere\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\bbambina\\s+(?:bello|piccolo|italiano)/gi, error: \"accordo_aggettivo_genere\", weight: 0.7, level: \"A1\" },\r\n\r\n      // === CATEGORIA 12: ACCORDI AGGETTIVI - NUMERO ===\r\n      { pattern: /\\buomo\\s+(?:belli|piccoli|italiani)/gi, error: \"accordo_aggettivo_numero\", weight: 0.7, level: \"A2\" },\r\n      { pattern: /\\buomini\\s+(?:bello|piccolo|italiano)/gi, error: \"accordo_aggettivo_numero\", weight: 0.7, level: \"A2\" },\r\n      { pattern: /\\bdonna\\s+(?:belle|piccole|italiane)/gi, error: \"accordo_aggettivo_numero\", weight: 0.7, level: \"A2\" },\r\n      { pattern: /\\bdonne\\s+(?:bella|piccola|italiana)/gi, error: \"accordo_aggettivo_numero\", weight: 0.7, level: \"A2\" },\r\n\r\n      // === CATEGORIA 13: PRONOMI DIMOSTRATIVI ===\r\n      { pattern: /\\bquesto\\s+(?:\\w*a)\\b/gi, error: \"dimostrativo_genere_scorretto\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\bquesta\\s+(?:\\w*o)\\b/gi, error: \"dimostrativo_genere_scorretto\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\bquelli\\s+(?:\\w*a)\\b/gi, error: \"dimostrativo_genere_scorretto\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\bquelle\\s+(?:\\w*o)\\b/gi, error: \"dimostrativo_genere_scorretto\", weight: 0.6, level: \"A2\" },\r\n\r\n      // === CATEGORIA 14: PERSONA VERBALE ===\r\n      { pattern: /\\bcapisce\\s+poco/gi, error: \"persona_verbale_sbagliata\", weight: 0.6, level: \"A1\" },\r\n      { pattern: /\\bparla\\s+poco/gi, error: \"persona_verbale_sbagliata\", weight: 0.6, level: \"A1\" },\r\n      { pattern: /\\bstudio\\s+molto/gi, error: \"persona_verbale_corretta\", weight: -0.1, level: \"A1\" },\r\n      { pattern: /\\blavoro\\s+molto/gi, error: \"persona_verbale_corretta\", weight: -0.1, level: \"A1\" },\r\n\r\n      // === CATEGORIA 15: TEMPI VERBALI - PRESENTE ===\r\n      { pattern: /\\bio\\s+(?:mangi|lavori|studi|dormi|parti)/gi, error: \"presente_persona_sbagliata\", weight: 0.6, level: \"A1\" },\r\n      { pattern: /\\btu\\s+(?:mangio|lavoro|studio|dormo|parto)/gi, error: \"presente_persona_sbagliata\", weight: 0.6, level: \"A1\" },\r\n      { pattern: /\\blui\\s+(?:mangi|lavori|studi|dormi|parti)/gi, error: \"presente_persona_sbagliata\", weight: 0.6, level: \"A1\" },\r\n\r\n      // === CATEGORIA 16: FUTURO SEMPLICE ===\r\n      { pattern: /\\biofar√≤/gi, error: \"futuro_forma_scorretta\", weight: 0.5, level: \"A2\" },\r\n      { pattern: /\\btufarai/gi, error: \"futuro_forma_scorretta\", weight: 0.5, level: \"A2\" },\r\n      { pattern: /\\bio\\s+farai/gi, error: \"futuro_persona_sbagliata\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\btu\\s+far√≤/gi, error: \"futuro_persona_sbagliata\", weight: 0.6, level: \"A2\" },\r\n\r\n      // === CATEGORIA 17: CONGIUNTIVO (B1+) ===\r\n      { pattern: /\\bse\\s+(?:sono|sei|√®|siamo|siete)\\b/gi, error: \"congiuntivo_mancante\", weight: 0.4, level: \"B1\" },\r\n      { pattern: /\\bpenso\\s+che\\s+(?:sono|sei|√®|siamo|siete)\\b/gi, error: \"congiuntivo_dopo_che\", weight: 0.5, level: \"B1\" },\r\n      { pattern: /\\bspero\\s+che\\s+(?:vado|vai|va|andiamo|andate|vanno)\\b/gi, error: \"congiuntivo_dopo_che\", weight: 0.5, level: \"B1\" },\r\n\r\n      // === CATEGORIA 18: CONCORDANZA SOGGETTO-VERBO ===\r\n      { pattern: /\\bgli\\s+studenti\\s+(?:studia|lavora|va)/gi, error: \"concordanza_soggetto_plurale\", weight: 0.7, level: \"A2\" },\r\n      { pattern: /\\ble\\s+ragazze\\s+(?:studia|lavora|va)/gi, error: \"concordanza_soggetto_plurale\", weight: 0.7, level: \"A2\" },\r\n      { pattern: /\\blo\\s+studente\\s+(?:studiano|lavorano|vanno)/gi, error: \"concordanza_soggetto_singolare\", weight: 0.7, level: \"A2\" },\r\n\r\n      // === CATEGORIA 19: FORME DI CORTESIA ===\r\n      { pattern: /\\blei\\s+(?:sei|hai)/gi, error: \"forma_cortesia_sbagliata\", weight: 0.4, level: \"A2\" },\r\n      { pattern: /\\btu\\s+√®\\b/gi, error: \"forma_cortesia_confusa\", weight: 0.5, level: \"A2\" }\r\n    ];\r\n\r\n    // Scansiona tutti i pattern con logging dettagliato\r\n    morphologicalPatterns.forEach((rule, index) => {\r\n      const matches = text.match(rule.pattern);\r\n      if (matches) {\r\n        matches.forEach(match => {\r\n          errors++;\r\n          console.log(`üî¥ [${index + 1}/78] Errore ${rule.level} [${rule.error}]: \"${match}\" (peso: ${rule.weight})`);\r\n          \r\n          // Penalit√† proporzionale al peso e livello\r\n          let penalty = rule.weight * 0.15;\r\n          if (rule.level === \"A1\") penalty *= 1.2; // Errori A1 pi√π gravi\r\n          if (rule.level === \"B1\") penalty *= 0.8; // Errori B1 meno gravi\r\n          \r\n          score -= penalty;\r\n        });\r\n      }\r\n    });\r\n\r\n    const words = text.trim().split(/\\s+/).length;\r\n    const finalScore = Math.max(score, 0);\r\n    \r\n    console.log(`üìù MORFOLOGIA SUPER POTENZIATA (78 patterns):`);\r\n    console.log(`   ‚îú‚îÄ‚îÄ ${errors} errori su ${words} parole`);\r\n    console.log(`   ‚îú‚îÄ‚îÄ Score grezzo: ${score.toFixed(3)}`);\r\n    console.log(`   ‚îî‚îÄ‚îÄ Score finale: ${(finalScore * 100).toFixed(1)}%`);\r\n    \r\n    return finalScore;\r\n  },\r\n\r\n  // 3. ANALISI SINTATTICA SUPER POTENZIATA\r\n  analyzeSyntaxEnhanced: (text) => {\r\n    let score = 1.0;\r\n    let issues = 0;\r\n\r\n    console.log('üîó === ANALISI SINTATTICA SUPER POTENZIATA ===');\r\n\r\n    // PATTERN SINTATTICI AVANZATI (30 REGOLE)\r\n    const syntaxPatterns = [\r\n      \r\n      // === NEGAZIONE SCORRETTA ===\r\n      { pattern: /\\bio\\s+no\\s+(?:parlare|sapere|capire|mangiare|dormire|studiare|lavorare)\\b/gi, error: \"negazione_infinito_scorretto\", weight: 0.8, level: \"A1\" },\r\n      { pattern: /\\bno\\s+ho\\b/gi, error: \"negazione_ausiliare_scorretto\", weight: 0.8, level: \"A1\" },\r\n      { pattern: /\\bno\\s+sono\\b/gi, error: \"negazione_essere_scorretto\", weight: 0.8, level: \"A1\" },\r\n      { pattern: /\\bno\\s+va\\b/gi, error: \"negazione_verbo_scorretto\", weight: 0.8, level: \"A1\" },\r\n      { pattern: /\\bno\\s+pu√≤\\b/gi, error: \"negazione_modale_scorretto\", weight: 0.8, level: \"A1\" },\r\n      \r\n      // === ORDINE DELLE PAROLE ===\r\n      { pattern: /\\bvenuto\\s+io\\b/gi, error: \"ordine_parole_soggetto_participio\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\bitaliano\\s+io\\b/gi, error: \"ordine_parole_predicato_soggetto\", weight: 0.7, level: \"A1\" },\r\n      { pattern: /\\bmolto\\s+bello\\s+√®/gi, error: \"ordine_parole_aggettivo_verbo\", weight: 0.7, level: \"A2\" },\r\n      { pattern: /\\bgi√†\\s+ho\\s+mangiato/gi, error: \"ordine_avverbio_ausiliare\", weight: 0.5, level: \"A2\" },\r\n      \r\n      // === STRUTTURE INCOMPLETE ===\r\n      { pattern: /\\b(?:per|di|da|con|in)\\s*$/gi, error: \"preposizione_senza_complemento\", weight: 0.6, level: \"A1\" },\r\n      { pattern: /\\bche\\s*$/gi, error: \"congiunzione_senza_proposizione\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\bperch√©\\s*$/gi, error: \"congiunzione_causale_incompleta\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\bquando\\s*$/gi, error: \"congiunzione_temporale_incompleta\", weight: 0.5, level: \"A2\" },\r\n      \r\n      // === CONNETTIVI SCORRETTI ===\r\n      { pattern: /\\be\\s+poi\\s+e\\b/gi, error: \"ripetizione_connettivi\", weight: 0.4, level: \"A2\" },\r\n      { pattern: /\\bma\\s+per√≤\\b/gi, error: \"doppia_avversativa\", weight: 0.5, level: \"A2\" },\r\n      { pattern: /\\bperch√©\\s+e\\b/gi, error: \"connettivi_ridondanti\", weight: 0.4, level: \"A2\" },\r\n      { pattern: /\\bquindi\\s+allora\\b/gi, error: \"connettivi_consecutivi_doppi\", weight: 0.4, level: \"B1\" },\r\n      \r\n      // === USO PRONOMI ===\r\n      { pattern: /\\bmi\\s+piace\\s+loro/gi, error: \"pronome_indiretto_scorretto\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\bli\\s+ho\\s+detto\\s+a\\s+lei/gi, error: \"ridondanza_pronome_prep\", weight: 0.4, level: \"B1\" },\r\n      { pattern: /\\blo\\s+ho\\s+visto\\s+(?:Maria|Lucia|Anna)/gi, error: \"pronome_oggetto_femminile\", weight: 0.6, level: \"A2\" },\r\n      { pattern: /\\bla\\s+ho\\s+visto\\s+(?:Marco|Luca|Paolo)/gi, error: \"pronome_oggetto_maschile\", weight: 0.6, level: \"A2\" },\r\n      \r\n      // === COSTRUZIONI VERBALI ===\r\n      { pattern: /\\bsto\\s+(?:andato|venuto|partito)/gi, error: \"gerundio_participio_confuso\", weight: 0.7, level: \"A2\" },\r\n      { pattern: /\\bstavo\\s+(?:andato|venuto|partito)/gi, error: \"imperfetto_progressivo_scorretto\", weight: 0.6, level: \"B1\" },\r\n      { pattern: /\\bho\\s+stando/gi, error: \"gerundio_composto_scorretto\", weight: 0.7, level: \"B1\" },\r\n      \r\n      // === INTERROGATIVE ===\r\n      { pattern: /\\bche\\s+cosa\\s+√®\\s+(?:Marco|Luca|Paolo)/gi, error: \"interrogativa_persona_cosa\", weight: 0.6, level: \"A1\" },\r\n      { pattern: /\\bchi\\s+√®\\s+(?:questo|questa)\\s+cosa/gi, error: \"interrogativa_cosa_chi\", weight: 0.6, level: \"A1\" },\r\n      \r\n      // === PERIODO IPOTETICO (B1+) ===\r\n      { pattern: /\\bse\\s+(?:sar√≤|sarai|sar√†)/gi, error: \"periodo_ipotetico_futuro\", weight: 0.4, level: \"B1\" },\r\n      { pattern: /\\bse\\s+ho\\s+tempo\\s+(?:andr√≤|farei)/gi, error: \"periodo_ipotetico_misto\", weight: 0.5, level: \"B1\" },\r\n      \r\n      // === SUBORDINATE ===\r\n      { pattern: /\\bpenso\\s+di\\s+che/gi, error: \"subordinata_doppia_congiunzione\", weight: 0.6, level: \"B1\" },\r\n      { pattern: /\\bspero\\s+di\\s+che/gi, error: \"subordinata_doppia_congiunzione\", weight: 0.6, level: \"B1\" },\r\n      \r\n      // === CONCORDANZA TEMPI ===\r\n      { pattern: /\\bieri\\s+(?:vado|va|andiamo)/gi, error: \"concordanza_temporale_passato\", weight: 0.7, level: \"A2\" },\r\n      { pattern: /\\bdomani\\s+(?:sono\\s+andato|ho\\s+mangiato)/gi, error: \"concordanza_temporale_futuro\", weight: 0.7, level: \"A2\" }\r\n    ];\r\n\r\n    // Scansiona pattern sintattici\r\n    syntaxPatterns.forEach((rule, index) => {\r\n      const matches = text.match(rule.pattern);\r\n      if (matches) {\r\n        matches.forEach(match => {\r\n          issues++;\r\n          console.log(`üî¥ [${index + 1}/30] Problema ${rule.level} [${rule.error}]: \"${match}\" (peso: ${rule.weight})`);\r\n          \r\n          // Penalit√† proporzionale\r\n          let penalty = rule.weight * 0.12;\r\n          if (rule.level === \"A1\") penalty *= 1.2;\r\n          if (rule.level === \"B1\") penalty *= 0.8;\r\n          \r\n          score -= penalty;\r\n        });\r\n      }\r\n    });\r\n\r\n    const words = text.trim().split(/\\s+/).length;\r\n    const finalScore = Math.max(score, 0);\r\n    \r\n    console.log(`üîó SINTASSI SUPER POTENZIATA (30 patterns):`);\r\n    console.log(`   ‚îú‚îÄ‚îÄ ${issues} problemi su ${words} parole`);\r\n    console.log(`   ‚îú‚îÄ‚îÄ Score grezzo: ${score.toFixed(3)}`);\r\n    console.log(`   ‚îî‚îÄ‚îÄ Score finale: ${(finalScore * 100).toFixed(1)}%`);\r\n    \r\n    return finalScore;\r\n  },\r\n\r\n  // 4. ANALISI LESSICALE (mantenuta)\r\n  analyzeLexicon: (text) => {\r\n    const words = text.toLowerCase().trim().split(/\\s+/).filter(w => w.length > 2);\r\n    const uniqueWords = new Set(words);\r\n    \r\n    const lexicalRichness = uniqueWords.size / Math.max(words.length, 1);\r\n    const score = Math.max(0, lexicalRichness);\r\n    console.log(`üìö Lessico: ricchezza ${(lexicalRichness * 100).toFixed(1)}% = ${(score * 100).toFixed(1)}%`);\r\n    \r\n    return score;\r\n  },\r\n\r\n  // 5. ANALISI COERENZA (mantenuta)\r\n  analyzeCoherence: (text) => {\r\n    let score = 0.8;\r\n    console.log(`üéØ Coerenza: ${(score * 100).toFixed(1)}%`);\r\n    return score;\r\n  },\r\n\r\n  // Pesi per livello QCER (aggiustati per maggiore severit√† A1)\r\n  getWeightsByLevel: (level) => {\r\n    const weights = {\r\n      'A1': { orthography: 0.20, morphology: 0.45, syntax: 0.25, lexicon: 0.08, coherence: 0.02 },\r\n      'A2': { orthography: 0.15, morphology: 0.35, syntax: 0.30, lexicon: 0.15, coherence: 0.05 },\r\n      'B1': { orthography: 0.10, morphology: 0.25, syntax: 0.30, lexicon: 0.25, coherence: 0.10 },\r\n      'B2': { orthography: 0.05, morphology: 0.20, syntax: 0.30, lexicon: 0.30, coherence: 0.15 },\r\n      'C1': { orthography: 0.05, morphology: 0.15, syntax: 0.25, lexicon: 0.30, coherence: 0.25 },\r\n      'C2': { orthography: 0.05, morphology: 0.10, syntax: 0.20, lexicon: 0.30, coherence: 0.35 }\r\n    };\r\n    \r\n    return weights[level] || weights['B1'];\r\n  },\r\n\r\n  // Suggerisce livello (soglie aggiustate)\r\n  suggestLevel: (score) => {\r\n    if (score >= 0.92) return 'C2';\r\n    if (score >= 0.82) return 'C1';\r\n    if (score >= 0.68) return 'B2';\r\n    if (score >= 0.52) return 'B1';\r\n    if (score >= 0.35) return 'A2';  // Soglia A2 pi√π alta\r\n    return 'A1';\r\n  },\r\n\r\n  // Genera feedback personalizzato (potenziato)\r\n  generateFeedback: (scores, targetLevel) => {\r\n    const feedback = [];\r\n    \r\n    if (scores.orthography < 0.7) {\r\n      feedback.push(\"‚ö†Ô∏è Concentrati sull'ortografia italiana\");\r\n    }\r\n    \r\n    if (scores.morphology < 0.6) {\r\n      feedback.push(\"üìù Lavora su concordanze e coniugazioni\");\r\n    }\r\n    \r\n    if (scores.syntax < 0.6) {\r\n      feedback.push(\"üîó Migliora l'ordine delle parole e le negazioni\");\r\n    }\r\n\r\n    if (scores.lexicon < 0.5) {\r\n      feedback.push(\"üìö Arricchisci il vocabolario\");\r\n    }\r\n    \r\n    if (feedback.length === 0) {\r\n      feedback.push(\"üéâ Ottimo lavoro! Continua cos√¨!\");\r\n    }\r\n    \r\n    return feedback;\r\n  }\r\n};\r\n\r\n// Simulazione AI Service (mantenuta dal tuo file)\r\nexport const MockQuestionService = {\r\n  // Genera banco domande iniziale\r\n  generateTestBank: async () => {\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    return mockQuestionBank;\r\n  },\r\n\r\n  // Genera domande per sezione specifica\r\n  generateSectionQuestions: async (sectionId, userProfile) => {\r\n    await new Promise(resolve => setTimeout(resolve, 800));\r\n    \r\n    const { isNAI, motherLanguage, previousAnswers } = userProfile;\r\n    \r\n    switch(sectionId) {\r\n      case 'reading':\r\n        return MockQuestionService.selectAdaptiveQuestions(mockQuestionBank.reading, previousAnswers, 3);\r\n      case 'grammar':\r\n        return MockQuestionService.selectAdaptiveQuestions(mockQuestionBank.grammar, previousAnswers, 4);\r\n      case 'writing':\r\n        return MockQuestionService.selectAdaptiveQuestions(mockQuestionBank.writing, previousAnswers, 2);\r\n      case 'speaking':\r\n        return MockQuestionService.selectAdaptiveQuestions(mockQuestionBank.speaking, previousAnswers, 2);\r\n      default:\r\n        return [];\r\n    }\r\n  },\r\n\r\n  // Selezione adattiva domande\r\n  selectAdaptiveQuestions: (questionPool, previousAnswers, count) => {\r\n    const performanceScore = MockQuestionService.calculatePerformance(previousAnswers);\r\n    \r\n    let targetLevel;\r\n    if (performanceScore > 0.8) targetLevel = ['B2', 'C1', 'C2'];\r\n    else if (performanceScore > 0.6) targetLevel = ['B1', 'B2'];\r\n    else if (performanceScore > 0.4) targetLevel = ['A2', 'B1'];\r\n    else targetLevel = ['A1', 'A2'];\r\n\r\n    const filteredQuestions = questionPool.filter(q => \r\n      !q.level || targetLevel.includes(q.level)\r\n    );\r\n\r\n    const shuffled = filteredQuestions.sort(() => 0.5 - Math.random());\r\n    return shuffled.slice(0, count);\r\n  },\r\n\r\n  // Calcola performance dalle risposte precedenti\r\n  calculatePerformance: (answers) => {\r\n    const answerKeys = Object.keys(answers);\r\n    if (answerKeys.length === 0) return 0.5;\r\n\r\n    let correctCount = 0;\r\n    let totalCount = 0;\r\n\r\n    answerKeys.forEach(key => {\r\n      const answer = answers[key];\r\n      if (typeof answer === 'object' && answer.isCorrect !== undefined) {\r\n        totalCount++;\r\n        if (answer.isCorrect) correctCount++;\r\n      } else if (answer === 'correct') {\r\n        totalCount++;\r\n        correctCount++;\r\n      } else if (['wrong1', 'wrong2', 'wrong3'].includes(answer)) {\r\n        totalCount++;\r\n      }\r\n    });\r\n\r\n    return totalCount > 0 ? correctCount / totalCount : 0.5;\r\n  },\r\n\r\n  // Valuta risposta scritta con sistema SUPER POTENZIATO\r\n  evaluateWriting: async (text, level) => {\r\n    console.log('üîç === ANALISI AVANZATA SCRITTURA SUPER POTENZIATA ===');\r\n    \r\n    const result = await AdvancedWritingEvaluator.evaluateWriting(text, level);\r\n    \r\n    console.log('üìä Risultato finale scrittura SUPER POTENZIATA:');\r\n    console.log('  Score:', (result.score * 100).toFixed(1) + '%');\r\n    console.log('  Livello suggerito:', result.suggestedLevel);\r\n    console.log('  Feedback:', result.feedback.join(' | '));\r\n    console.log('===================================================');\r\n    \r\n    return {\r\n      score: result.score,\r\n      feedback: result.feedback.join(' | '),\r\n      suggestedLevel: result.suggestedLevel,\r\n      breakdown: result.breakdown\r\n    };\r\n  },\r\n\r\n  // Valuta registrazione audio (mantenuta)\r\n  evaluateSpeaking: async (audioData, level) => {\r\n    await new Promise(resolve => setTimeout(resolve, 2000));\r\n    \r\n    const duration = audioData.duration || 5000;\r\n    const hasGoodDuration = duration > 10000 && duration < 120000;\r\n    \r\n    let score = 0.6;\r\n    if (hasGoodDuration) score += 0.3;\r\n    \r\n    return {\r\n      score: Math.min(score, 1.0),\r\n      feedback: score > 0.8 ? 'Eccellente pronuncia e fluidit√†!' :\r\n                score > 0.6 ? 'Buona pronuncia, continua cos√¨!' :\r\n                'Continua a praticare la pronuncia.'\r\n    };\r\n  }\r\n};\r\n\r\n// Algoritmo di scoring QCER migliorato con debug dettagliato\r\nexport const QCERScoring = {\r\n  calculateLevel: (allAnswers) => {\r\n    console.log('üéØ === CALCOLO LIVELLO QCER DETTAGLIATO ===');\r\n    \r\n    const sectionScores = {\r\n      reading: QCERScoring.evaluateSection(allAnswers, 'reading'),\r\n      grammar: QCERScoring.evaluateSection(allAnswers, 'grammar'),\r\n      writing: QCERScoring.evaluateSection(allAnswers, 'writing'),\r\n      speaking: QCERScoring.evaluateSection(allAnswers, 'speaking')\r\n    };\r\n\r\n    console.log('üìñ Lettura/Comprensione:', (sectionScores.reading * 100).toFixed(1) + '%');\r\n    console.log('üìù Grammatica:', (sectionScores.grammar * 100).toFixed(1) + '%');\r\n    console.log('‚úçÔ∏è Scrittura:', (sectionScores.writing * 100).toFixed(1) + '%');\r\n    console.log('üó£Ô∏è Parlato:', (sectionScores.speaking * 100).toFixed(1) + '%');\r\n\r\n    // Pesi aggiornati\r\n    const totalScore = (\r\n      sectionScores.reading * 0.20 +\r\n      sectionScores.grammar * 0.30 +\r\n      sectionScores.writing * 0.35 +\r\n      sectionScores.speaking * 0.15\r\n    );\r\n\r\n    console.log('üéØ Punteggio Totale:', (totalScore * 100).toFixed(1) + '%');\r\n\r\n    // Determina livello\r\n    let assignedLevel = 'A1';\r\n    if (totalScore >= 0.92) assignedLevel = 'C2';\r\n    else if (totalScore >= 0.82) assignedLevel = 'C1';\r\n    else if (totalScore >= 0.68) assignedLevel = 'B2';\r\n    else if (totalScore >= 0.52) assignedLevel = 'B1';\r\n    else if (totalScore >= 0.38) assignedLevel = 'A2';\r\n    else assignedLevel = 'A1';\r\n\r\n    // MAPPA LIVELLI A CINTURE (FIX PRINCIPALE)\r\n    const levelToBelt = {\r\n      'A1': 'yellow',\r\n      'A2': 'orange', \r\n      'B1': 'green',\r\n      'B2': 'blue',\r\n      'C1': 'brown',\r\n      'C2': 'black'\r\n    };\r\n\r\n    console.log('ü•ã Livello Assegnato:', assignedLevel);\r\n    console.log('üèÖ Cintura:', levelToBelt[assignedLevel]);\r\n    console.log('===========================================');\r\n\r\n    // RETURN CON TUTTE LE PROPRIET√Ä NECESSARIE\r\n    return {\r\n      level: assignedLevel,\r\n      score: totalScore,\r\n      belt: levelToBelt[assignedLevel], // ‚Üê FIX: Assicura che belt sia sempre presente\r\n      breakdown: sectionScores,\r\n      percentage: Math.round(totalScore * 100)\r\n    };\r\n  },\r\n\r\n  evaluateSection: (answers, sectionPrefix) => {\r\n    const sectionAnswers = Object.keys(answers)\r\n      .filter(key => key.includes(sectionPrefix))\r\n      .map(key => answers[key]);\r\n\r\n    if (sectionAnswers.length === 0) return 0.5;\r\n\r\n    let totalScore = 0;\r\n    let count = 0;\r\n\r\n    sectionAnswers.forEach(answer => {\r\n      count++;\r\n      if (typeof answer === 'object' && answer.score !== undefined) {\r\n        totalScore += answer.score;\r\n      } else if (answer === 'correct') {\r\n        totalScore += 1.0;\r\n      } else if (['wrong1', 'wrong2', 'wrong3'].includes(answer)) {\r\n        totalScore += 0.0;\r\n      } else {\r\n        totalScore += 0.5;\r\n      }\r\n    });\r\n\r\n    return count > 0 ? totalScore / count : 0.5;\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}