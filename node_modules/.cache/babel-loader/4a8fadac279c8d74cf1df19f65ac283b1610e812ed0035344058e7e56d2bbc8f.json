{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Utente\\\\lingua-kai-platform - restructured\\\\src\\\\components\\\\components\\\\TranslationSystem\\\\EnhancedSupportoLinguistico.js\",\n  _s = $RefreshSig$();\n// EnhancedSupportoLinguistico.js - Sistema integrato con debug completo\nimport React, { useState, useEffect, useContext } from 'react';\nimport { UserContext } from '../../../contexts/contexts/UserContext';\n\n// IMPORT CORRETTI - dalla cartella SupportoLinguistico esistente\nimport SupportoLinguistico from '../SupportoLinguistico/SupportoLinguistico';\nimport '../SupportoLinguistico/SupportoLinguistico.css';\n\n// Import CSS del sistema traduzione\nimport './TranslationSystem.css';\nimport './EnhancedSupporto.css';\n\n// === SISTEMA DI TRADUZIONE SEMPLIFICATO INTEGRATO ===\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass SimpleTranslationSystem {\n  constructor() {\n    this.isActive = false;\n    this.userLanguage = 'en';\n    this.hoverTimeout = null;\n    this.currentPopup = null;\n    this.personalDictionary = this.loadPersonalDictionary();\n    this.isSmartDisabled = false;\n  }\n  initialize(userContext) {\n    var _userContext$user;\n    console.log('üåç SimpleTranslationSystem: Initializing...');\n    if (userContext !== null && userContext !== void 0 && (_userContext$user = userContext.user) !== null && _userContext$user !== void 0 && _userContext$user.motherLanguage) {\n      this.userLanguage = this.mapLanguageCode(userContext.user.motherLanguage);\n    }\n    console.log('üîß DEBUG INITIALIZE:', {\n      userLanguage: this.userLanguage,\n      currentPath: window.location.pathname,\n      beforeCheckSection: this.isActive\n    });\n    this.checkSectionAndActivate();\n    console.log('üîß DEBUG DOPO CHECK:', {\n      afterCheckSection: this.isActive,\n      willSetupListeners: this.isActive\n    });\n    if (this.isActive) {\n      console.log('‚úÖ Chiamando setupEventListeners...');\n      this.setupEventListeners();\n    } else {\n      console.log('‚ùå NON chiamo setupEventListeners - isActive:', this.isActive);\n    }\n    console.log(`üéØ TranslationSystem: ${this.isActive ? 'ATTIVO' : 'DISATTIVATO'}`);\n  }\n  checkSectionAndActivate() {\n    const currentPath = window.location.pathname;\n    const isDisabledSection = ['/test-ingresso', '/test-livello', '/esame'].some(section => currentPath.includes(section));\n    const isActiveSection = ['/dashboard', '/lettura', '/scrittura', '/punteggiatura', '/registri', '/dojo'].some(section => currentPath.includes(section));\n    console.log('üîß DEBUG SECTION CHECK:', {\n      currentPath,\n      isDisabledSection,\n      isActiveSection,\n      isSmartDisabled: this.isSmartDisabled\n    });\n    this.isActive = isActiveSection && !isDisabledSection && !this.isSmartDisabled;\n    console.log('üéØ RISULTATO CHECK:', this.isActive);\n  }\n  setupEventListeners() {\n    if (!this.isActive) {\n      console.log('‚ùå Event listeners NON attivati - sistema non attivo');\n      return;\n    }\n    console.log('üîß Attivando event listeners...');\n\n    // Salva i riferimenti per poterli rimuovere\n    this.boundHandleMouseOver = this.handleMouseOver.bind(this);\n    this.boundHandleMouseOut = this.handleMouseOut.bind(this);\n    this.boundHandleTextSelection = this.handleTextSelection.bind(this);\n    this.boundHandleClickOutside = this.handleClickOutside.bind(this);\n    document.addEventListener('mouseover', this.boundHandleMouseOver);\n    document.addEventListener('mouseout', this.boundHandleMouseOut);\n    document.addEventListener('mouseup', this.boundHandleTextSelection);\n    document.addEventListener('click', this.boundHandleClickOutside);\n    console.log('‚úÖ Event listeners attivati con binding corretto - ora testa il mouse!');\n\n    // TEST: verifica che i listener siano attaccati\n    console.log('üß™ Test listener:', {\n      documentExists: !!document,\n      hasListeners: 'listeners attached'\n    });\n  }\n  removeEventListeners() {\n    if (this.boundHandleMouseOver) {\n      document.removeEventListener('mouseover', this.boundHandleMouseOver);\n      document.removeEventListener('mouseout', this.boundHandleMouseOut);\n      document.removeEventListener('mouseup', this.boundHandleTextSelection);\n      document.removeEventListener('click', this.boundHandleClickOutside);\n      console.log('üóëÔ∏è Event listeners rimossi');\n    }\n  }\n  handleMouseOver(event) {\n    var _event$target$textCon;\n    console.log('üñ±Ô∏è HOVER DEBUG:', {\n      target: event.target,\n      tagName: event.target.tagName,\n      textContent: (_event$target$textCon = event.target.textContent) === null || _event$target$textCon === void 0 ? void 0 : _event$target$textCon.slice(0, 30),\n      isActive: this.isActive,\n      isValidElement: this.isValidTextElement(event.target),\n      classList: event.target.classList.toString()\n    });\n    if (!this.isActive || this.isSmartDisabled) {\n      console.log('‚ùå Sistema non attivo:', {\n        isActive: this.isActive,\n        isSmartDisabled: this.isSmartDisabled\n      });\n      return;\n    }\n    const element = event.target;\n    if (!this.isValidTextElement(element)) {\n      console.log('‚ùå Elemento non valido');\n      return;\n    }\n    const word = this.getWordFromElement(element);\n    console.log('üìù Parola estratta:', word);\n    if (!word || word.length < 3) {\n      console.log('‚ùå Parola troppo corta:', word);\n      return;\n    }\n    clearTimeout(this.hoverTimeout);\n    this.hoverTimeout = setTimeout(() => {\n      console.log('üåç Avvio traduzione per:', word);\n      this.showHoverTranslation(word, event.clientX, event.clientY);\n    }, 800);\n  }\n  handleMouseOut(event) {\n    clearTimeout(this.hoverTimeout);\n    setTimeout(() => {\n      if (this.currentPopup && !this.currentPopup.matches(':hover')) {\n        this.hideCurrentPopup();\n      }\n    }, 300);\n  }\n  handleTextSelection(event) {\n    if (!this.isActive || this.isSmartDisabled) return;\n    const selection = window.getSelection();\n    const selectedText = selection.toString().trim();\n    if (selectedText.length < 3) return;\n    console.log('üìù Testo selezionato:', selectedText);\n    this.hideCurrentPopup();\n    const range = selection.getRangeAt(0);\n    const rect = range.getBoundingClientRect();\n    this.showTranslationButton(selectedText, rect.right + 10, rect.top);\n  }\n  handleClickOutside(event) {\n    if (!event.target.closest('.translation-popup') && !event.target.closest('.translation-button')) {\n      this.hideCurrentPopup();\n    }\n  }\n  isValidTextElement(element) {\n    const invalidTags = ['INPUT', 'BUTTON', 'SELECT', 'TEXTAREA'];\n    if (invalidTags.includes(element.tagName)) {\n      console.log('‚ùå Tag non valido:', element.tagName);\n      return false;\n    }\n    if (element.closest('.translation-popup') || element.closest('.supporto-linguistico-widget') || element.closest('.translation-button')) {\n      console.log('‚ùå Elemento del sistema di traduzione');\n      return false;\n    }\n    const hasText = element.textContent && element.textContent.trim().length > 0;\n    if (!hasText) {\n      console.log('‚ùå Nessun testo');\n    }\n    return hasText;\n  }\n  getWordFromElement(element) {\n    const textContent = element.textContent;\n    if (!textContent) return null;\n    const words = textContent.split(/\\s+/);\n    const validWord = words.find(word => word.length > 2) || null;\n    console.log('üîç Parole trovate:', words, '-> Scelta:', validWord);\n    return validWord;\n  }\n  async showHoverTranslation(word, x, y) {\n    try {\n      console.log('üåç Trying to translate:', word);\n      const cachedTranslation = this.getCachedTranslation(word);\n      if (cachedTranslation) {\n        console.log('üìö Traduzione da cache:', cachedTranslation);\n        this.displayTranslationPopup(word, cachedTranslation, x, y, 'cache');\n        return;\n      }\n      const translation = this.getMockTranslation(word);\n      if (translation) {\n        console.log('üé≠ Traduzione mock:', translation);\n        this.displayTranslationPopup(word, translation, x, y, 'mock');\n        this.saveToPersonalDictionary(word, translation);\n      }\n    } catch (error) {\n      console.error('‚ùå Errore traduzione hover:', error);\n    }\n  }\n  showTranslationButton(text, x, y) {\n    const existingButton = document.querySelector('.translation-button');\n    if (existingButton) existingButton.remove();\n    console.log('üåç Creando pulsante traduzione per:', text);\n    const button = document.createElement('button');\n    button.className = 'translation-button';\n    button.innerHTML = 'üåç Traduci';\n    button.style.position = 'fixed';\n    button.style.left = `${Math.min(x, window.innerWidth - 100)}px`;\n    button.style.top = `${Math.max(y - 30, 10)}px`;\n    button.style.zIndex = '10000';\n    button.onclick = async () => {\n      button.innerHTML = '‚è≥ Traducendo...';\n      button.disabled = true;\n      try {\n        const translation = this.getMockTranslation(text);\n        if (translation) {\n          this.displayTranslationPopup(text, translation, x, y - 50, 'selection');\n          this.saveToPersonalDictionary(text, translation);\n        }\n      } catch (error) {\n        console.error('‚ùå Errore traduzione selezione:', error);\n      } finally {\n        button.remove();\n      }\n    };\n    document.body.appendChild(button);\n    setTimeout(() => {\n      if (button.parentNode) button.remove();\n    }, 5000);\n  }\n  getMockTranslation(text) {\n    const mockTranslations = {\n      'casa': 'house',\n      'libro': 'book',\n      'scuola': 'school',\n      'insegnante': 'teacher',\n      'studiare': 'to study',\n      'imparare': 'to learn',\n      'difficile': 'difficult',\n      'facile': 'easy',\n      'ciao': 'hello',\n      'grazie': 'thank you',\n      'prego': 'you\\'re welcome',\n      'famiglia': 'family',\n      'amico': 'friend',\n      'lavoro': 'work',\n      'mangiare': 'to eat',\n      'bere': 'to drink',\n      'dormire': 'to sleep',\n      'tempo': 'time',\n      'oggi': 'today',\n      'domani': 'tomorrow',\n      'ieri': 'yesterday',\n      'mare': 'sea',\n      'acqua': 'water',\n      'sabbia': 'sand',\n      'pranzo': 'lunch',\n      'mangiato': 'eaten',\n      'costruito': 'built',\n      'castelli': 'castles',\n      'nuotato': 'swam',\n      'giornata': 'day',\n      'perfetta': 'perfect',\n      'sono': 'I am',\n      'andato': 'went',\n      'con': 'with',\n      'mia': 'my',\n      'era': 'was',\n      'calda': 'hot',\n      'pulita': 'clean',\n      'abbiamo': 'we have',\n      'per': 'for',\n      'buon': 'good',\n      'gelato': 'ice cream',\n      'stata': 'been',\n      'una': 'a/an'\n    };\n    const lowerText = text.toLowerCase();\n    return mockTranslations[lowerText] || `[Traduzione: ${text}]`;\n  }\n  displayTranslationPopup(originalText, translation, x, y, source) {\n    console.log('üé™ Creando popup:', {\n      originalText,\n      translation,\n      x,\n      y,\n      source\n    });\n    this.hideCurrentPopup();\n    const popup = document.createElement('div');\n    popup.className = 'translation-popup';\n    popup.innerHTML = `\n      <div class=\"translation-popup-header\">\n        <span class=\"original-text\">${originalText}</span>\n        <button class=\"popup-close\" onclick=\"this.parentElement.parentElement.remove()\">√ó</button>\n      </div>\n      <div class=\"translation-text\">${translation}</div>\n      <div class=\"translation-actions\">\n        <button class=\"play-audio\" onclick=\"simpleTranslationSystem.playAudio('${originalText}', 'it')\">üîä IT</button>\n        <button class=\"save-word\" onclick=\"simpleTranslationSystem.saveToPersonalDictionary('${originalText}', '${translation}')\">üíæ</button>\n      </div>\n      <div class=\"translation-source\">${source === 'cache' ? 'üìö Salvato' : 'üåê Mock'}</div>\n    `;\n    popup.style.position = 'fixed';\n    popup.style.left = `${Math.min(x, window.innerWidth - 250)}px`;\n    popup.style.top = `${Math.max(y - 100, 10)}px`;\n    popup.style.zIndex = '10001';\n    document.body.appendChild(popup);\n    this.currentPopup = popup;\n    console.log('‚úÖ Popup creato e aggiunto al DOM');\n    setTimeout(() => {\n      if (popup.parentNode && !popup.matches(':hover')) {\n        popup.remove();\n      }\n    }, 8000);\n  }\n  hideCurrentPopup() {\n    if (this.currentPopup) {\n      this.currentPopup.remove();\n      this.currentPopup = null;\n    }\n    const buttons = document.querySelectorAll('.translation-button');\n    buttons.forEach(btn => btn.remove());\n  }\n  playAudio(text, language) {\n    console.log('üîä Playing audio:', text, language);\n    if ('speechSynthesis' in window) {\n      const utterance = new SpeechSynthesisUtterance(text);\n      utterance.lang = language === 'it' ? 'it-IT' : 'en-US';\n      utterance.rate = 0.8;\n      speechSynthesis.speak(utterance);\n    }\n  }\n  loadPersonalDictionary() {\n    try {\n      return JSON.parse(localStorage.getItem('translation_personal_dictionary') || '{}');\n    } catch {\n      return {};\n    }\n  }\n  saveToPersonalDictionary(original, translation) {\n    var _this$personalDiction;\n    this.personalDictionary[original.toLowerCase()] = {\n      translation,\n      addedAt: new Date().toISOString(),\n      usageCount: (((_this$personalDiction = this.personalDictionary[original.toLowerCase()]) === null || _this$personalDiction === void 0 ? void 0 : _this$personalDiction.usageCount) || 0) + 1\n    };\n    localStorage.setItem('translation_personal_dictionary', JSON.stringify(this.personalDictionary));\n    console.log(`üíæ Salvato: ${original} ‚Üí ${translation}`);\n  }\n  getCachedTranslation(word) {\n    const entry = this.personalDictionary[word.toLowerCase()];\n    return entry ? entry.translation : null;\n  }\n  getPersonalDictionary() {\n    return this.personalDictionary;\n  }\n  getMostTranslatedWords(limit = 10) {\n    return Object.entries(this.personalDictionary).sort(([, a], [, b]) => (b.usageCount || 0) - (a.usageCount || 0)).slice(0, limit).map(([word, data]) => ({\n      word,\n      count: data.usageCount || 0\n    }));\n  }\n  enableSmartDisable() {\n    this.isSmartDisabled = true;\n    this.removeEventListeners();\n    this.hideCurrentPopup();\n    console.log('üéØ Smart Disable attivato');\n  }\n  disableSmartDisable() {\n    this.isSmartDisabled = false;\n    if (this.isActive) {\n      this.setupEventListeners();\n    }\n    console.log('‚úÖ Smart Disable disattivato');\n  }\n  mapLanguageCode(userLanguageCode) {\n    const languageMap = {\n      'al': 'sq',\n      'ko': 'sq',\n      'hi': 'hi',\n      'ar': 'ar',\n      'zh': 'zh',\n      'ro': 'ro',\n      'es': 'es',\n      'pt': 'pt',\n      'uk': 'uk'\n    };\n    return languageMap[userLanguageCode] || 'en';\n  }\n}\n\n// Istanza globale\nconst simpleTranslationSystem = new SimpleTranslationSystem();\n\n// Esponi globalmente per i pulsanti\nwindow.simpleTranslationSystem = simpleTranslationSystem;\nconst EnhancedSupportoLinguistico = ({\n  currentSection,\n  isTestMode = false\n}) => {\n  _s();\n  const {\n    user\n  } = useContext(UserContext) || {};\n  const [isWidgetVisible, setIsWidgetVisible] = useState(false);\n  const [personalDictionary, setPersonalDictionary] = useState({});\n  const [mostUsedWords, setMostUsedWords] = useState([]);\n  useEffect(() => {\n    console.log('üîç DEBUG COMPLETO:', {\n      isTestMode,\n      user,\n      currentSection,\n      pathname: window.location.pathname,\n      isSystemActive: simpleTranslationSystem.isActive,\n      isSmartDisabled: simpleTranslationSystem.isSmartDisabled\n    });\n    if (!isTestMode && user) {\n      simpleTranslationSystem.initialize({\n        user\n      });\n      loadTranslationData();\n    }\n    return () => {\n      if (simpleTranslationSystem) {\n        simpleTranslationSystem.removeEventListeners();\n      }\n    };\n  }, [user, isTestMode, currentSection]);\n  const loadTranslationData = () => {\n    setPersonalDictionary(simpleTranslationSystem.getPersonalDictionary());\n    setMostUsedWords(simpleTranslationSystem.getMostTranslatedWords(5));\n  };\n  const toggleWidget = () => {\n    setIsWidgetVisible(!isWidgetVisible);\n    if (!isWidgetVisible) {\n      loadTranslationData();\n    }\n  };\n  const closeWidget = () => {\n    setIsWidgetVisible(false);\n  };\n  if (isTestMode || !user) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"enhanced-supporto-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `translation-status ${simpleTranslationSystem.isActive && !simpleTranslationSystem.isSmartDisabled ? 'active' : 'inactive'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-indicator\",\n        children: simpleTranslationSystem.isActive && !simpleTranslationSystem.isSmartDisabled ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-dot active\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-text\",\n            children: \"Traduzione attiva\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-dot inactive\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-text\",\n            children: \"Traduzione disattiva\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 9\n      }, this), simpleTranslationSystem.isActive && !simpleTranslationSystem.isSmartDisabled && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"usage-hint\",\n        children: \"\\uD83D\\uDCA1 Passa il mouse su una parola o seleziona del testo per tradurre\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 7\n    }, this), isWidgetVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"enhanced-supporto-widget\",\n      children: [/*#__PURE__*/_jsxDEV(SupportoLinguistico, {\n        onClose: closeWidget,\n        currentSection: currentSection\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"translation-stats-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\uD83D\\uDCCA Le tue statistiche\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 13\n        }, this), mostUsedWords.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"most-used-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"\\uD83D\\uDD25 Parole pi\\xF9 cercate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"words-list\",\n            children: mostUsedWords.map(({\n              word,\n              count\n            }) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"word-stat\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"word\",\n                children: word\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 542,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"count\",\n                children: [count, \"x\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 543,\n                columnNumber: 23\n              }, this)]\n            }, word, true, {\n              fileName: _jsxFileName,\n              lineNumber: 541,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 15\n        }, this), Object.keys(personalDictionary).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"personal-dict-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: [\"\\uD83D\\uDCBE Dizionario Personale (\", Object.keys(personalDictionary).length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dict-preview\",\n            children: Object.entries(personalDictionary).slice(0, 3).map(([word, data]) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dict-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"word\",\n                children: word\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"translation\",\n                children: data.translation\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 23\n              }, this)]\n            }, word, true, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"advanced-controls\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"control-btn\",\n            onClick: () => simpleTranslationSystem.isSmartDisabled ? simpleTranslationSystem.disableSmartDisable() : simpleTranslationSystem.enableSmartDisable(),\n            children: [\"\\uD83C\\uDFAF \", simpleTranslationSystem.isSmartDisabled ? 'Riattiva' : 'Modalit√† Test']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `enhanced-trigger-button ${Object.keys(personalDictionary).length > 0 ? 'has-stats' : ''}`,\n      onClick: toggleWidget,\n      title: \"Supporto Linguistico Avanzato\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"trigger-icon\",\n        children: \"\\uD83C\\uDF0D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"trigger-text\",\n        children: \"Supporto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 9\n      }, this), Object.keys(personalDictionary).length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"stats-badge\",\n        children: Object.keys(personalDictionary).length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 579,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 500,\n    columnNumber: 5\n  }, this);\n};\n_s(EnhancedSupportoLinguistico, \"XMqujx4euscmJKBHhEJR+89wmAY=\");\n_c = EnhancedSupportoLinguistico;\nexport default EnhancedSupportoLinguistico;\nvar _c;\n$RefreshReg$(_c, \"EnhancedSupportoLinguistico\");","map":{"version":3,"names":["React","useState","useEffect","useContext","UserContext","SupportoLinguistico","jsxDEV","_jsxDEV","Fragment","_Fragment","SimpleTranslationSystem","constructor","isActive","userLanguage","hoverTimeout","currentPopup","personalDictionary","loadPersonalDictionary","isSmartDisabled","initialize","userContext","_userContext$user","console","log","user","motherLanguage","mapLanguageCode","currentPath","window","location","pathname","beforeCheckSection","checkSectionAndActivate","afterCheckSection","willSetupListeners","setupEventListeners","isDisabledSection","some","section","includes","isActiveSection","boundHandleMouseOver","handleMouseOver","bind","boundHandleMouseOut","handleMouseOut","boundHandleTextSelection","handleTextSelection","boundHandleClickOutside","handleClickOutside","document","addEventListener","documentExists","hasListeners","removeEventListeners","removeEventListener","event","_event$target$textCon","target","tagName","textContent","slice","isValidElement","isValidTextElement","classList","toString","element","word","getWordFromElement","length","clearTimeout","setTimeout","showHoverTranslation","clientX","clientY","matches","hideCurrentPopup","selection","getSelection","selectedText","trim","range","getRangeAt","rect","getBoundingClientRect","showTranslationButton","right","top","closest","invalidTags","hasText","words","split","validWord","find","x","y","cachedTranslation","getCachedTranslation","displayTranslationPopup","translation","getMockTranslation","saveToPersonalDictionary","error","text","existingButton","querySelector","remove","button","createElement","className","innerHTML","style","position","left","Math","min","innerWidth","max","zIndex","onclick","disabled","body","appendChild","parentNode","mockTranslations","lowerText","toLowerCase","originalText","source","popup","buttons","querySelectorAll","forEach","btn","playAudio","language","utterance","SpeechSynthesisUtterance","lang","rate","speechSynthesis","speak","JSON","parse","localStorage","getItem","original","_this$personalDiction","addedAt","Date","toISOString","usageCount","setItem","stringify","entry","getPersonalDictionary","getMostTranslatedWords","limit","Object","entries","sort","a","b","map","data","count","enableSmartDisable","disableSmartDisable","userLanguageCode","languageMap","simpleTranslationSystem","EnhancedSupportoLinguistico","currentSection","isTestMode","_s","isWidgetVisible","setIsWidgetVisible","setPersonalDictionary","mostUsedWords","setMostUsedWords","isSystemActive","loadTranslationData","toggleWidget","closeWidget","children","fileName","_jsxFileName","lineNumber","columnNumber","onClose","keys","onClick","title","_c","$RefreshReg$"],"sources":["C:/Users/Utente/lingua-kai-platform - restructured/src/components/components/TranslationSystem/EnhancedSupportoLinguistico.js"],"sourcesContent":["// EnhancedSupportoLinguistico.js - Sistema integrato con debug completo\r\nimport React, { useState, useEffect, useContext } from 'react';\r\nimport { UserContext } from '../../../contexts/contexts/UserContext';\r\n\r\n// IMPORT CORRETTI - dalla cartella SupportoLinguistico esistente\r\nimport SupportoLinguistico from '../SupportoLinguistico/SupportoLinguistico';\r\nimport '../SupportoLinguistico/SupportoLinguistico.css';\r\n\r\n// Import CSS del sistema traduzione\r\nimport './TranslationSystem.css';\r\nimport './EnhancedSupporto.css';\r\n\r\n// === SISTEMA DI TRADUZIONE SEMPLIFICATO INTEGRATO ===\r\nclass SimpleTranslationSystem {\r\n  constructor() {\r\n    this.isActive = false;\r\n    this.userLanguage = 'en';\r\n    this.hoverTimeout = null;\r\n    this.currentPopup = null;\r\n    this.personalDictionary = this.loadPersonalDictionary();\r\n    this.isSmartDisabled = false;\r\n  }\r\n\r\n  initialize(userContext) {\r\n    console.log('üåç SimpleTranslationSystem: Initializing...');\r\n    \r\n    if (userContext?.user?.motherLanguage) {\r\n      this.userLanguage = this.mapLanguageCode(userContext.user.motherLanguage);\r\n    }\r\n    \r\n    console.log('üîß DEBUG INITIALIZE:', {\r\n      userLanguage: this.userLanguage,\r\n      currentPath: window.location.pathname,\r\n      beforeCheckSection: this.isActive\r\n    });\r\n    \r\n    this.checkSectionAndActivate();\r\n    \r\n    console.log('üîß DEBUG DOPO CHECK:', {\r\n      afterCheckSection: this.isActive,\r\n      willSetupListeners: this.isActive\r\n    });\r\n    \r\n    if (this.isActive) {\r\n      console.log('‚úÖ Chiamando setupEventListeners...');\r\n      this.setupEventListeners();\r\n    } else {\r\n      console.log('‚ùå NON chiamo setupEventListeners - isActive:', this.isActive);\r\n    }\r\n    \r\n    console.log(`üéØ TranslationSystem: ${this.isActive ? 'ATTIVO' : 'DISATTIVATO'}`);\r\n  }\r\n\r\n  checkSectionAndActivate() {\r\n    const currentPath = window.location.pathname;\r\n    \r\n    const isDisabledSection = ['/test-ingresso', '/test-livello', '/esame'].some(section => \r\n      currentPath.includes(section)\r\n    );\r\n    \r\n    const isActiveSection = ['/dashboard', '/lettura', '/scrittura', '/punteggiatura', '/registri', '/dojo'].some(section => \r\n      currentPath.includes(section)\r\n    );\r\n    \r\n    console.log('üîß DEBUG SECTION CHECK:', {\r\n      currentPath,\r\n      isDisabledSection,\r\n      isActiveSection,\r\n      isSmartDisabled: this.isSmartDisabled\r\n    });\r\n    \r\n    this.isActive = isActiveSection && !isDisabledSection && !this.isSmartDisabled;\r\n    \r\n    console.log('üéØ RISULTATO CHECK:', this.isActive);\r\n  }\r\n\r\n  setupEventListeners() {\r\n    if (!this.isActive) {\r\n      console.log('‚ùå Event listeners NON attivati - sistema non attivo');\r\n      return;\r\n    }\r\n    \r\n    console.log('üîß Attivando event listeners...');\r\n    \r\n    // Salva i riferimenti per poterli rimuovere\r\n    this.boundHandleMouseOver = this.handleMouseOver.bind(this);\r\n    this.boundHandleMouseOut = this.handleMouseOut.bind(this);\r\n    this.boundHandleTextSelection = this.handleTextSelection.bind(this);\r\n    this.boundHandleClickOutside = this.handleClickOutside.bind(this);\r\n    \r\n    document.addEventListener('mouseover', this.boundHandleMouseOver);\r\n    document.addEventListener('mouseout', this.boundHandleMouseOut);\r\n    document.addEventListener('mouseup', this.boundHandleTextSelection);\r\n    document.addEventListener('click', this.boundHandleClickOutside);\r\n    \r\n    console.log('‚úÖ Event listeners attivati con binding corretto - ora testa il mouse!');\r\n    \r\n    // TEST: verifica che i listener siano attaccati\r\n    console.log('üß™ Test listener:', {\r\n      documentExists: !!document,\r\n      hasListeners: 'listeners attached'\r\n    });\r\n  }\r\n\r\n  removeEventListeners() {\r\n    if (this.boundHandleMouseOver) {\r\n      document.removeEventListener('mouseover', this.boundHandleMouseOver);\r\n      document.removeEventListener('mouseout', this.boundHandleMouseOut);\r\n      document.removeEventListener('mouseup', this.boundHandleTextSelection);\r\n      document.removeEventListener('click', this.boundHandleClickOutside);\r\n      console.log('üóëÔ∏è Event listeners rimossi');\r\n    }\r\n  }\r\n\r\n  handleMouseOver(event) {\r\n    console.log('üñ±Ô∏è HOVER DEBUG:', {\r\n      target: event.target,\r\n      tagName: event.target.tagName,\r\n      textContent: event.target.textContent?.slice(0, 30),\r\n      isActive: this.isActive,\r\n      isValidElement: this.isValidTextElement(event.target),\r\n      classList: event.target.classList.toString()\r\n    });\r\n    \r\n    if (!this.isActive || this.isSmartDisabled) {\r\n      console.log('‚ùå Sistema non attivo:', { isActive: this.isActive, isSmartDisabled: this.isSmartDisabled });\r\n      return;\r\n    }\r\n    \r\n    const element = event.target;\r\n    if (!this.isValidTextElement(element)) {\r\n      console.log('‚ùå Elemento non valido');\r\n      return;\r\n    }\r\n    \r\n    const word = this.getWordFromElement(element);\r\n    console.log('üìù Parola estratta:', word);\r\n    \r\n    if (!word || word.length < 3) {\r\n      console.log('‚ùå Parola troppo corta:', word);\r\n      return;\r\n    }\r\n    \r\n    clearTimeout(this.hoverTimeout);\r\n    this.hoverTimeout = setTimeout(() => {\r\n      console.log('üåç Avvio traduzione per:', word);\r\n      this.showHoverTranslation(word, event.clientX, event.clientY);\r\n    }, 800);\r\n  }\r\n\r\n  handleMouseOut(event) {\r\n    clearTimeout(this.hoverTimeout);\r\n    setTimeout(() => {\r\n      if (this.currentPopup && !this.currentPopup.matches(':hover')) {\r\n        this.hideCurrentPopup();\r\n      }\r\n    }, 300);\r\n  }\r\n\r\n  handleTextSelection(event) {\r\n    if (!this.isActive || this.isSmartDisabled) return;\r\n    \r\n    const selection = window.getSelection();\r\n    const selectedText = selection.toString().trim();\r\n    \r\n    if (selectedText.length < 3) return;\r\n    \r\n    console.log('üìù Testo selezionato:', selectedText);\r\n    \r\n    this.hideCurrentPopup();\r\n    \r\n    const range = selection.getRangeAt(0);\r\n    const rect = range.getBoundingClientRect();\r\n    \r\n    this.showTranslationButton(selectedText, rect.right + 10, rect.top);\r\n  }\r\n\r\n  handleClickOutside(event) {\r\n    if (!event.target.closest('.translation-popup') && \r\n        !event.target.closest('.translation-button')) {\r\n      this.hideCurrentPopup();\r\n    }\r\n  }\r\n\r\n  isValidTextElement(element) {\r\n    const invalidTags = ['INPUT', 'BUTTON', 'SELECT', 'TEXTAREA'];\r\n    if (invalidTags.includes(element.tagName)) {\r\n      console.log('‚ùå Tag non valido:', element.tagName);\r\n      return false;\r\n    }\r\n    \r\n    if (element.closest('.translation-popup') || \r\n        element.closest('.supporto-linguistico-widget') ||\r\n        element.closest('.translation-button')) {\r\n      console.log('‚ùå Elemento del sistema di traduzione');\r\n      return false;\r\n    }\r\n    \r\n    const hasText = element.textContent && element.textContent.trim().length > 0;\r\n    if (!hasText) {\r\n      console.log('‚ùå Nessun testo');\r\n    }\r\n    \r\n    return hasText;\r\n  }\r\n\r\n  getWordFromElement(element) {\r\n    const textContent = element.textContent;\r\n    if (!textContent) return null;\r\n    \r\n    const words = textContent.split(/\\s+/);\r\n    const validWord = words.find(word => word.length > 2) || null;\r\n    console.log('üîç Parole trovate:', words, '-> Scelta:', validWord);\r\n    return validWord;\r\n  }\r\n\r\n  async showHoverTranslation(word, x, y) {\r\n    try {\r\n      console.log('üåç Trying to translate:', word);\r\n      \r\n      const cachedTranslation = this.getCachedTranslation(word);\r\n      if (cachedTranslation) {\r\n        console.log('üìö Traduzione da cache:', cachedTranslation);\r\n        this.displayTranslationPopup(word, cachedTranslation, x, y, 'cache');\r\n        return;\r\n      }\r\n      \r\n      const translation = this.getMockTranslation(word);\r\n      if (translation) {\r\n        console.log('üé≠ Traduzione mock:', translation);\r\n        this.displayTranslationPopup(word, translation, x, y, 'mock');\r\n        this.saveToPersonalDictionary(word, translation);\r\n      }\r\n    } catch (error) {\r\n      console.error('‚ùå Errore traduzione hover:', error);\r\n    }\r\n  }\r\n\r\n  showTranslationButton(text, x, y) {\r\n    const existingButton = document.querySelector('.translation-button');\r\n    if (existingButton) existingButton.remove();\r\n    \r\n    console.log('üåç Creando pulsante traduzione per:', text);\r\n    \r\n    const button = document.createElement('button');\r\n    button.className = 'translation-button';\r\n    button.innerHTML = 'üåç Traduci';\r\n    button.style.position = 'fixed';\r\n    button.style.left = `${Math.min(x, window.innerWidth - 100)}px`;\r\n    button.style.top = `${Math.max(y - 30, 10)}px`;\r\n    button.style.zIndex = '10000';\r\n    \r\n    button.onclick = async () => {\r\n      button.innerHTML = '‚è≥ Traducendo...';\r\n      button.disabled = true;\r\n      \r\n      try {\r\n        const translation = this.getMockTranslation(text);\r\n        if (translation) {\r\n          this.displayTranslationPopup(text, translation, x, y - 50, 'selection');\r\n          this.saveToPersonalDictionary(text, translation);\r\n        }\r\n      } catch (error) {\r\n        console.error('‚ùå Errore traduzione selezione:', error);\r\n      } finally {\r\n        button.remove();\r\n      }\r\n    };\r\n    \r\n    document.body.appendChild(button);\r\n    \r\n    setTimeout(() => {\r\n      if (button.parentNode) button.remove();\r\n    }, 5000);\r\n  }\r\n\r\n  getMockTranslation(text) {\r\n    const mockTranslations = {\r\n      'casa': 'house',\r\n      'libro': 'book', \r\n      'scuola': 'school',\r\n      'insegnante': 'teacher',\r\n      'studiare': 'to study',\r\n      'imparare': 'to learn',\r\n      'difficile': 'difficult',\r\n      'facile': 'easy',\r\n      'ciao': 'hello',\r\n      'grazie': 'thank you',\r\n      'prego': 'you\\'re welcome',\r\n      'famiglia': 'family',\r\n      'amico': 'friend',\r\n      'lavoro': 'work',\r\n      'mangiare': 'to eat',\r\n      'bere': 'to drink',\r\n      'dormire': 'to sleep',\r\n      'tempo': 'time',\r\n      'oggi': 'today',\r\n      'domani': 'tomorrow',\r\n      'ieri': 'yesterday',\r\n      'mare': 'sea',\r\n      'acqua': 'water',\r\n      'sabbia': 'sand',\r\n      'pranzo': 'lunch',\r\n      'mangiato': 'eaten',\r\n      'costruito': 'built',\r\n      'castelli': 'castles',\r\n      'nuotato': 'swam',\r\n      'giornata': 'day',\r\n      'perfetta': 'perfect',\r\n      'sono': 'I am',\r\n      'andato': 'went',\r\n      'con': 'with',\r\n      'mia': 'my',\r\n      'era': 'was',\r\n      'calda': 'hot',\r\n      'pulita': 'clean',\r\n      'abbiamo': 'we have',\r\n      'per': 'for',\r\n      'buon': 'good',\r\n      'gelato': 'ice cream',\r\n      'stata': 'been',\r\n      'una': 'a/an'\r\n    };\r\n    \r\n    const lowerText = text.toLowerCase();\r\n    return mockTranslations[lowerText] || `[Traduzione: ${text}]`;\r\n  }\r\n\r\n  displayTranslationPopup(originalText, translation, x, y, source) {\r\n    console.log('üé™ Creando popup:', { originalText, translation, x, y, source });\r\n    \r\n    this.hideCurrentPopup();\r\n    \r\n    const popup = document.createElement('div');\r\n    popup.className = 'translation-popup';\r\n    popup.innerHTML = `\r\n      <div class=\"translation-popup-header\">\r\n        <span class=\"original-text\">${originalText}</span>\r\n        <button class=\"popup-close\" onclick=\"this.parentElement.parentElement.remove()\">√ó</button>\r\n      </div>\r\n      <div class=\"translation-text\">${translation}</div>\r\n      <div class=\"translation-actions\">\r\n        <button class=\"play-audio\" onclick=\"simpleTranslationSystem.playAudio('${originalText}', 'it')\">üîä IT</button>\r\n        <button class=\"save-word\" onclick=\"simpleTranslationSystem.saveToPersonalDictionary('${originalText}', '${translation}')\">üíæ</button>\r\n      </div>\r\n      <div class=\"translation-source\">${source === 'cache' ? 'üìö Salvato' : 'üåê Mock'}</div>\r\n    `;\r\n    \r\n    popup.style.position = 'fixed';\r\n    popup.style.left = `${Math.min(x, window.innerWidth - 250)}px`;\r\n    popup.style.top = `${Math.max(y - 100, 10)}px`;\r\n    popup.style.zIndex = '10001';\r\n    \r\n    document.body.appendChild(popup);\r\n    this.currentPopup = popup;\r\n    \r\n    console.log('‚úÖ Popup creato e aggiunto al DOM');\r\n    \r\n    setTimeout(() => {\r\n      if (popup.parentNode && !popup.matches(':hover')) {\r\n        popup.remove();\r\n      }\r\n    }, 8000);\r\n  }\r\n\r\n  hideCurrentPopup() {\r\n    if (this.currentPopup) {\r\n      this.currentPopup.remove();\r\n      this.currentPopup = null;\r\n    }\r\n    \r\n    const buttons = document.querySelectorAll('.translation-button');\r\n    buttons.forEach(btn => btn.remove());\r\n  }\r\n\r\n  playAudio(text, language) {\r\n    console.log('üîä Playing audio:', text, language);\r\n    if ('speechSynthesis' in window) {\r\n      const utterance = new SpeechSynthesisUtterance(text);\r\n      utterance.lang = language === 'it' ? 'it-IT' : 'en-US';\r\n      utterance.rate = 0.8;\r\n      speechSynthesis.speak(utterance);\r\n    }\r\n  }\r\n\r\n  loadPersonalDictionary() {\r\n    try {\r\n      return JSON.parse(localStorage.getItem('translation_personal_dictionary') || '{}');\r\n    } catch {\r\n      return {};\r\n    }\r\n  }\r\n\r\n  saveToPersonalDictionary(original, translation) {\r\n    this.personalDictionary[original.toLowerCase()] = {\r\n      translation,\r\n      addedAt: new Date().toISOString(),\r\n      usageCount: (this.personalDictionary[original.toLowerCase()]?.usageCount || 0) + 1\r\n    };\r\n    \r\n    localStorage.setItem('translation_personal_dictionary', JSON.stringify(this.personalDictionary));\r\n    console.log(`üíæ Salvato: ${original} ‚Üí ${translation}`);\r\n  }\r\n\r\n  getCachedTranslation(word) {\r\n    const entry = this.personalDictionary[word.toLowerCase()];\r\n    return entry ? entry.translation : null;\r\n  }\r\n\r\n  getPersonalDictionary() {\r\n    return this.personalDictionary;\r\n  }\r\n\r\n  getMostTranslatedWords(limit = 10) {\r\n    return Object.entries(this.personalDictionary)\r\n      .sort(([,a], [,b]) => (b.usageCount || 0) - (a.usageCount || 0))\r\n      .slice(0, limit)\r\n      .map(([word, data]) => ({ word, count: data.usageCount || 0 }));\r\n  }\r\n\r\n  enableSmartDisable() {\r\n    this.isSmartDisabled = true;\r\n    this.removeEventListeners();\r\n    this.hideCurrentPopup();\r\n    console.log('üéØ Smart Disable attivato');\r\n  }\r\n\r\n  disableSmartDisable() {\r\n    this.isSmartDisabled = false;\r\n    if (this.isActive) {\r\n      this.setupEventListeners();\r\n    }\r\n    console.log('‚úÖ Smart Disable disattivato');\r\n  }\r\n\r\n  mapLanguageCode(userLanguageCode) {\r\n    const languageMap = {\r\n      'al': 'sq', 'ko': 'sq', 'hi': 'hi', 'ar': 'ar',\r\n      'zh': 'zh', 'ro': 'ro', 'es': 'es', 'pt': 'pt', 'uk': 'uk'\r\n    };\r\n    return languageMap[userLanguageCode] || 'en';\r\n  }\r\n}\r\n\r\n// Istanza globale\r\nconst simpleTranslationSystem = new SimpleTranslationSystem();\r\n\r\n// Esponi globalmente per i pulsanti\r\nwindow.simpleTranslationSystem = simpleTranslationSystem;\r\n\r\nconst EnhancedSupportoLinguistico = ({ currentSection, isTestMode = false }) => {\r\n  const { user } = useContext(UserContext) || {};\r\n  const [isWidgetVisible, setIsWidgetVisible] = useState(false);\r\n  const [personalDictionary, setPersonalDictionary] = useState({});\r\n  const [mostUsedWords, setMostUsedWords] = useState([]);\r\n\r\n  useEffect(() => {\r\n    console.log('üîç DEBUG COMPLETO:', {\r\n      isTestMode,\r\n      user,\r\n      currentSection,\r\n      pathname: window.location.pathname,\r\n      isSystemActive: simpleTranslationSystem.isActive,\r\n      isSmartDisabled: simpleTranslationSystem.isSmartDisabled\r\n    });\r\n    \r\n    if (!isTestMode && user) {\r\n      simpleTranslationSystem.initialize({ user });\r\n      loadTranslationData();\r\n    }\r\n    \r\n    return () => {\r\n      if (simpleTranslationSystem) {\r\n        simpleTranslationSystem.removeEventListeners();\r\n      }\r\n    };\r\n  }, [user, isTestMode, currentSection]);\r\n\r\n  const loadTranslationData = () => {\r\n    setPersonalDictionary(simpleTranslationSystem.getPersonalDictionary());\r\n    setMostUsedWords(simpleTranslationSystem.getMostTranslatedWords(5));\r\n  };\r\n\r\n  const toggleWidget = () => {\r\n    setIsWidgetVisible(!isWidgetVisible);\r\n    if (!isWidgetVisible) {\r\n      loadTranslationData();\r\n    }\r\n  };\r\n\r\n  const closeWidget = () => {\r\n    setIsWidgetVisible(false);\r\n  };\r\n\r\n  if (isTestMode || !user) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"enhanced-supporto-container\">\r\n      {/* Indicatore stato */}\r\n      <div className={`translation-status ${simpleTranslationSystem.isActive && !simpleTranslationSystem.isSmartDisabled ? 'active' : 'inactive'}`}>\r\n        <div className=\"status-indicator\">\r\n          {simpleTranslationSystem.isActive && !simpleTranslationSystem.isSmartDisabled ? (\r\n            <>\r\n              <span className=\"status-dot active\"></span>\r\n              <span className=\"status-text\">Traduzione attiva</span>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <span className=\"status-dot inactive\"></span>\r\n              <span className=\"status-text\">Traduzione disattiva</span>\r\n            </>\r\n          )}\r\n        </div>\r\n        \r\n        {simpleTranslationSystem.isActive && !simpleTranslationSystem.isSmartDisabled && (\r\n          <div className=\"usage-hint\">\r\n            üí° Passa il mouse su una parola o seleziona del testo per tradurre\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Widget avanzato */}\r\n      {isWidgetVisible && (\r\n        <div className=\"enhanced-supporto-widget\">\r\n          <SupportoLinguistico \r\n            onClose={closeWidget} \r\n            currentSection={currentSection} \r\n          />\r\n          \r\n          {/* Pannello statistiche */}\r\n          <div className=\"translation-stats-panel\">\r\n            <h4>üìä Le tue statistiche</h4>\r\n            \r\n            {mostUsedWords.length > 0 && (\r\n              <div className=\"most-used-section\">\r\n                <h5>üî• Parole pi√π cercate</h5>\r\n                <div className=\"words-list\">\r\n                  {mostUsedWords.map(({ word, count }) => (\r\n                    <div key={word} className=\"word-stat\">\r\n                      <span className=\"word\">{word}</span>\r\n                      <span className=\"count\">{count}x</span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {Object.keys(personalDictionary).length > 0 && (\r\n              <div className=\"personal-dict-section\">\r\n                <h5>üíæ Dizionario Personale ({Object.keys(personalDictionary).length})</h5>\r\n                <div className=\"dict-preview\">\r\n                  {Object.entries(personalDictionary).slice(0, 3).map(([word, data]) => (\r\n                    <div key={word} className=\"dict-item\">\r\n                      <span className=\"word\">{word}</span>\r\n                      <span className=\"translation\">{data.translation}</span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            <div className=\"advanced-controls\">\r\n              <button \r\n                className=\"control-btn\"\r\n                onClick={() => simpleTranslationSystem.isSmartDisabled \r\n                  ? simpleTranslationSystem.disableSmartDisable() \r\n                  : simpleTranslationSystem.enableSmartDisable()}\r\n              >\r\n                üéØ {simpleTranslationSystem.isSmartDisabled ? 'Riattiva' : 'Modalit√† Test'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Pulsante trigger */}\r\n      <button \r\n        className={`enhanced-trigger-button ${Object.keys(personalDictionary).length > 0 ? 'has-stats' : ''}`}\r\n        onClick={toggleWidget}\r\n        title=\"Supporto Linguistico Avanzato\"\r\n      >\r\n        <span className=\"trigger-icon\">üåç</span>\r\n        <span className=\"trigger-text\">Supporto</span>\r\n        {Object.keys(personalDictionary).length > 0 && (\r\n          <span className=\"stats-badge\">\r\n            {Object.keys(personalDictionary).length}\r\n          </span>\r\n        )}\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EnhancedSupportoLinguistico;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}