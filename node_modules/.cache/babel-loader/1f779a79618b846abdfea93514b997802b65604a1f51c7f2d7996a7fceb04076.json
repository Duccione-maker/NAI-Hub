{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Utente\\\\lingua-kai-platform - restructured\\\\src\\\\components\\\\components\\\\SezionePunteggiatura\\\\SezionePunteggiatura.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport './SezionePunteggiatura.css';\n\n// Configurazione temporanea per API, in produzione andrà spostata in un file di configurazione\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_CONFIG = {\n  baseUrl: 'https://api.openai.com/v1/completions',\n  apiKey: process.env.REACT_APP_OPENAI_API_KEY,\n  // Da configurare nelle variabili d'ambiente\n  model: 'text-davinci-003',\n  apiEnabled: false // Impostare a true quando l'API è configurata e pronta\n};\n\n// Testi predefiniti per il fallback (usati quando l'API non è disponibile)\nconst FALLBACK_TEXTS = {\n  facile: [{\n    rawText: \"il gatto dorme sul divano è molto pigro e gli piace stare al caldo la sua padrona gli porta sempre del buon cibo lui miagola quando ha fame tutti in casa lo amano molto\",\n    correctText: \"Il gatto dorme sul divano. È molto pigro e gli piace stare al caldo. La sua padrona gli porta sempre del buon cibo. Lui miagola quando ha fame. Tutti in casa lo amano molto.\"\n  }, {\n    rawText: \"oggi il cielo è azzurro non ci sono nuvole e il sole splende gli uccelli cantano sugli alberi del parco i bambini giocano felici nel prato è davvero una bella giornata di primavera\",\n    correctText: \"Oggi il cielo è azzurro. Non ci sono nuvole e il sole splende. Gli uccelli cantano sugli alberi del parco. I bambini giocano felici nel prato. È davvero una bella giornata di primavera.\"\n  }, {\n    rawText: \"marco va a scuola ogni mattina si sveglia presto e fa colazione poi prende lo zaino con i libri sua madre lo accompagna in macchina a scuola incontra i suoi amici\",\n    correctText: \"Marco va a scuola ogni mattina. Si sveglia presto e fa colazione. Poi prende lo zaino con i libri. Sua madre lo accompagna in macchina. A scuola incontra i suoi amici.\"\n  }],\n  medio: [{\n    rawText: \"la biblioteca comunale della nostra città offre numerosi servizi gratuiti ai cittadini oltre al prestito di libri organizza incontri con autori e laboratori di lettura per bambini gli spazi sono stati recentemente rinnovati con nuove postazioni per lo studio e la consultazione durante l'estate il giardino esterno ospita eventi culturali molto apprezzati\",\n    correctText: \"La biblioteca comunale della nostra città offre numerosi servizi gratuiti ai cittadini. Oltre al prestito di libri, organizza incontri con autori e laboratori di lettura per bambini. Gli spazi sono stati recentemente rinnovati, con nuove postazioni per lo studio e la consultazione. Durante l'estate, il giardino esterno ospita eventi culturali molto apprezzati.\"\n  }, {\n    rawText: \"il fenomeno del cambiamento climatico sta modificando gli ecosistemi di tutto il pianeta gli scienziati osservano con preoccupazione lo scioglimento dei ghiacciai e l'innalzamento del livello dei mari molte specie animali sono a rischio di estinzione a causa della perdita del loro habitat naturale è necessario adottare misure urgenti per ridurre le emissioni di gas serra e proteggere la biodiversità\",\n    correctText: \"Il fenomeno del cambiamento climatico sta modificando gli ecosistemi di tutto il pianeta. Gli scienziati osservano con preoccupazione lo scioglimento dei ghiacciai e l'innalzamento del livello dei mari. Molte specie animali sono a rischio di estinzione a causa della perdita del loro habitat naturale. È necessario adottare misure urgenti per ridurre le emissioni di gas serra e proteggere la biodiversità.\"\n  }, {\n    rawText: \"la cucina italiana è famosa in tutto il mondo per la sua varietà e qualità ogni regione ha le sue specialità tradizionali tramandate di generazione in generazione gli ingredienti sono generalmente semplici ma di alta qualità: olio d'oliva pomodori maturi basilico fresco i piatti più amati sono la pasta al pomodoro la pizza napoletana e il risotto alla milanese\",\n    correctText: \"La cucina italiana è famosa in tutto il mondo per la sua varietà e qualità. Ogni regione ha le sue specialità tradizionali, tramandate di generazione in generazione. Gli ingredienti sono generalmente semplici ma di alta qualità: olio d'oliva, pomodori maturi, basilico fresco. I piatti più amati sono la pasta al pomodoro, la pizza napoletana e il risotto alla milanese.\"\n  }],\n  difficile: [{\n    rawText: \"l'intelligenza artificiale sta rivoluzionando numerosi settori dell'economia globale dall'industria manifatturiera alla finanza dalla sanità all'istruzione i sistemi di apprendimento automatico basati su reti neurali artificiali sono in grado di analizzare enormi quantità di dati e identificare modelli complessi che sfuggirebbero all'analisi umana questioni etiche fondamentali emergono tuttavia riguardo alla privacy dei dati alla trasparenza degli algoritmi e al rischio di amplificare pregiudizi sociali esistenti gli esperti dibattono sulla necessità di un quadro normativo internazionale che possa guidare lo sviluppo responsabile di queste tecnologie\",\n    correctText: \"L'intelligenza artificiale sta rivoluzionando numerosi settori dell'economia globale, dall'industria manifatturiera alla finanza, dalla sanità all'istruzione. I sistemi di apprendimento automatico, basati su reti neurali artificiali, sono in grado di analizzare enormi quantità di dati e identificare modelli complessi che sfuggirebbero all'analisi umana. Questioni etiche fondamentali emergono tuttavia riguardo alla privacy dei dati, alla trasparenza degli algoritmi e al rischio di amplificare pregiudizi sociali esistenti. Gli esperti dibattono sulla necessità di un quadro normativo internazionale che possa guidare lo sviluppo responsabile di queste tecnologie.\"\n  }, {\n    rawText: \"la letteratura del novecento italiano si caratterizza per una pluralità di voci e correnti in costante dialogo con le avanguardie europee ma profondamente radicata nelle specificità culturali nazionali autori come italo calvino hanno saputo coniugare sperimentazione formale e leggibilità creando opere che esplorano temi universali attraverso linguaggi innovativi il neorealismo del dopoguerra ha rappresentato una risposta estetica e morale alle tragedie del fascismo e del conflitto mondiale mentre la neoavanguardia degli anni sessanta ha radicalmente messo in discussione le convenzioni narrative tradizionali questa tensione tra impegno civile e ricerca espressiva rimane una costante nella produzione letteraria italiana contemporanea\",\n    correctText: \"La letteratura del Novecento italiano si caratterizza per una pluralità di voci e correnti, in costante dialogo con le avanguardie europee ma profondamente radicata nelle specificità culturali nazionali. Autori come Italo Calvino hanno saputo coniugare sperimentazione formale e leggibilità, creando opere che esplorano temi universali attraverso linguaggi innovativi. Il neorealismo del dopoguerra ha rappresentato una risposta estetica e morale alle tragedie del fascismo e del conflitto mondiale, mentre la neoavanguardia degli anni Sessanta ha radicalmente messo in discussione le convenzioni narrative tradizionali. Questa tensione tra impegno civile e ricerca espressiva rimane una costante nella produzione letteraria italiana contemporanea.\"\n  }, {\n    rawText: \"il dibattito sull'urbanistica sostenibile si intensifica di fronte alle sfide poste dai cambiamenti climatici e dalla crescente concentrazione della popolazione mondiale nelle aree metropolitane le città intelligenti del futuro dovranno integrare tecnologie digitali avanzate con soluzioni ecologiche innovative: edifici a energia zero trasporti pubblici elettrificati infrastrutture verdi capillari e sistemi circolari di gestione dei rifiuti la partecipazione attiva dei cittadini nella pianificazione urbana diventa essenziale per garantire che questi sviluppi rispondano effettivamente ai bisogni delle comunità locali evitando processi di gentrificazione che potrebbero esacerbare le disuguaglianze sociali esistenti\",\n    correctText: \"Il dibattito sull'urbanistica sostenibile si intensifica di fronte alle sfide poste dai cambiamenti climatici e dalla crescente concentrazione della popolazione mondiale nelle aree metropolitane. Le città intelligenti del futuro dovranno integrare tecnologie digitali avanzate con soluzioni ecologiche innovative: edifici a energia zero, trasporti pubblici elettrificati, infrastrutture verdi capillari e sistemi circolari di gestione dei rifiuti. La partecipazione attiva dei cittadini nella pianificazione urbana diventa essenziale per garantire che questi sviluppi rispondano effettivamente ai bisogni delle comunità locali, evitando processi di gentrificazione che potrebbero esacerbare le disuguaglianze sociali esistenti.\"\n  }]\n};\nconst SezionePunteggiatura = () => {\n  _s();\n  // Stati del componente\n  const [currentLevel, setCurrentLevel] = useState('facile');\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentExercise, setCurrentExercise] = useState(null);\n  const [userText, setUserText] = useState('');\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [feedback, setFeedback] = useState(null);\n  const [score, setScore] = useState(0);\n  const [audioElement, setAudioElement] = useState(null);\n  const [exerciseHistory, setExerciseHistory] = useState([]);\n\n  // Refs\n  const textEditorRef = useRef(null);\n\n  // Carica un nuovo esercizio quando il componente viene montato o cambia il livello\n  useEffect(() => {\n    loadNewExercise();\n  }, [currentLevel]);\n\n  // Funzione per caricare un nuovo esercizio\n  const loadNewExercise = async () => {\n    setIsLoading(true);\n    setUserText('');\n    setIsSubmitted(false);\n    setFeedback(null);\n    try {\n      let exerciseData;\n      if (API_CONFIG.apiEnabled) {\n        // Ottieni il testo dall'API\n        exerciseData = await fetchExerciseFromAPI(currentLevel);\n      } else {\n        // Usa i testi fallback\n        exerciseData = getRandomFallbackText(currentLevel);\n      }\n\n      // Aggiunge l'esercizio alla storia (per evitare ripetizioni)\n      setExerciseHistory(prev => [...prev, exerciseData.rawText]);\n\n      // Imposta il nuovo esercizio\n      setCurrentExercise(exerciseData);\n\n      // Genera l'audio di riferimento\n      generateReferenceAudio(exerciseData.correctText);\n    } catch (error) {\n      console.error(\"Errore nel caricamento dell'esercizio:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Funzione per generare l'audio di riferimento (simulata)\n  const generateReferenceAudio = text => {\n    // In un'implementazione reale, qui chiameresti un servizio TTS\n    // Per ora, creiamo un semplice elemento audio simulato\n    const audio = new Audio();\n    setAudioElement(audio);\n  };\n\n  // Funzione per ottenere un testo casuale da quelli fallback\n  const getRandomFallbackText = level => {\n    const availableTexts = FALLBACK_TEXTS[level];\n\n    // Evita testi già usati di recente, se possibile\n    let filteredTexts = availableTexts.filter(text => !exerciseHistory.includes(text.rawText));\n\n    // Se tutti i testi sono stati usati, resetta la storia\n    if (filteredTexts.length === 0) {\n      setExerciseHistory([]);\n      filteredTexts = availableTexts;\n    }\n\n    // Seleziona un testo casuale\n    const randomIndex = Math.floor(Math.random() * filteredTexts.length);\n    return filteredTexts[randomIndex];\n  };\n\n  // Funzione per ottenere un testo dall'API (esempio con OpenAI)\n  const fetchExerciseFromAPI = async level => {\n    // Questa è una funzione di esempio, andrà adattata all'API specifica che utilizzerai\n\n    // Definisci il prompt in base al livello\n    let prompt, maxTokens;\n    switch (level) {\n      case 'facile':\n        prompt = \"Genera un breve testo di circa 5 frasi semplici in italiano su un argomento quotidiano. Fornisci due versioni: una senza punteggiatura e maiuscole, e una versione corretta.\";\n        maxTokens = 300;\n        break;\n      case 'medio':\n        prompt = \"Genera un testo di media complessità in italiano di circa 4-5 frasi su un argomento culturale o scientifico. Fornisci due versioni: una senza punteggiatura e maiuscole, e una versione corretta.\";\n        maxTokens = 500;\n        break;\n      case 'difficile':\n        prompt = \"Genera un testo complesso in italiano di circa 4-5 frasi lunghe su un argomento accademico o specialistico. Fornisci due versioni: una senza punteggiatura e maiuscole, e una versione corretta.\";\n        maxTokens = 700;\n        break;\n      default:\n        prompt = \"Genera un breve testo in italiano. Fornisci due versioni: una senza punteggiatura e maiuscole, e una versione corretta.\";\n        maxTokens = 300;\n    }\n    try {\n      const response = await fetch(API_CONFIG.baseUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${API_CONFIG.apiKey}`\n        },\n        body: JSON.stringify({\n          model: API_CONFIG.model,\n          prompt: prompt,\n          max_tokens: maxTokens,\n          temperature: 0.7\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Errore API: ${response.status}`);\n      }\n      const data = await response.json();\n      const content = data.choices[0].text.trim();\n\n      // Estrai le due versioni del testo dalla risposta\n      // Nota: Questa parte dipende dal formato specifico della risposta API\n      // e potrebbe richiedere adattamenti\n      const parts = content.split('\\n\\n');\n      let rawText = '';\n      let correctText = '';\n      if (parts.length >= 2) {\n        // Cerca le sezioni che contengono le versioni\n        for (const part of parts) {\n          if (part.toLowerCase().includes('senza punteggiatura') || part.toLowerCase().includes('versione raw')) {\n            rawText = part.replace(/^.*?:/, '').trim();\n          } else if (part.toLowerCase().includes('versione corretta') || part.toLowerCase().includes('con punteggiatura')) {\n            correctText = part.replace(/^.*?:/, '').trim();\n          }\n        }\n      }\n\n      // Se non è stato possibile estrarre entrambe le versioni, usa un fallback\n      if (!rawText || !correctText) {\n        return getRandomFallbackText(level);\n      }\n      return {\n        rawText,\n        correctText\n      };\n    } catch (error) {\n      console.error('Errore nella chiamata API:', error);\n      // In caso di errore, usa un testo di fallback\n      return getRandomFallbackText(level);\n    }\n  };\n\n  // Gestisci il cambio di livello\n  const handleLevelChange = e => {\n    setCurrentLevel(e.target.value);\n  };\n\n  // Gestisci il cambio di testo dell'utente\n  const handleTextChange = e => {\n    setUserText(e.target.value);\n  };\n\n  // Gestisci il play dell'audio di riferimento\n  const playReferenceAudio = () => {\n    // In un'implementazione reale, riproduce l'audio TTS\n    // Per simulazione, mostriamo un messaggio\n    alert(\"In un'implementazione reale, qui ascolteresti la lettura corretta del testo con la punteggiatura appropriata.\");\n  };\n\n  // Invia l'esercizio per la valutazione\n  const submitExercise = () => {\n    if (!currentExercise || !userText) return;\n\n    // Calcola il punteggio e prepara il feedback\n    const {\n      score,\n      feedback\n    } = evaluateUserText(userText, currentExercise.correctText);\n    setScore(score);\n    setFeedback(feedback);\n    setIsSubmitted(true);\n  };\n\n  // Valutazione del testo inserito dall'utente\n  const evaluateUserText = (userText, correctText) => {\n    // Calcolo degli errori di punteggiatura\n    const userPunctuation = extractPunctuation(userText);\n    const correctPunctuation = extractPunctuation(correctText);\n\n    // Verifica maiuscole\n    const userCapitalization = extractCapitalization(userText);\n    const correctCapitalization = extractCapitalization(correctText);\n\n    // Calcola errori e punteggio\n    const punctuationErrors = comparePunctuation(userPunctuation, correctPunctuation);\n    const capitalizationErrors = compareCapitalization(userCapitalization, correctCapitalization);\n    const totalErrors = punctuationErrors.length + capitalizationErrors.length;\n    const maxScore = correctPunctuation.length + correctCapitalization.length;\n    const userScore = Math.max(0, maxScore - totalErrors);\n\n    // Calcola percentuale\n    const percentage = Math.round(userScore / maxScore * 100);\n\n    // Prepara feedback\n    const feedback = {\n      punctuationErrors,\n      capitalizationErrors,\n      percentage,\n      suggestions: generateSuggestions(punctuationErrors, capitalizationErrors)\n    };\n    return {\n      score: percentage,\n      feedback\n    };\n  };\n\n  // Estrae la punteggiatura da un testo\n  const extractPunctuation = text => {\n    const punctuation = [];\n    let currentPos = 0;\n\n    // Trova tutta la punteggiatura nel testo\n    const regex = /[.,;:!?\"()]/g;\n    let match;\n    while ((match = regex.exec(text)) !== null) {\n      punctuation.push({\n        char: match[0],\n        position: match.index,\n        context: text.substring(Math.max(0, match.index - 10), Math.min(text.length, match.index + 10))\n      });\n      currentPos = match.index + 1;\n    }\n    return punctuation;\n  };\n\n  // Estrae le maiuscole da un testo\n  const extractCapitalization = text => {\n    const caps = [];\n\n    // Trova tutte le maiuscole nel testo\n    const lines = text.split(/[.!?]\\s+/);\n    let currentPos = 0;\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i].trim();\n      if (line.length > 0) {\n        const firstChar = line[0];\n        if (firstChar === firstChar.toUpperCase() && firstChar !== firstChar.toLowerCase()) {\n          caps.push({\n            char: firstChar,\n            position: currentPos,\n            context: line.substring(0, Math.min(20, line.length))\n          });\n        }\n      }\n\n      // Aggiorna la posizione per la prossima linea\n      currentPos += lines[i].length + 2; // +2 per il separatore e lo spazio\n    }\n    return caps;\n  };\n\n  // Confronta la punteggiatura dell'utente con quella corretta\n  const comparePunctuation = (userPunct, correctPunct) => {\n    const errors = [];\n\n    // Verifica punteggiatura mancante\n    correctPunct.forEach(punct => {\n      const found = userPunct.some(up => Math.abs(up.position - punct.position) < 5 && up.char === punct.char);\n      if (!found) {\n        errors.push({\n          type: 'missing',\n          char: punct.char,\n          context: punct.context,\n          message: `Manca un segno di ${getPunctuationName(punct.char)} qui: \"${punct.context}\"`\n        });\n      }\n    });\n\n    // Verifica punteggiatura errata o in eccesso\n    userPunct.forEach(punct => {\n      const found = correctPunct.some(cp => Math.abs(cp.position - punct.position) < 5 && cp.char === punct.char);\n      if (!found) {\n        const nearbyCorrect = correctPunct.find(cp => Math.abs(cp.position - punct.position) < 5);\n        if (nearbyCorrect) {\n          errors.push({\n            type: 'wrong',\n            char: punct.char,\n            correctChar: nearbyCorrect.char,\n            context: punct.context,\n            message: `Hai usato ${getPunctuationName(punct.char)} invece di ${getPunctuationName(nearbyCorrect.char)} qui: \"${punct.context}\"`\n          });\n        } else {\n          errors.push({\n            type: 'extra',\n            char: punct.char,\n            context: punct.context,\n            message: `C'è un segno di ${getPunctuationName(punct.char)} in eccesso qui: \"${punct.context}\"`\n          });\n        }\n      }\n    });\n    return errors;\n  };\n\n  // Confronta le maiuscole dell'utente con quelle corrette\n  const compareCapitalization = (userCaps, correctCaps) => {\n    const errors = [];\n\n    // Verifica maiuscole mancanti\n    correctCaps.forEach(cap => {\n      const found = userCaps.some(uc => Math.abs(uc.position - cap.position) < 10 && uc.char.toUpperCase() === cap.char.toUpperCase());\n      if (!found) {\n        errors.push({\n          type: 'missing_cap',\n          context: cap.context,\n          message: `Manca una lettera maiuscola all'inizio di questa frase: \"${cap.context}\"`\n        });\n      }\n    });\n    return errors;\n  };\n\n  // Genera suggerimenti in base agli errori\n  const generateSuggestions = (punctErrors, capErrors) => {\n    const suggestions = [];\n\n    // Analizza pattern di errori\n    const missingPoints = punctErrors.filter(e => e.type === 'missing' && e.char === '.').length;\n    const missingCommas = punctErrors.filter(e => e.type === 'missing' && e.char === ',').length;\n    const missingCaps = capErrors.length;\n\n    // Genera suggerimenti specifici\n    if (missingPoints > 1) {\n      suggestions.push(\"Ricorda di separare le frasi con un punto. Ogni frase completa dovrebbe terminare con un punto.\");\n    }\n    if (missingCommas > 1) {\n      suggestions.push(\"Usa le virgole per separare elementi di un elenco o per dividere parti di una frase.\");\n    }\n    if (missingCaps > 1) {\n      suggestions.push(\"Inizia ogni frase con una lettera maiuscola dopo un punto, un punto esclamativo o un punto interrogativo.\");\n    }\n\n    // Aggiungi suggerimenti generali\n    if (punctErrors.length > 0 || capErrors.length > 0) {\n      suggestions.push(\"Rileggi sempre il testo ad alta voce per capire dove servono le pause (virgole, punti) e dove iniziano nuove frasi (maiuscole).\");\n    }\n    return suggestions;\n  };\n\n  // Ottieni il nome del segno di punteggiatura\n  const getPunctuationName = char => {\n    const names = {\n      '.': 'punto',\n      ',': 'virgola',\n      ';': 'punto e virgola',\n      ':': 'due punti',\n      '!': 'punto esclamativo',\n      '?': 'punto interrogativo',\n      '\"': 'virgolette',\n      '(': 'parentesi',\n      ')': 'parentesi'\n    };\n    return names[char] || char;\n  };\n\n  // Inizia un nuovo esercizio\n  const startNewExercise = () => {\n    loadNewExercise();\n  };\n\n  // Renderizza il feedback\n  const renderFeedback = () => {\n    if (!feedback) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"punteggiatura-feedback\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feedback-score\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"score-circle\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [feedback.percentage, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"score-label\",\n          children: \"Punteggio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feedback-details\",\n        children: [feedback.punctuationErrors.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"errors-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Errori di punteggiatura:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [feedback.punctuationErrors.slice(0, 5).map((error, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: error.message\n            }, `punct-${index}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 19\n            }, this)), feedback.punctuationErrors.length > 5 && /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [\"...e altri \", feedback.punctuationErrors.length - 5, \" errori.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 13\n        }, this), feedback.capitalizationErrors.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"errors-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Errori di maiuscole:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [feedback.capitalizationErrors.slice(0, 5).map((error, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: error.message\n            }, `cap-${index}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 19\n            }, this)), feedback.capitalizationErrors.length > 5 && /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [\"...e altri \", feedback.capitalizationErrors.length - 5, \" errori.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 13\n        }, this), feedback.suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"suggestions-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Suggerimenti:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: feedback.suggestions.map((suggestion, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: suggestion\n            }, `sugg-${index}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feedback-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"primary-btn\",\n          onClick: startNewExercise,\n          children: \"Nuovo Esercizio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sezione-punteggiatura-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"punteggiatura-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Esercizi di Punteggiatura\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"level-selector\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Livello:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: currentLevel,\n          onChange: handleLevelChange,\n          disabled: isLoading || isSubmitted,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"facile\",\n            children: \"Facile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"medio\",\n            children: \"Medio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"difficile\",\n            children: \"Difficile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"exercise-container\",\n      children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-indicator\",\n        children: \"Caricamento dell'esercizio...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"exercise-instructions\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Ascolta l'audio e aggiungi la punteggiatura corretta al testo sottostante.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Ricorda di inserire anche le maiuscole dove necessario.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 550,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"audio-btn\",\n            onClick: playReferenceAudio,\n            disabled: !currentExercise,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-volume-up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 17\n            }, this), \" Ascolta il testo\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 13\n        }, this), currentExercise && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"exercise-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"raw-text\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Testo da correggere:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: currentExercise.rawText\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 565,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 563,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-editor-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Inserisci la punteggiatura:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              ref: textEditorRef,\n              value: userText,\n              onChange: handleTextChange,\n              placeholder: \"Digita qui il testo con la punteggiatura corretta...\",\n              className: \"punctuation-editor\",\n              disabled: isSubmitted\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 19\n            }, this), !isSubmitted && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"editor-actions\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"primary-btn\",\n                onClick: submitExercise,\n                disabled: !userText.trim(),\n                children: \"Verifica\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 580,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 17\n          }, this), isSubmitted && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"correct-text\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Testo corretto:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: currentExercise.correctText\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 15\n        }, this), isSubmitted && renderFeedback()]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 543,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 525,\n    columnNumber: 5\n  }, this);\n};\n_s(SezionePunteggiatura, \"YbCYMrd1C6MId2cLigaqQ6ENnsQ=\");\n_c = SezionePunteggiatura;\nexport default SezionePunteggiatura;\nvar _c;\n$RefreshReg$(_c, \"SezionePunteggiatura\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","Fragment","_Fragment","API_CONFIG","baseUrl","apiKey","process","env","REACT_APP_OPENAI_API_KEY","model","apiEnabled","FALLBACK_TEXTS","facile","rawText","correctText","medio","difficile","SezionePunteggiatura","_s","currentLevel","setCurrentLevel","isLoading","setIsLoading","currentExercise","setCurrentExercise","userText","setUserText","isSubmitted","setIsSubmitted","feedback","setFeedback","score","setScore","audioElement","setAudioElement","exerciseHistory","setExerciseHistory","textEditorRef","loadNewExercise","exerciseData","fetchExerciseFromAPI","getRandomFallbackText","prev","generateReferenceAudio","error","console","text","audio","Audio","level","availableTexts","filteredTexts","filter","includes","length","randomIndex","Math","floor","random","prompt","maxTokens","response","fetch","method","headers","body","JSON","stringify","max_tokens","temperature","ok","Error","status","data","json","content","choices","trim","parts","split","part","toLowerCase","replace","handleLevelChange","e","target","value","handleTextChange","playReferenceAudio","alert","submitExercise","evaluateUserText","userPunctuation","extractPunctuation","correctPunctuation","userCapitalization","extractCapitalization","correctCapitalization","punctuationErrors","comparePunctuation","capitalizationErrors","compareCapitalization","totalErrors","maxScore","userScore","max","percentage","round","suggestions","generateSuggestions","punctuation","currentPos","regex","match","exec","push","char","position","index","context","substring","min","caps","lines","i","line","firstChar","toUpperCase","userPunct","correctPunct","errors","forEach","punct","found","some","up","abs","type","message","getPunctuationName","cp","nearbyCorrect","find","correctChar","userCaps","correctCaps","cap","uc","punctErrors","capErrors","missingPoints","missingCommas","missingCaps","names","startNewExercise","renderFeedback","className","children","fileName","_jsxFileName","lineNumber","columnNumber","slice","map","suggestion","onClick","onChange","disabled","ref","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/Utente/lingua-kai-platform - restructured/src/components/components/SezionePunteggiatura/SezionePunteggiatura.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport './SezionePunteggiatura.css';\r\n\r\n// Configurazione temporanea per API, in produzione andrà spostata in un file di configurazione\r\nconst API_CONFIG = {\r\n  baseUrl: 'https://api.openai.com/v1/completions',\r\n  apiKey: process.env.REACT_APP_OPENAI_API_KEY, // Da configurare nelle variabili d'ambiente\r\n  model: 'text-davinci-003',\r\n  apiEnabled: false // Impostare a true quando l'API è configurata e pronta\r\n};\r\n\r\n// Testi predefiniti per il fallback (usati quando l'API non è disponibile)\r\nconst FALLBACK_TEXTS = {\r\n  facile: [\r\n    {\r\n      rawText: \"il gatto dorme sul divano è molto pigro e gli piace stare al caldo la sua padrona gli porta sempre del buon cibo lui miagola quando ha fame tutti in casa lo amano molto\",\r\n      correctText: \"Il gatto dorme sul divano. È molto pigro e gli piace stare al caldo. La sua padrona gli porta sempre del buon cibo. Lui miagola quando ha fame. Tutti in casa lo amano molto.\"\r\n    },\r\n    {\r\n      rawText: \"oggi il cielo è azzurro non ci sono nuvole e il sole splende gli uccelli cantano sugli alberi del parco i bambini giocano felici nel prato è davvero una bella giornata di primavera\",\r\n      correctText: \"Oggi il cielo è azzurro. Non ci sono nuvole e il sole splende. Gli uccelli cantano sugli alberi del parco. I bambini giocano felici nel prato. È davvero una bella giornata di primavera.\"\r\n    },\r\n    {\r\n      rawText: \"marco va a scuola ogni mattina si sveglia presto e fa colazione poi prende lo zaino con i libri sua madre lo accompagna in macchina a scuola incontra i suoi amici\",\r\n      correctText: \"Marco va a scuola ogni mattina. Si sveglia presto e fa colazione. Poi prende lo zaino con i libri. Sua madre lo accompagna in macchina. A scuola incontra i suoi amici.\"\r\n    }\r\n  ],\r\n  medio: [\r\n    {\r\n      rawText: \"la biblioteca comunale della nostra città offre numerosi servizi gratuiti ai cittadini oltre al prestito di libri organizza incontri con autori e laboratori di lettura per bambini gli spazi sono stati recentemente rinnovati con nuove postazioni per lo studio e la consultazione durante l'estate il giardino esterno ospita eventi culturali molto apprezzati\",\r\n      correctText: \"La biblioteca comunale della nostra città offre numerosi servizi gratuiti ai cittadini. Oltre al prestito di libri, organizza incontri con autori e laboratori di lettura per bambini. Gli spazi sono stati recentemente rinnovati, con nuove postazioni per lo studio e la consultazione. Durante l'estate, il giardino esterno ospita eventi culturali molto apprezzati.\"\r\n    },\r\n    {\r\n      rawText: \"il fenomeno del cambiamento climatico sta modificando gli ecosistemi di tutto il pianeta gli scienziati osservano con preoccupazione lo scioglimento dei ghiacciai e l'innalzamento del livello dei mari molte specie animali sono a rischio di estinzione a causa della perdita del loro habitat naturale è necessario adottare misure urgenti per ridurre le emissioni di gas serra e proteggere la biodiversità\",\r\n      correctText: \"Il fenomeno del cambiamento climatico sta modificando gli ecosistemi di tutto il pianeta. Gli scienziati osservano con preoccupazione lo scioglimento dei ghiacciai e l'innalzamento del livello dei mari. Molte specie animali sono a rischio di estinzione a causa della perdita del loro habitat naturale. È necessario adottare misure urgenti per ridurre le emissioni di gas serra e proteggere la biodiversità.\"\r\n    },\r\n    {\r\n      rawText: \"la cucina italiana è famosa in tutto il mondo per la sua varietà e qualità ogni regione ha le sue specialità tradizionali tramandate di generazione in generazione gli ingredienti sono generalmente semplici ma di alta qualità: olio d'oliva pomodori maturi basilico fresco i piatti più amati sono la pasta al pomodoro la pizza napoletana e il risotto alla milanese\",\r\n      correctText: \"La cucina italiana è famosa in tutto il mondo per la sua varietà e qualità. Ogni regione ha le sue specialità tradizionali, tramandate di generazione in generazione. Gli ingredienti sono generalmente semplici ma di alta qualità: olio d'oliva, pomodori maturi, basilico fresco. I piatti più amati sono la pasta al pomodoro, la pizza napoletana e il risotto alla milanese.\"\r\n    }\r\n  ],\r\n  difficile: [\r\n    {\r\n      rawText: \"l'intelligenza artificiale sta rivoluzionando numerosi settori dell'economia globale dall'industria manifatturiera alla finanza dalla sanità all'istruzione i sistemi di apprendimento automatico basati su reti neurali artificiali sono in grado di analizzare enormi quantità di dati e identificare modelli complessi che sfuggirebbero all'analisi umana questioni etiche fondamentali emergono tuttavia riguardo alla privacy dei dati alla trasparenza degli algoritmi e al rischio di amplificare pregiudizi sociali esistenti gli esperti dibattono sulla necessità di un quadro normativo internazionale che possa guidare lo sviluppo responsabile di queste tecnologie\",\r\n      correctText: \"L'intelligenza artificiale sta rivoluzionando numerosi settori dell'economia globale, dall'industria manifatturiera alla finanza, dalla sanità all'istruzione. I sistemi di apprendimento automatico, basati su reti neurali artificiali, sono in grado di analizzare enormi quantità di dati e identificare modelli complessi che sfuggirebbero all'analisi umana. Questioni etiche fondamentali emergono tuttavia riguardo alla privacy dei dati, alla trasparenza degli algoritmi e al rischio di amplificare pregiudizi sociali esistenti. Gli esperti dibattono sulla necessità di un quadro normativo internazionale che possa guidare lo sviluppo responsabile di queste tecnologie.\"\r\n    },\r\n    {\r\n      rawText: \"la letteratura del novecento italiano si caratterizza per una pluralità di voci e correnti in costante dialogo con le avanguardie europee ma profondamente radicata nelle specificità culturali nazionali autori come italo calvino hanno saputo coniugare sperimentazione formale e leggibilità creando opere che esplorano temi universali attraverso linguaggi innovativi il neorealismo del dopoguerra ha rappresentato una risposta estetica e morale alle tragedie del fascismo e del conflitto mondiale mentre la neoavanguardia degli anni sessanta ha radicalmente messo in discussione le convenzioni narrative tradizionali questa tensione tra impegno civile e ricerca espressiva rimane una costante nella produzione letteraria italiana contemporanea\",\r\n      correctText: \"La letteratura del Novecento italiano si caratterizza per una pluralità di voci e correnti, in costante dialogo con le avanguardie europee ma profondamente radicata nelle specificità culturali nazionali. Autori come Italo Calvino hanno saputo coniugare sperimentazione formale e leggibilità, creando opere che esplorano temi universali attraverso linguaggi innovativi. Il neorealismo del dopoguerra ha rappresentato una risposta estetica e morale alle tragedie del fascismo e del conflitto mondiale, mentre la neoavanguardia degli anni Sessanta ha radicalmente messo in discussione le convenzioni narrative tradizionali. Questa tensione tra impegno civile e ricerca espressiva rimane una costante nella produzione letteraria italiana contemporanea.\"\r\n    },\r\n    {\r\n      rawText: \"il dibattito sull'urbanistica sostenibile si intensifica di fronte alle sfide poste dai cambiamenti climatici e dalla crescente concentrazione della popolazione mondiale nelle aree metropolitane le città intelligenti del futuro dovranno integrare tecnologie digitali avanzate con soluzioni ecologiche innovative: edifici a energia zero trasporti pubblici elettrificati infrastrutture verdi capillari e sistemi circolari di gestione dei rifiuti la partecipazione attiva dei cittadini nella pianificazione urbana diventa essenziale per garantire che questi sviluppi rispondano effettivamente ai bisogni delle comunità locali evitando processi di gentrificazione che potrebbero esacerbare le disuguaglianze sociali esistenti\",\r\n      correctText: \"Il dibattito sull'urbanistica sostenibile si intensifica di fronte alle sfide poste dai cambiamenti climatici e dalla crescente concentrazione della popolazione mondiale nelle aree metropolitane. Le città intelligenti del futuro dovranno integrare tecnologie digitali avanzate con soluzioni ecologiche innovative: edifici a energia zero, trasporti pubblici elettrificati, infrastrutture verdi capillari e sistemi circolari di gestione dei rifiuti. La partecipazione attiva dei cittadini nella pianificazione urbana diventa essenziale per garantire che questi sviluppi rispondano effettivamente ai bisogni delle comunità locali, evitando processi di gentrificazione che potrebbero esacerbare le disuguaglianze sociali esistenti.\"\r\n    }\r\n  ]\r\n};\r\n\r\nconst SezionePunteggiatura = () => {\r\n  // Stati del componente\r\n  const [currentLevel, setCurrentLevel] = useState('facile');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [currentExercise, setCurrentExercise] = useState(null);\r\n  const [userText, setUserText] = useState('');\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n  const [feedback, setFeedback] = useState(null);\r\n  const [score, setScore] = useState(0);\r\n  const [audioElement, setAudioElement] = useState(null);\r\n  const [exerciseHistory, setExerciseHistory] = useState([]);\r\n  \r\n  // Refs\r\n  const textEditorRef = useRef(null);\r\n  \r\n  // Carica un nuovo esercizio quando il componente viene montato o cambia il livello\r\n  useEffect(() => {\r\n    loadNewExercise();\r\n  }, [currentLevel]);\r\n  \r\n  // Funzione per caricare un nuovo esercizio\r\n  const loadNewExercise = async () => {\r\n    setIsLoading(true);\r\n    setUserText('');\r\n    setIsSubmitted(false);\r\n    setFeedback(null);\r\n    \r\n    try {\r\n      let exerciseData;\r\n      \r\n      if (API_CONFIG.apiEnabled) {\r\n        // Ottieni il testo dall'API\r\n        exerciseData = await fetchExerciseFromAPI(currentLevel);\r\n      } else {\r\n        // Usa i testi fallback\r\n        exerciseData = getRandomFallbackText(currentLevel);\r\n      }\r\n      \r\n      // Aggiunge l'esercizio alla storia (per evitare ripetizioni)\r\n      setExerciseHistory(prev => [...prev, exerciseData.rawText]);\r\n      \r\n      // Imposta il nuovo esercizio\r\n      setCurrentExercise(exerciseData);\r\n      \r\n      // Genera l'audio di riferimento\r\n      generateReferenceAudio(exerciseData.correctText);\r\n      \r\n    } catch (error) {\r\n      console.error(\"Errore nel caricamento dell'esercizio:\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  \r\n  // Funzione per generare l'audio di riferimento (simulata)\r\n  const generateReferenceAudio = (text) => {\r\n    // In un'implementazione reale, qui chiameresti un servizio TTS\r\n    // Per ora, creiamo un semplice elemento audio simulato\r\n    const audio = new Audio();\r\n    setAudioElement(audio);\r\n  };\r\n  \r\n  // Funzione per ottenere un testo casuale da quelli fallback\r\n  const getRandomFallbackText = (level) => {\r\n    const availableTexts = FALLBACK_TEXTS[level];\r\n    \r\n    // Evita testi già usati di recente, se possibile\r\n    let filteredTexts = availableTexts.filter(text => \r\n      !exerciseHistory.includes(text.rawText)\r\n    );\r\n    \r\n    // Se tutti i testi sono stati usati, resetta la storia\r\n    if (filteredTexts.length === 0) {\r\n      setExerciseHistory([]);\r\n      filteredTexts = availableTexts;\r\n    }\r\n    \r\n    // Seleziona un testo casuale\r\n    const randomIndex = Math.floor(Math.random() * filteredTexts.length);\r\n    return filteredTexts[randomIndex];\r\n  };\r\n  \r\n  // Funzione per ottenere un testo dall'API (esempio con OpenAI)\r\n  const fetchExerciseFromAPI = async (level) => {\r\n    // Questa è una funzione di esempio, andrà adattata all'API specifica che utilizzerai\r\n    \r\n    // Definisci il prompt in base al livello\r\n    let prompt, maxTokens;\r\n    switch(level) {\r\n      case 'facile':\r\n        prompt = \"Genera un breve testo di circa 5 frasi semplici in italiano su un argomento quotidiano. Fornisci due versioni: una senza punteggiatura e maiuscole, e una versione corretta.\";\r\n        maxTokens = 300;\r\n        break;\r\n      case 'medio':\r\n        prompt = \"Genera un testo di media complessità in italiano di circa 4-5 frasi su un argomento culturale o scientifico. Fornisci due versioni: una senza punteggiatura e maiuscole, e una versione corretta.\";\r\n        maxTokens = 500;\r\n        break;\r\n      case 'difficile':\r\n        prompt = \"Genera un testo complesso in italiano di circa 4-5 frasi lunghe su un argomento accademico o specialistico. Fornisci due versioni: una senza punteggiatura e maiuscole, e una versione corretta.\";\r\n        maxTokens = 700;\r\n        break;\r\n      default:\r\n        prompt = \"Genera un breve testo in italiano. Fornisci due versioni: una senza punteggiatura e maiuscole, e una versione corretta.\";\r\n        maxTokens = 300;\r\n    }\r\n    \r\n    try {\r\n      const response = await fetch(API_CONFIG.baseUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${API_CONFIG.apiKey}`\r\n        },\r\n        body: JSON.stringify({\r\n          model: API_CONFIG.model,\r\n          prompt: prompt,\r\n          max_tokens: maxTokens,\r\n          temperature: 0.7\r\n        })\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`Errore API: ${response.status}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      const content = data.choices[0].text.trim();\r\n      \r\n      // Estrai le due versioni del testo dalla risposta\r\n      // Nota: Questa parte dipende dal formato specifico della risposta API\r\n      // e potrebbe richiedere adattamenti\r\n      const parts = content.split('\\n\\n');\r\n      \r\n      let rawText = '';\r\n      let correctText = '';\r\n      \r\n      if (parts.length >= 2) {\r\n        // Cerca le sezioni che contengono le versioni\r\n        for (const part of parts) {\r\n          if (part.toLowerCase().includes('senza punteggiatura') || \r\n              part.toLowerCase().includes('versione raw')) {\r\n            rawText = part.replace(/^.*?:/, '').trim();\r\n          }\r\n          else if (part.toLowerCase().includes('versione corretta') || \r\n                   part.toLowerCase().includes('con punteggiatura')) {\r\n            correctText = part.replace(/^.*?:/, '').trim();\r\n          }\r\n        }\r\n      }\r\n      \r\n      // Se non è stato possibile estrarre entrambe le versioni, usa un fallback\r\n      if (!rawText || !correctText) {\r\n        return getRandomFallbackText(level);\r\n      }\r\n      \r\n      return { rawText, correctText };\r\n      \r\n    } catch (error) {\r\n      console.error('Errore nella chiamata API:', error);\r\n      // In caso di errore, usa un testo di fallback\r\n      return getRandomFallbackText(level);\r\n    }\r\n  };\r\n  \r\n  // Gestisci il cambio di livello\r\n  const handleLevelChange = (e) => {\r\n    setCurrentLevel(e.target.value);\r\n  };\r\n  \r\n  // Gestisci il cambio di testo dell'utente\r\n  const handleTextChange = (e) => {\r\n    setUserText(e.target.value);\r\n  };\r\n  \r\n  // Gestisci il play dell'audio di riferimento\r\n  const playReferenceAudio = () => {\r\n    // In un'implementazione reale, riproduce l'audio TTS\r\n    // Per simulazione, mostriamo un messaggio\r\n    alert(\"In un'implementazione reale, qui ascolteresti la lettura corretta del testo con la punteggiatura appropriata.\");\r\n  };\r\n  \r\n  // Invia l'esercizio per la valutazione\r\n  const submitExercise = () => {\r\n    if (!currentExercise || !userText) return;\r\n    \r\n    // Calcola il punteggio e prepara il feedback\r\n    const { score, feedback } = evaluateUserText(userText, currentExercise.correctText);\r\n    \r\n    setScore(score);\r\n    setFeedback(feedback);\r\n    setIsSubmitted(true);\r\n  };\r\n  \r\n  // Valutazione del testo inserito dall'utente\r\n  const evaluateUserText = (userText, correctText) => {\r\n    // Calcolo degli errori di punteggiatura\r\n    const userPunctuation = extractPunctuation(userText);\r\n    const correctPunctuation = extractPunctuation(correctText);\r\n    \r\n    // Verifica maiuscole\r\n    const userCapitalization = extractCapitalization(userText);\r\n    const correctCapitalization = extractCapitalization(correctText);\r\n    \r\n    // Calcola errori e punteggio\r\n    const punctuationErrors = comparePunctuation(userPunctuation, correctPunctuation);\r\n    const capitalizationErrors = compareCapitalization(userCapitalization, correctCapitalization);\r\n    \r\n    const totalErrors = punctuationErrors.length + capitalizationErrors.length;\r\n    const maxScore = correctPunctuation.length + correctCapitalization.length;\r\n    const userScore = Math.max(0, maxScore - totalErrors);\r\n    \r\n    // Calcola percentuale\r\n    const percentage = Math.round((userScore / maxScore) * 100);\r\n    \r\n    // Prepara feedback\r\n    const feedback = {\r\n      punctuationErrors,\r\n      capitalizationErrors,\r\n      percentage,\r\n      suggestions: generateSuggestions(punctuationErrors, capitalizationErrors)\r\n    };\r\n    \r\n    return { score: percentage, feedback };\r\n  };\r\n  \r\n  // Estrae la punteggiatura da un testo\r\n  const extractPunctuation = (text) => {\r\n    const punctuation = [];\r\n    let currentPos = 0;\r\n    \r\n    // Trova tutta la punteggiatura nel testo\r\n    const regex = /[.,;:!?\"()]/g;\r\n    let match;\r\n    \r\n    while ((match = regex.exec(text)) !== null) {\r\n      punctuation.push({\r\n        char: match[0],\r\n        position: match.index,\r\n        context: text.substring(Math.max(0, match.index - 10), \r\n                                Math.min(text.length, match.index + 10))\r\n      });\r\n      currentPos = match.index + 1;\r\n    }\r\n    \r\n    return punctuation;\r\n  };\r\n  \r\n  // Estrae le maiuscole da un testo\r\n  const extractCapitalization = (text) => {\r\n    const caps = [];\r\n    \r\n    // Trova tutte le maiuscole nel testo\r\n    const lines = text.split(/[.!?]\\s+/);\r\n    let currentPos = 0;\r\n    \r\n    for (let i = 0; i < lines.length; i++) {\r\n      const line = lines[i].trim();\r\n      if (line.length > 0) {\r\n        const firstChar = line[0];\r\n        if (firstChar === firstChar.toUpperCase() && firstChar !== firstChar.toLowerCase()) {\r\n          caps.push({\r\n            char: firstChar,\r\n            position: currentPos,\r\n            context: line.substring(0, Math.min(20, line.length))\r\n          });\r\n        }\r\n      }\r\n      \r\n      // Aggiorna la posizione per la prossima linea\r\n      currentPos += lines[i].length + 2; // +2 per il separatore e lo spazio\r\n    }\r\n    \r\n    return caps;\r\n  };\r\n  \r\n  // Confronta la punteggiatura dell'utente con quella corretta\r\n  const comparePunctuation = (userPunct, correctPunct) => {\r\n    const errors = [];\r\n    \r\n    // Verifica punteggiatura mancante\r\n    correctPunct.forEach(punct => {\r\n      const found = userPunct.some(up => \r\n        Math.abs(up.position - punct.position) < 5 && up.char === punct.char\r\n      );\r\n      \r\n      if (!found) {\r\n        errors.push({\r\n          type: 'missing',\r\n          char: punct.char,\r\n          context: punct.context,\r\n          message: `Manca un segno di ${getPunctuationName(punct.char)} qui: \"${punct.context}\"`\r\n        });\r\n      }\r\n    });\r\n    \r\n    // Verifica punteggiatura errata o in eccesso\r\n    userPunct.forEach(punct => {\r\n      const found = correctPunct.some(cp => \r\n        Math.abs(cp.position - punct.position) < 5 && cp.char === punct.char\r\n      );\r\n      \r\n      if (!found) {\r\n        const nearbyCorrect = correctPunct.find(cp => \r\n          Math.abs(cp.position - punct.position) < 5\r\n        );\r\n        \r\n        if (nearbyCorrect) {\r\n          errors.push({\r\n            type: 'wrong',\r\n            char: punct.char,\r\n            correctChar: nearbyCorrect.char,\r\n            context: punct.context,\r\n            message: `Hai usato ${getPunctuationName(punct.char)} invece di ${getPunctuationName(nearbyCorrect.char)} qui: \"${punct.context}\"`\r\n          });\r\n        } else {\r\n          errors.push({\r\n            type: 'extra',\r\n            char: punct.char,\r\n            context: punct.context,\r\n            message: `C'è un segno di ${getPunctuationName(punct.char)} in eccesso qui: \"${punct.context}\"`\r\n          });\r\n        }\r\n      }\r\n    });\r\n    \r\n    return errors;\r\n  };\r\n  \r\n  // Confronta le maiuscole dell'utente con quelle corrette\r\n  const compareCapitalization = (userCaps, correctCaps) => {\r\n    const errors = [];\r\n    \r\n    // Verifica maiuscole mancanti\r\n    correctCaps.forEach(cap => {\r\n      const found = userCaps.some(uc => \r\n        Math.abs(uc.position - cap.position) < 10 && \r\n        uc.char.toUpperCase() === cap.char.toUpperCase()\r\n      );\r\n      \r\n      if (!found) {\r\n        errors.push({\r\n          type: 'missing_cap',\r\n          context: cap.context,\r\n          message: `Manca una lettera maiuscola all'inizio di questa frase: \"${cap.context}\"`\r\n        });\r\n      }\r\n    });\r\n    \r\n    return errors;\r\n  };\r\n  \r\n  // Genera suggerimenti in base agli errori\r\n  const generateSuggestions = (punctErrors, capErrors) => {\r\n    const suggestions = [];\r\n    \r\n    // Analizza pattern di errori\r\n    const missingPoints = punctErrors.filter(e => e.type === 'missing' && e.char === '.').length;\r\n    const missingCommas = punctErrors.filter(e => e.type === 'missing' && e.char === ',').length;\r\n    const missingCaps = capErrors.length;\r\n    \r\n    // Genera suggerimenti specifici\r\n    if (missingPoints > 1) {\r\n      suggestions.push(\"Ricorda di separare le frasi con un punto. Ogni frase completa dovrebbe terminare con un punto.\");\r\n    }\r\n    \r\n    if (missingCommas > 1) {\r\n      suggestions.push(\"Usa le virgole per separare elementi di un elenco o per dividere parti di una frase.\");\r\n    }\r\n    \r\n    if (missingCaps > 1) {\r\n      suggestions.push(\"Inizia ogni frase con una lettera maiuscola dopo un punto, un punto esclamativo o un punto interrogativo.\");\r\n    }\r\n    \r\n    // Aggiungi suggerimenti generali\r\n    if (punctErrors.length > 0 || capErrors.length > 0) {\r\n      suggestions.push(\"Rileggi sempre il testo ad alta voce per capire dove servono le pause (virgole, punti) e dove iniziano nuove frasi (maiuscole).\");\r\n    }\r\n    \r\n    return suggestions;\r\n  };\r\n  \r\n  // Ottieni il nome del segno di punteggiatura\r\n  const getPunctuationName = (char) => {\r\n    const names = {\r\n      '.': 'punto',\r\n      ',': 'virgola',\r\n      ';': 'punto e virgola',\r\n      ':': 'due punti',\r\n      '!': 'punto esclamativo',\r\n      '?': 'punto interrogativo',\r\n      '\"': 'virgolette',\r\n      '(': 'parentesi',\r\n      ')': 'parentesi'\r\n    };\r\n    \r\n    return names[char] || char;\r\n  };\r\n  \r\n  // Inizia un nuovo esercizio\r\n  const startNewExercise = () => {\r\n    loadNewExercise();\r\n  };\r\n  \r\n  // Renderizza il feedback\r\n  const renderFeedback = () => {\r\n    if (!feedback) return null;\r\n    \r\n    return (\r\n      <div className=\"punteggiatura-feedback\">\r\n        <div className=\"feedback-score\">\r\n          <div className=\"score-circle\">\r\n            <span>{feedback.percentage}%</span>\r\n          </div>\r\n          <div className=\"score-label\">Punteggio</div>\r\n        </div>\r\n        \r\n        <div className=\"feedback-details\">\r\n          {feedback.punctuationErrors.length > 0 && (\r\n            <div className=\"errors-section\">\r\n              <h4>Errori di punteggiatura:</h4>\r\n              <ul>\r\n                {feedback.punctuationErrors.slice(0, 5).map((error, index) => (\r\n                  <li key={`punct-${index}`}>{error.message}</li>\r\n                ))}\r\n                {feedback.punctuationErrors.length > 5 && (\r\n                  <li>...e altri {feedback.punctuationErrors.length - 5} errori.</li>\r\n                )}\r\n              </ul>\r\n            </div>\r\n          )}\r\n          \r\n          {feedback.capitalizationErrors.length > 0 && (\r\n            <div className=\"errors-section\">\r\n              <h4>Errori di maiuscole:</h4>\r\n              <ul>\r\n                {feedback.capitalizationErrors.slice(0, 5).map((error, index) => (\r\n                  <li key={`cap-${index}`}>{error.message}</li>\r\n                ))}\r\n                {feedback.capitalizationErrors.length > 5 && (\r\n                  <li>...e altri {feedback.capitalizationErrors.length - 5} errori.</li>\r\n                )}\r\n              </ul>\r\n            </div>\r\n          )}\r\n          \r\n          {feedback.suggestions.length > 0 && (\r\n            <div className=\"suggestions-section\">\r\n              <h4>Suggerimenti:</h4>\r\n              <ul>\r\n                {feedback.suggestions.map((suggestion, index) => (\r\n                  <li key={`sugg-${index}`}>{suggestion}</li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"feedback-actions\">\r\n          <button className=\"primary-btn\" onClick={startNewExercise}>\r\n            Nuovo Esercizio\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  \r\n  return (\r\n    <div className=\"sezione-punteggiatura-container\">\r\n      <div className=\"punteggiatura-header\">\r\n        <h2>Esercizi di Punteggiatura</h2>\r\n        \r\n        <div className=\"level-selector\">\r\n          <label>Livello:</label>\r\n          <select \r\n            value={currentLevel}\r\n            onChange={handleLevelChange}\r\n            disabled={isLoading || isSubmitted}\r\n          >\r\n            <option value=\"facile\">Facile</option>\r\n            <option value=\"medio\">Medio</option>\r\n            <option value=\"difficile\">Difficile</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"exercise-container\">\r\n        {isLoading ? (\r\n          <div className=\"loading-indicator\">Caricamento dell'esercizio...</div>\r\n        ) : (\r\n          <>\r\n            <div className=\"exercise-instructions\">\r\n              <p>Ascolta l'audio e aggiungi la punteggiatura corretta al testo sottostante.</p>\r\n              <p>Ricorda di inserire anche le maiuscole dove necessario.</p>\r\n              \r\n              <button \r\n                className=\"audio-btn\"\r\n                onClick={playReferenceAudio}\r\n                disabled={!currentExercise}\r\n              >\r\n                <i className=\"fa fa-volume-up\"></i> Ascolta il testo\r\n              </button>\r\n            </div>\r\n            \r\n            {currentExercise && (\r\n              <div className=\"exercise-content\">\r\n                <div className=\"raw-text\">\r\n                  <h3>Testo da correggere:</h3>\r\n                  <p>{currentExercise.rawText}</p>\r\n                </div>\r\n                \r\n                <div className=\"text-editor-container\">\r\n                  <h3>Inserisci la punteggiatura:</h3>\r\n                  <textarea\r\n                    ref={textEditorRef}\r\n                    value={userText}\r\n                    onChange={handleTextChange}\r\n                    placeholder=\"Digita qui il testo con la punteggiatura corretta...\"\r\n                    className=\"punctuation-editor\"\r\n                    disabled={isSubmitted}\r\n                  />\r\n                  \r\n                  {!isSubmitted && (\r\n                    <div className=\"editor-actions\">\r\n                      <button \r\n                        className=\"primary-btn\"\r\n                        onClick={submitExercise}\r\n                        disabled={!userText.trim()}\r\n                      >\r\n                        Verifica\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                \r\n                {isSubmitted && (\r\n                  <div className=\"correct-text\">\r\n                    <h3>Testo corretto:</h3>\r\n                    <p>{currentExercise.correctText}</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n            \r\n            {isSubmitted && renderFeedback()}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SezionePunteggiatura;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}